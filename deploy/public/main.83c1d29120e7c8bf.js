"use strict";var _1=Object.defineProperty,v1=Object.defineProperties,E1=Object.getOwnPropertyDescriptors,OM=Object.getOwnPropertySymbols,w1=Object.prototype.hasOwnProperty,I1=Object.prototype.propertyIsEnumerable,PM=(Ke,ve,O)=>ve in Ke?_1(Ke,ve,{enumerable:!0,configurable:!0,writable:!0,value:O}):Ke[ve]=O,kM=(Ke,ve)=>{for(var O in ve||(ve={}))w1.call(ve,O)&&PM(Ke,O,ve[O]);if(OM)for(var O of OM(ve))I1.call(ve,O)&&PM(Ke,O,ve[O]);return Ke},FM=(Ke,ve)=>v1(Ke,E1(ve));(self.webpackChunkprf_project_szm=self.webpackChunkprf_project_szm||[]).push([[179],{2011:(Ke,ve,O)=>{O.d(ve,{Dh:()=>se,GT:()=>pe,cc:()=>Te,hO:()=>$e,on:()=>$,pX:()=>re,xv:()=>ce});var f=O(5e3),J=O(127),P=O(5813);Ke=O.hmd(Ke);const ue=["ngOnDestroy"],re=(Ie,He,We,be={})=>new Proxy(Ie,{get:(_e,Ee)=>We.runOutsideAngular(()=>{var Ue;if(Ie[Ee])return(null===(Ue=null==be?void 0:be.spy)||void 0===Ue?void 0:Ue.get)&&be.spy.get(Ee,Ie[Ee]),Ie[Ee];if(ue.indexOf(Ee)>-1)return()=>{};const Ve=He.toPromise().then(j=>{const V=j&&j[Ee];return"function"==typeof V?V.bind(j):V&&V.then?V.then(Z=>We.run(()=>Z)):We.run(()=>V)});return new Proxy(()=>{},{get:(j,V)=>Ve[V],apply:(j,V,Z)=>Ve.then(oe=>{var te;const Ae=oe&&oe(...Z);return(null===(te=null==be?void 0:be.spy)||void 0===te?void 0:te.apply)&&be.spy.apply(Ee,Z,Ae),Ae})})})}),pe=(Ie,He)=>{He.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(be=>{Object.defineProperty(Ie.prototype,be,Object.getOwnPropertyDescriptor(We.prototype||We,be))})})};class le{constructor(He){return He}}const se=new f.OlP("angularfire2.app.options"),ce=new f.OlP("angularfire2.app.name");function $(Ie,He,We){const _e="object"==typeof We&&We||{};_e.name=_e.name||"string"==typeof We&&We||"[DEFAULT]";const Ue=J.Z.apps.filter(Ve=>Ve&&Ve.name===_e.name)[0]||He.runOutsideAngular(()=>J.Z.initializeApp(Ie,_e));try{JSON.stringify(Ie)!==JSON.stringify(Ue.options)&&B("error",`${Ue.name} Firebase App already initialized with different options${Ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ve){}return new le(Ue)}const B=(Ie,...He)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ie](...He)},X={provide:le,useFactory:$,deps:[se,f.R0b,[new f.FiY,ce]]};let $e=(()=>{class Ie{constructor(We){J.Z.registerVersion("angularfire",P.q4.full,"core"),J.Z.registerVersion("angularfire",P.q4.full,"app-compat"),J.Z.registerVersion("angular",f.q4F.full,We.toString())}static initializeApp(We,be){return{ngModule:Ie,providers:[{provide:se,useValue:We},{provide:ce,useValue:be}]}}}return Ie.\u0275fac=function(We){return new(We||Ie)(f.LFG(f.Lbi))},Ie.\u0275mod=f.oAB({type:Ie}),Ie.\u0275inj=f.cJS({providers:[X]}),Ie})();function Te(Ie,He,We,be,_e){const[,Ee,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===Ie)||[];if(Ee)return function xe(Ie,He){try{return Ie.toString()===He.toString()}catch(We){return Ie===He}}(_e,Ue)||(he("error",`${He} was already initialized on the ${We} Firebase App with different settings.${Le?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:Ue})),Ee;{const Ve=be();return globalThis.\u0275AngularfireInstanceCache.push([Ie,Ve,_e]),Ve}}const Le=!!Ke.hot,he=(Ie,...He)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ie](...He)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ke,ve,O)=>{O.d(ve,{q4:()=>Ui,iC:()=>zo,HU:()=>Ah,vb:()=>Th,JM:()=>ny});var f=O(5e3),J=O(5867),P=O(5861),ue=O(9681),re=O(2090),pe=O(4859),le=O(1877),se=O(8766);const ce="@firebase/installations",$="0.5.9",X=`w:${$}`,$e="FIS_v2",He=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(b){return b instanceof re.ZR&&b.code.includes("request-failed")}function be({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function _e(b){return{token:b.token,requestStatus:2,expiresIn:oe(b.expiresIn),creationTime:Date.now()}}function Ee(b,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,P.Z)(function*(b,D){const F=(yield D.json()).error;return He.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Ve({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function j(b,{refreshToken:D}){const M=Ve(b);return M.append("Authorization",function te(b){return`${$e} ${b}`}(D)),M}function V(b){return Z.apply(this,arguments)}function Z(){return(Z=(0,P.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function oe(b){return Number(b.replace("s","000"))}function Ae(b,D){return ne.apply(this,arguments)}function ne(){return(ne=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:M}){const F=be(b),K=Ve(b),ie=D.getImmediate({optional:!0});if(ie){const dt=yield ie.getHeartbeatsHeader();dt&&K.append("x-firebase-client",dt)}const Fe={method:"POST",headers:K,body:JSON.stringify({fid:M,authVersion:$e,appId:b.appId,sdkVersion:X})},vt=yield V(()=>fetch(F,Fe));if(vt.ok){const dt=yield vt.json();return{fid:dt.fid||M,registrationStatus:2,refreshToken:dt.refreshToken,authToken:_e(dt.authToken)}}throw yield Ee("Create Installation",vt)})).apply(this,arguments)}function at(b){return new Promise(D=>{setTimeout(D,b)})}const wn=/^[cdef][\w-]{21}$/;function mt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function hn(b){return function Dt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return wn.test(M)?M:""}catch(b){return""}}function jt(b){return`${b.appName}!${b.appId}`}const Wn=new Map;function Kt(b,D){const M=jt(b);xt(M,D),function Qi(b,D){const M=function nr(){return!Gr&&"BroadcastChannel"in self&&(Gr=new BroadcastChannel("[Firebase] FID Change"),Gr.onmessage=b=>{xt(b.data.key,b.data.fid)}),Gr}();M&&M.postMessage({key:b,fid:D}),function gr(){0===Wn.size&&Gr&&(Gr.close(),Gr=null)}()}(M,D)}function xt(b,D){const M=Wn.get(b);if(M)for(const F of M)F(D)}let Gr=null;const qr="firebase-installations-store";let bi=null;function lt(){return bi||(bi=(0,se.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(qr)}})),bi}function zr(b,D){return fn.apply(this,arguments)}function fn(){return(fn=(0,P.Z)(function*(b,D){const M=jt(b),K=(yield lt()).transaction(qr,"readwrite"),ie=K.objectStore(qr),Re=yield ie.get(M);return yield ie.put(D,M),yield K.done,(!Re||Re.fid!==D.fid)&&Kt(b,D.fid),D})).apply(this,arguments)}function mn(b){return zs.apply(this,arguments)}function zs(){return(zs=(0,P.Z)(function*(b){const D=jt(b),F=(yield lt()).transaction(qr,"readwrite");yield F.objectStore(qr).delete(D),yield F.done})).apply(this,arguments)}function Wr(b,D){return Un.apply(this,arguments)}function Un(){return(Un=(0,P.Z)(function*(b,D){const M=jt(b),K=(yield lt()).transaction(qr,"readwrite"),ie=K.objectStore(qr),Re=yield ie.get(M),Fe=D(Re);return void 0===Fe?yield ie.delete(M):yield ie.put(Fe,M),yield K.done,Fe&&(!Re||Re.fid!==Fe.fid)&&Kt(b,Fe.fid),Fe})).apply(this,arguments)}function In(b){return si.apply(this,arguments)}function si(){return(si=(0,P.Z)(function*(b){let D;const M=yield Wr(b.appConfig,F=>{const K=Co(F),ie=Ft(b,K);return D=ie.registrationPromise,ie.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function Co(b){return Ws(b||{fid:mt(),registrationStatus:0})}function Ft(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(He.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function tt(b,D){return ft.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:rr(b)}:{installationEntry:D}}function ft(){return(ft=(0,P.Z)(function*(b,D){try{const M=yield Ae(b,D);return zr(b.appConfig,M)}catch(M){throw We(M)&&409===M.customData.serverCode?yield mn(b.appConfig):yield zr(b.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function rr(b){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,P.Z)(function*(b){let D=yield Rt(b.appConfig);for(;1===D.registrationStatus;)yield at(100),D=yield Rt(b.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield In(b);return F||M}return D})).apply(this,arguments)}function Rt(b){return Wr(b,D=>{if(!D)throw He.create("installation-not-found");return Ws(D)})}function Ws(b){return function ir(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function sr(b,D){return L.apply(this,arguments)}function L(){return(L=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},M){const F=G(b,M),K=j(b,M),ie=D.getImmediate({optional:!0});if(ie){const dt=yield ie.getHeartbeatsHeader();dt&&K.append("x-firebase-client",dt)}const Fe={method:"POST",headers:K,body:JSON.stringify({installation:{sdkVersion:X,appId:b.appId}})},vt=yield V(()=>fetch(F,Fe));if(vt.ok)return _e(yield vt.json());throw yield Ee("Generate Auth Token",vt)})).apply(this,arguments)}function G(b,{fid:D}){return`${be(b)}/${D}/authTokens:generate`}function q(b){return we.apply(this,arguments)}function we(){return(we=(0,P.Z)(function*(b,D=!1){let M;const F=yield Wr(b.appConfig,ie=>{if(!yt(ie))throw He.create("not-registered");const Re=ie.authToken;if(!D&&nn(Re))return ie;if(1===Re.requestStatus)return M=H(b,D),ie;{if(!navigator.onLine)throw He.create("app-offline");const Fe=xn(ie);return M=Ze(b,Fe),Fe}});return M?yield M:F.authToken})).apply(this,arguments)}function H(b,D){return Q.apply(this,arguments)}function Q(){return(Q=(0,P.Z)(function*(b,D){let M=yield Me(b.appConfig);for(;1===M.authToken.requestStatus;)yield at(100),M=yield Me(b.appConfig);const F=M.authToken;return 0===F.requestStatus?q(b,D):F})).apply(this,arguments)}function Me(b){return Wr(b,D=>{if(!yt(D))throw He.create("not-registered");return function mr(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Ze(b,D){return it.apply(this,arguments)}function it(){return(it=(0,P.Z)(function*(b,D){try{const M=yield sr(b,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield zr(b.appConfig,F),M}catch(M){if(!We(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield zr(b.appConfig,F)}else yield mn(b.appConfig);throw M}})).apply(this,arguments)}function yt(b){return void 0!==b&&2===b.registrationStatus}function nn(b){return 2===b.requestStatus&&!function pt(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function xn(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function ha(){return(ha=(0,P.Z)(function*(b){const D=b,{installationEntry:M,registrationPromise:F}=yield In(D);return F?F.catch(console.error):q(D).catch(console.error),M.fid})).apply(this,arguments)}function fa(){return(fa=(0,P.Z)(function*(b,D=!1){const M=b;return yield Rn(M),(yield q(M,D)).token})).apply(this,arguments)}function Rn(b){return yr.apply(this,arguments)}function yr(){return(yr=(0,P.Z)(function*(b){const{registrationPromise:D}=yield In(b);D&&(yield D)})).apply(this,arguments)}function To(b){return He.create("missing-app-config-values",{valueName:b})}const xr="installations",nt=b=>{const D=b.getProvider("app").getImmediate(),M=function Zn(b){if(!b||!b.options)throw To("App Configuration");if(!b.name)throw To("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!b.options[M])throw To(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,ue._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Zt=b=>{const D=b.getProvider("app").getImmediate(),M=(0,ue._getProvider)(D,xr).getImmediate();return{getId:()=>function du(b){return ha.apply(this,arguments)}(M),getToken:K=>function hu(b){return fa.apply(this,arguments)}(M,K)}};(function Rr(){(0,ue._registerComponent)(new pe.wA(xr,nt,"PUBLIC")),(0,ue._registerComponent)(new pe.wA("installations-internal",Zt,"PRIVATE"))})(),(0,ue.registerVersion)(ce,$),(0,ue.registerVersion)(ce,$,"esm2017");const Di="@firebase/remote-config",yn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Rp{constructor(D,M,F,K){this.client=D,this.storage=M,this.storageCache=F,this.logger=K}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,K=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${K}.`),K}fetch(D){var M=this;return(0,P.Z)(function*(){const[F,K]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(K&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return K;D.eTag=K&&K.eTag;const ie=yield M.client.fetch(D),Re=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ie.status&&Re.push(M.storage.setLastSuccessfulFetchResponse(ie)),yield Promise.all(Re),ie})()}}function Tc(b=navigator){return b.languages&&b.languages[0]||b.language}class or{constructor(D,M,F,K,ie,Re){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=K,this.apiKey=ie,this.appId=Re}fetch(D){var M=this;return(0,P.Z)(function*(){const[F,K]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Re=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Fe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},vt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:K,app_id:M.appId,language_code:Tc()},dt={method:"POST",headers:Fe,body:JSON.stringify(vt)},Ot=fetch(Re,dt),gt=new Promise((Jr,Hn)=>{D.signal.addEventListener(()=>{const Wo=new Error("The operation was aborted.");Wo.name="AbortError",Hn(Wo)})});let Jn;try{yield Promise.race([Ot,gt]),Jn=yield Ot}catch(Jr){let Hn="fetch-client-network";throw"AbortError"===Jr.name&&(Hn="fetch-timeout"),yn.create(Hn,{originalErrorMessage:Jr.message})}let Tn=Jn.status;const Va=Jn.headers.get("ETag")||void 0;let pi,lr;if(200===Jn.status){let Jr;try{Jr=yield Jn.json()}catch(Hn){throw yn.create("fetch-client-parse",{originalErrorMessage:Hn.message})}pi=Jr.entries,lr=Jr.state}if("INSTANCE_STATE_UNSPECIFIED"===lr?Tn=500:"NO_CHANGE"===lr?Tn=304:("NO_TEMPLATE"===lr||"EMPTY_CONFIG"===lr)&&(pi={}),304!==Tn&&200!==Tn)throw yn.create("fetch-status",{httpStatus:Tn});return{status:Tn,eTag:Va,config:pi}})()}}class Np{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,P.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var K=this;return(0,P.Z)(function*(){yield function Cs(b,D){return new Promise((M,F)=>{const K=Math.max(D-Date.now(),0),ie=setTimeout(M,K);b.addEventListener(()=>{clearTimeout(ie),F(yn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const ie=yield K.client.fetch(D);return yield K.storage.deleteThrottleMetadata(),ie}catch(ie){if(!function Ac(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ie))throw ie;const Re={throttleEndTimeMillis:Date.now()+(0,re.$s)(F),backoffCount:F+1};return yield K.storage.setThrottleMetadata(Re),K.attemptFetch(D,Re)}})()}}class Sc{constructor(D,M,F,K,ie){this.app=D,this._client=M,this._storageCache=F,this._storage=K,this._logger=ie,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ul(b,D){const M=b.target.error||void 0;return yn.create(D,{originalErrorMessage:M&&M.message})}const Ts="app_namespace_store";class Fp{constructor(D,M,F,K=function kp(){return new Promise((b,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{D(ul(F,"storage-open"))},M.onsuccess=F=>{b(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ts,{keyPath:"compositeKey"})}}catch(M){D(yn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=K}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,ie)=>{const Fe=F.transaction([Ts],"readonly").objectStore(Ts),vt=M.createCompositeKey(D);try{const dt=Fe.get(vt);dt.onerror=Ot=>{ie(ul(Ot,"storage-get"))},dt.onsuccess=Ot=>{const gt=Ot.target.result;K(gt?gt.value:void 0)}}catch(dt){ie(yn.create("storage-get",{originalErrorMessage:dt&&dt.message}))}})})()}set(D,M){var F=this;return(0,P.Z)(function*(){const K=yield F.openDbPromise;return new Promise((ie,Re)=>{const vt=K.transaction([Ts],"readwrite").objectStore(Ts),dt=F.createCompositeKey(D);try{const Ot=vt.put({compositeKey:dt,value:M});Ot.onerror=gt=>{Re(ul(gt,"storage-set"))},Ot.onsuccess=()=>{ie()}}catch(Ot){Re(yn.create("storage-set",{originalErrorMessage:Ot&&Ot.message}))}})})()}delete(D){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((K,ie)=>{const Fe=F.transaction([Ts],"readwrite").objectStore(Ts),vt=M.createCompositeKey(D);try{const dt=Fe.delete(vt);dt.onerror=Ot=>{ie(ul(Ot,"storage-delete"))},dt.onsuccess=()=>{K()}}catch(dt){ie(yn.create("storage-delete",{originalErrorMessage:dt&&dt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class xc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),K=D.storage.getActiveConfig(),ie=yield M;ie&&(D.lastFetchStatus=ie);const Re=yield F;Re&&(D.lastSuccessfulFetchTimestampMillis=Re);const Fe=yield K;Fe&&(D.activeConfig=Fe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function mu(){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,P.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Ao(){(0,ue._registerComponent)(new pe.wA("remote-config",function b(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),K=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw yn.create("registration-window");if(!(0,re.hl)())throw yn.create("indexed-db-unavailable");const{projectId:ie,apiKey:Re,appId:Fe}=F.options;if(!ie)throw yn.create("registration-project-id");if(!Re)throw yn.create("registration-api-key");if(!Fe)throw yn.create("registration-app-id");const vt=new Fp(Fe,F.name,M=M||"firebase"),dt=new xc(vt),Ot=new le.Yd(Di);Ot.logLevel=le.in.ERROR;const gt=new or(K,ue.SDK_VERSION,M,ie,Re,Fe),Jn=new Np(gt,vt),Tn=new Rp(Jn,vt,dt,Ot),Va=new Sc(F,Tn,dt,vt,Ot);return function Yt(b){const D=(0,re.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Va),Va},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(Di,"0.3.8"),(0,ue.registerVersion)(Di,"0.3.8","esm2017")}();const Nc="/firebase-messaging-sw.js",ar="/firebase-cloud-messaging-push-scope",Ys="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",So="google.c.a.c_id",Oc="google.c.a.c_l",yh="google.c.a.ts",Pc="google.c.a.e";var Mo=(()=>{return(b=Mo||(Mo={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Mo;var b})();function _r(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kc(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),K=new Uint8Array(F.length);for(let ie=0;ie<F.length;++ie)K[ie]=F.charCodeAt(ie);return K}const vr="fcm_token_details_db",Kr="fcm_token_object_Store";function ll(b){return Fc.apply(this,arguments)}function Fc(){return Fc=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ie=>ie.name).includes(vr))return null;let D=null;return(yield(0,se.X3)(vr,5,{upgrade:(F=(0,P.Z)(function*(K,ie,Re,Fe){var vt;if(ie<2||!K.objectStoreNames.contains(Kr))return;const dt=Fe.objectStore(Kr),Ot=yield dt.index("fcmSenderId").get(b);if(yield dt.clear(),Ot)if(2===ie){const gt=Ot;if(!gt.auth||!gt.p256dh||!gt.endpoint)return;D={token:gt.fcmToken,createTime:null!==(vt=gt.createTime)&&void 0!==vt?vt:Date.now(),subscriptionOptions:{auth:gt.auth,p256dh:gt.p256dh,endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:"string"==typeof gt.vapidKey?gt.vapidKey:_r(gt.vapidKey)}}}else if(3===ie){const gt=Ot;D={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:_r(gt.auth),p256dh:_r(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:_r(gt.vapidKey)}}}else if(4===ie){const gt=Ot;D={token:gt.fcmToken,createTime:gt.createTime,subscriptionOptions:{auth:_r(gt.auth),p256dh:_r(gt.p256dh),endpoint:gt.endpoint,swScope:gt.swScope,vapidKey:_r(gt.vapidKey)}}}}),function(ie,Re,Fe,vt){return F.apply(this,arguments)})})).close(),yield(0,se.Lj)(vr),yield(0,se.Lj)("fcm_vapid_details_db"),yield(0,se.Lj)("undefined"),cl(D)?D:null;var F}),Fc.apply(this,arguments)}function cl(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const xi="firebase-messaging-store";let _h=null;function Qt(){return _h||(_h=(0,se.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(xi)}})),_h}function _a(b){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(b){const D=Kn(b),F=yield(yield Qt()).transaction(xi).objectStore(xi).get(D);if(F)return F;{const K=yield ll(b.appConfig.senderId);if(K)return yield qt(b,K),K}})).apply(this,arguments)}function qt(b,D){return va.apply(this,arguments)}function va(){return(va=(0,P.Z)(function*(b,D){const M=Kn(b),K=(yield Qt()).transaction(xi,"readwrite");return yield K.objectStore(xi).put(D,M),yield K.done,D})).apply(this,arguments)}function yu(b){return As.apply(this,arguments)}function As(){return(As=(0,P.Z)(function*(b){const D=Kn(b),F=(yield Qt()).transaction(xi,"readwrite");yield F.objectStore(xi).delete(D),yield F.done})).apply(this,arguments)}function Kn({appConfig:b}){return b.appId}const un=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ri(b,D){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,P.Z)(function*(b,D){const M=yield No(b),F=Oo(D),K={method:"POST",headers:M,body:JSON.stringify(F)};let ie;try{ie=yield(yield fetch(Ni(b.appConfig),K)).json()}catch(Re){throw un.create("token-subscribe-failed",{errorInfo:Re})}if(ie.error)throw un.create("token-subscribe-failed",{errorInfo:ie.error.message});if(!ie.token)throw un.create("token-subscribe-no-token");return ie.token})).apply(this,arguments)}function Xs(b,D){return es.apply(this,arguments)}function es(){return(es=(0,P.Z)(function*(b,D){const M=yield No(b),F=Oo(D.subscriptionOptions),K={method:"PATCH",headers:M,body:JSON.stringify(F)};let ie;try{ie=yield(yield fetch(`${Ni(b.appConfig)}/${D.token}`,K)).json()}catch(Re){throw un.create("token-update-failed",{errorInfo:Re})}if(ie.error)throw un.create("token-update-failed",{errorInfo:ie.error.message});if(!ie.token)throw un.create("token-update-no-token");return ie.token})).apply(this,arguments)}function Ea(b,D){return ai.apply(this,arguments)}function ai(){return(ai=(0,P.Z)(function*(b,D){const F={method:"DELETE",headers:yield No(b)};try{const ie=yield(yield fetch(`${Ni(b.appConfig)}/${D}`,F)).json();if(ie.error)throw un.create("token-unsubscribe-failed",{errorInfo:ie.error.message})}catch(K){throw un.create("token-unsubscribe-failed",{errorInfo:K})}})).apply(this,arguments)}function Ni({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function No(b){return st.apply(this,arguments)}function st(){return(st=(0,P.Z)(function*({appConfig:b,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Oo({p256dh:b,auth:D,endpoint:M,vapidKey:F}){const K={web:{endpoint:M,auth:D,p256dh:b}};return F!==Ys&&(K.web.applicationPubKey=F),K}const _u=6048e5;function wa(b){return fl.apply(this,arguments)}function fl(){return(fl=(0,P.Z)(function*(b){const D=yield sn(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:_r(D.getKey("auth")),p256dh:_r(D.getKey("p256dh"))},F=yield _a(b.firebaseDependencies);if(F){if(eo(F.subscriptionOptions,M))return Date.now()>=F.createTime+_u?gl(b,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Ea(b.firebaseDependencies,F.token)}catch(K){console.warn(K)}return Tt(b.firebaseDependencies,M)}return Tt(b.firebaseDependencies,M)})).apply(this,arguments)}function Ia(b){return pl.apply(this,arguments)}function pl(){return(pl=(0,P.Z)(function*(b){const D=yield _a(b.firebaseDependencies);D&&(yield Ea(b.firebaseDependencies,D.token),yield yu(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function gl(b,D){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(b,D){try{const M=yield Xs(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield qt(b.firebaseDependencies,F),M}catch(M){throw yield Ia(b),M}})).apply(this,arguments)}function Tt(b,D){return ml.apply(this,arguments)}function ml(){return(ml=(0,P.Z)(function*(b,D){const F={token:yield Ri(b,D),createTime:Date.now(),subscriptionOptions:D};return yield qt(b,F),F.token})).apply(this,arguments)}function sn(b,D){return Po.apply(this,arguments)}function Po(){return(Po=(0,P.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kc(D)})})).apply(this,arguments)}function eo(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function Yr(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function ba(b,D){if(!D.notification)return;b.notification={};const M=D.notification.title;M&&(b.notification.title=M);const F=D.notification.body;F&&(b.notification.body=F);const K=D.notification.image;K&&(b.notification.image=K)}(D,b),function yl(b,D){!D.data||(b.data=D.data)}(D,b),function Lp(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const M=D.fcmOptions.link;M&&(b.fcmOptions.link=M);const F=D.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(D,b),D}function vu(b){return"object"==typeof b&&!!b&&So in b}function Da(b,D){const M=[];for(let F=0;F<b.length;F++)M.push(b.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function _n(b){return un.create("missing-app-config-values",{valueName:b})}Da("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Da("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ts{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const K=function Eu(b){if(!b||!b.options)throw _n("App Configuration Object");if(!b.name)throw _n("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const F of D)if(!M[F])throw _n(F);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:K,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Ca(b){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,P.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Nc,{scope:ar}),b.swRegistration.update().catch(()=>{})}catch(D){throw un.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function ui(b,D){return _l.apply(this,arguments)}function _l(){return(_l=(0,P.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield Ca(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw un.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function wu(b,D){return vl.apply(this,arguments)}function vl(){return(vl=(0,P.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Ys)})).apply(this,arguments)}function Ta(){return(Ta=(0,P.Z)(function*(b,D){if(!navigator)throw un.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw un.create("permission-blocked");return yield wu(b,null==D?void 0:D.vapidKey),yield ui(b,null==D?void 0:D.serviceWorkerRegistration),wa(b)})).apply(this,arguments)}function Aa(b,D,M){return El.apply(this,arguments)}function El(){return(El=(0,P.Z)(function*(b,D,M){const F=Sa(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[So],message_name:M[Oc],message_time:M[yh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Sa(b){switch(b){case Mo.NOTIFICATION_CLICKED:return"notification_open";case Mo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wl(){return(wl=(0,P.Z)(function*(b,D){const M=D.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===Mo.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Yr(M)):b.onMessageHandler.next(Yr(M)));const F=M.data;vu(F)&&"1"===F[Pc]&&(yield Aa(b,M.messageType,F))})).apply(this,arguments)}const ko="@firebase/messaging",Lc=b=>{const D=new ts(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Vp(b,D){return wl.apply(this,arguments)}(D,M)),D},Fo=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function Iu(b,D){return Ta.apply(this,arguments)}(D,F)}};function Lo(){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,P.Z)(function*(){try{yield(0,re.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vc(){(0,ue._registerComponent)(new pe.wA("messaging",Lc,"PUBLIC")),(0,ue._registerComponent)(new pe.wA("messaging-internal",Fo,"PRIVATE")),(0,ue.registerVersion)(ko,"0.9.13"),(0,ue.registerVersion)(ko,"0.9.13","esm2017")}();const Uc="analytics",Up="firebase_id",ns="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Vo="https://www.googletagmanager.com/gtag/js",jn=new le.Yd("@firebase/analytics");function wh(b){return Promise.all(b.map(D=>D.catch(M=>M)))}function to(b,D){const M=document.createElement("script");M.src=`${Vo}?l=${b}&id=${D}`,M.async=!0,document.head.appendChild(M)}function jc(b,D,M,F,K,ie){return Du.apply(this,arguments)}function Du(){return(Du=(0,P.Z)(function*(b,D,M,F,K,ie){const Re=F[K];try{if(Re)yield D[Re];else{const vt=(yield wh(M)).find(dt=>dt.measurementId===K);vt&&(yield D[vt.appId])}}catch(Fe){jn.error(Fe)}b("config",K,ie)})).apply(this,arguments)}function Cu(b,D,M,F,K){return no.apply(this,arguments)}function no(){return(no=(0,P.Z)(function*(b,D,M,F,K){try{let ie=[];if(K&&K.send_to){let Re=K.send_to;Array.isArray(Re)||(Re=[Re]);const Fe=yield wh(M);for(const vt of Re){const dt=Fe.find(gt=>gt.measurementId===vt),Ot=dt&&D[dt.appId];if(!Ot){ie=[];break}ie.push(Ot)}}0===ie.length&&(ie=Object.values(D)),yield Promise.all(ie),b("event",F,K||{})}catch(ie){jn.error(ie)}})).apply(this,arguments)}function jp(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(Vo))return D;return null}const on=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Il=new class li{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function bl(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function ki(b){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,P.Z)(function*(b){var D;const{appId:M,apiKey:F}=b,K={method:"GET",headers:bl(F)},ie=ns.replace("{app-id}",M),Re=yield fetch(ie,K);if(200!==Re.status&&304!==Re.status){let Fe="";try{const vt=yield Re.json();(null===(D=vt.error)||void 0===D?void 0:D.message)&&(Fe=vt.error.message)}catch(vt){}throw on.create("config-fetch-failed",{httpStatus:Re.status,responseMessage:Fe})}return Re.json()})).apply(this,arguments)}function zt(b){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,P.Z)(function*(b,D=Il,M){const{appId:F,apiKey:K,measurementId:ie}=b.options;if(!F)throw on.create("no-app-id");if(!K){if(ie)return{measurementId:ie,appId:F};throw on.create("no-api-key")}const Re=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Fe=new qc;return setTimeout((0,P.Z)(function*(){Fe.abort()}),void 0!==M?M:6e4),wt({appId:F,apiKey:K,measurementId:ie},Re,Fe,D)})).apply(this,arguments)}function wt(b,D,M){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,P.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:M},F,K=Il){const{appId:ie,measurementId:Re}=b;try{yield Tu(F,D)}catch(Fe){if(Re)return jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Re} provided in the "measurementId" field in the local Firebase config. [${Fe.message}]`),{appId:ie,measurementId:Re};throw Fe}try{const Fe=yield ki(b);return K.deleteThrottleMetadata(ie),Fe}catch(Fe){if(!Dl(Fe)){if(K.deleteThrottleMetadata(ie),Re)return jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Re} provided in the "measurementId" field in the local Firebase config. [${Fe.message}]`),{appId:ie,measurementId:Re};throw Fe}const vt=503===Number(Fe.customData.httpStatus)?(0,re.$s)(M,K.intervalMillis,30):(0,re.$s)(M,K.intervalMillis),dt={throttleEndTimeMillis:Date.now()+vt,backoffCount:M+1};return K.setThrottleMetadata(ie,dt),jn.debug(`Calling attemptFetch again in ${vt} millis`),wt(b,dt,F,K)}})).apply(this,arguments)}function Tu(b,D){return new Promise((M,F)=>{const K=Math.max(D-Date.now(),0),ie=setTimeout(M,K);b.addEventListener(()=>{clearTimeout(ie),F(on.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Dl(b){if(!(b instanceof re.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class qc{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function zc(){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,P.Z)(function*(){if(!(0,re.hl)())return jn.warn(on.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(b){return jn.warn(on.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function ur(){return(ur=(0,P.Z)(function*(b,D,M,F,K,ie,Re){var Fe;const vt=zt(b);vt.then(Tn=>{M[Tn.measurementId]=Tn.appId,b.options.measurementId&&Tn.measurementId!==b.options.measurementId&&jn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Tn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Tn=>jn.error(Tn)),D.push(vt);const dt=zc().then(Tn=>{if(Tn)return F.getId()}),[Ot,gt]=yield Promise.all([vt,dt]);jp()||to(ie,Ot.measurementId),K("js",new Date);const Jn=null!==(Fe=null==Re?void 0:Re.config)&&void 0!==Fe?Fe:{};return Jn.origin="firebase",Jn.update=!0,null!=gt&&(Jn[Up]=gt),K("config",Ot.measurementId,Jn),Ot.measurementId})).apply(this,arguments)}class xs{constructor(D){this.app=D}_delete(){return delete Qn[this.app.options.appId],Promise.resolve()}}let Qn={},Wc=[];const Na={};let Fi,Rs,Bo="dataLayer",Cn=!1;function Or(b,D,M){!function Oa(){const b=[];if((0,re.ru)()&&b.push("This is a browser extension environment."),(0,re.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,K)=>`(${K+1}) ${F}`).join(" "),M=on.create("invalid-analytics-context",{errorInfo:D});jn.warn(M.message)}}();const F=b.options.appId;if(!F)throw on.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw on.create("no-api-key");jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qn[F])throw on.create("already-exists",{id:F});if(!Cn){!function bu(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(Bo);const{wrappedGtag:ie,gtagCore:Re}=function Bp(b,D,M,F,K){let ie=function(...Re){window[F].push(arguments)};return window[K]&&"function"==typeof window[K]&&(ie=window[K]),window[K]=function $c(b,D,M,F){function ie(){return(ie=(0,P.Z)(function*(Re,Fe,vt){try{"event"===Re?yield Cu(b,D,M,Fe,vt):"config"===Re?yield jc(b,D,M,F,Fe,vt):b("set",Fe)}catch(dt){jn.error(dt)}})).apply(this,arguments)}return function K(Re,Fe,vt){return ie.apply(this,arguments)}}(ie,b,D,M),{gtagCore:ie,wrappedGtag:window[K]}}(Qn,Wc,Na,Bo,"gtag");Rs=ie,Fi=Re,Cn=!0}return Qn[F]=function Qr(b,D,M,F,K,ie,Re){return ur.apply(this,arguments)}(b,Wc,Na,D,Fi,Bo,M),new xs(b)}function Pa(){return(Pa=(0,P.Z)(function*(b,D,M,F,K){if(K&&K.global)b("event",M,F);else{const ie=yield D;b("event",M,Object.assign(Object.assign({},F),{send_to:ie}))}})).apply(this,arguments)}function Ih(){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,P.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}const Kc="@firebase/analytics";!function Ch(){(0,ue._registerComponent)(new pe.wA(Uc,(D,{options:M})=>Or(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ue._registerComponent)(new pe.wA("analytics-internal",function b(D){try{const M=D.getProvider(Uc).getImmediate();return{logEvent:(F,K,ie)=>function Zc(b,D,M,F){b=(0,re.m9)(b),function Ns(b,D,M,F,K){return Pa.apply(this,arguments)}(Rs,Qn[b.app.options.appId],D,M,F).catch(K=>jn.error(K))}(M,F,K,ie)}}catch(M){throw on.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ue.registerVersion)(Kc,"0.7.9"),(0,ue.registerVersion)(Kc,"0.7.9","esm2017")}();var so=O(4408),ln=O(7565);const Ps=new class Au extends ln.v{}(class Al extends so.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var $n=O(4986),Pr=O(8505),di=O(9468),Su=O(5363);const Ui=new f.GfV("7.3.0"),hi="__angularfire_symbol__analyticsIsSupportedValue",ks="__angularfire_symbol__analyticsIsSupported",Bi="__angularfire_symbol__remoteConfigIsSupportedValue",is="__angularfire_symbol__remoteConfigIsSupported",qo="__angularfire_symbol__messagingIsSupportedValue",Yc="__angularfire_symbol__messagingIsSupported";function ny(b,D,M){if(D){if(1===D.length)return D[0];const ie=D.filter(Re=>Re.app===M);if(1===ie.length)return ie[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[ks]||(globalThis[ks]=Ih().then(b=>globalThis[hi]=b).catch(()=>globalThis[hi]=!1)),globalThis[Yc]||(globalThis[Yc]=Lo().then(b=>globalThis[qo]=b).catch(()=>globalThis[qo]=!1)),globalThis[is]||(globalThis[is]=mu().then(b=>globalThis[Bi]=b).catch(()=>globalThis[Bi]=!1));const Th=(b,D)=>{const M=D?[D]:(0,J.C6)(),F=[];return M.forEach(K=>{K.container.getProvider(b).instances.forEach(Re=>{F.includes(Re)||F.push(Re)})}),F};function Fs(){}class xl{constructor(D,M=Ps){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const K=this.zone;return this.delegate.schedule(function(Re){K.runGuarded(()=>{D.apply(this,[Re])})},M,F)}}class Rl{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fs,{},Fs,Fs)),M.pipe((0,Pr.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ah=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new xl(Zone.current)),this.insideAngular=M.run(()=>new xl(Zone.current,$n.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function ss(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function zo(b){return ss(),function ao(b){return function(M){return(M=M.lift(new Rl(b.ngZone))).pipe((0,di.R)(b.outsideAngular),(0,Su.Q)(b.insideAngular))}}(ss())(b)}},2090:(Ke,ve,O)=>{O.d(ve,{$s:()=>Rt,BH:()=>$e,G6:()=>Ve,L:()=>se,LL:()=>ne,Mn:()=>Ee,Sg:()=>Te,UG:()=>he,US:()=>pe,ZB:()=>B,ZR:()=>Ae,b$:()=>We,d:()=>be,eu:()=>V,hl:()=>j,jU:()=>Ie,m9:()=>sr,ne:()=>bi,pd:()=>Es,r3:()=>Hr,ru:()=>He,tV:()=>ce,uI:()=>Le,vZ:()=>Gr,w1:()=>_e,xO:()=>gr,xb:()=>xt,z$:()=>xe,zI:()=>Z,zd:()=>Ii});const ue=function(L){const G=[];let q=0;for(let we=0;we<L.length;we++){let H=L.charCodeAt(we);H<128?G[q++]=H:H<2048?(G[q++]=H>>6|192,G[q++]=63&H|128):55296==(64512&H)&&we+1<L.length&&56320==(64512&L.charCodeAt(we+1))?(H=65536+((1023&H)<<10)+(1023&L.charCodeAt(++we)),G[q++]=H>>18|240,G[q++]=H>>12&63|128,G[q++]=H>>6&63|128,G[q++]=63&H|128):(G[q++]=H>>12|224,G[q++]=H>>6&63|128,G[q++]=63&H|128)}return G},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(L,G){if(!Array.isArray(L))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let H=0;H<L.length;H+=3){const Q=L[H],Me=H+1<L.length,Ze=Me?L[H+1]:0,it=H+2<L.length,yt=it?L[H+2]:0;let xn=(15&Ze)<<2|yt>>6,mr=63&yt;it||(mr=64,Me||(xn=64)),we.push(q[Q>>2],q[(3&Q)<<4|Ze>>4],q[xn],q[mr])}return we.join("")},encodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(L):this.encodeByteArray(ue(L),G)},decodeString(L,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(L):function(L){const G=[];let q=0,we=0;for(;q<L.length;){const H=L[q++];if(H<128)G[we++]=String.fromCharCode(H);else if(H>191&&H<224){const Q=L[q++];G[we++]=String.fromCharCode((31&H)<<6|63&Q)}else if(H>239&&H<365){const it=((7&H)<<18|(63&L[q++])<<12|(63&L[q++])<<6|63&L[q++])-65536;G[we++]=String.fromCharCode(55296+(it>>10)),G[we++]=String.fromCharCode(56320+(1023&it))}else{const Q=L[q++],Me=L[q++];G[we++]=String.fromCharCode((15&H)<<12|(63&Q)<<6|63&Me)}}return G.join("")}(this.decodeStringToByteArray(L,G))},decodeStringToByteArray(L,G){this.init_();const q=G?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let H=0;H<L.length;){const Q=q[L.charAt(H++)],Ze=H<L.length?q[L.charAt(H)]:0;++H;const yt=H<L.length?q[L.charAt(H)]:64;++H;const pt=H<L.length?q[L.charAt(H)]:64;if(++H,null==Q||null==Ze||null==yt||null==pt)throw Error();we.push(Q<<2|Ze>>4),64!==yt&&(we.push(Ze<<4&240|yt>>2),64!==pt&&we.push(yt<<6&192|pt))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let L=0;L<this.ENCODED_VALS.length;L++)this.byteToCharMap_[L]=this.ENCODED_VALS.charAt(L),this.charToByteMap_[this.byteToCharMap_[L]]=L,this.byteToCharMapWebSafe_[L]=this.ENCODED_VALS_WEBSAFE.charAt(L),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[L]]=L,L>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(L)]=L,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(L)]=L)}}},se=function(L){return function(L){const G=ue(L);return pe.encodeByteArray(G,!0)}(L).replace(/\./g,"")},ce=function(L){try{return pe.decodeString(L,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function B(L,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===L&&(L={});break;case Array:L=[];break;default:return G}for(const q in G)!G.hasOwnProperty(q)||!X(q)||(L[q]=B(L[q],G[q]));return L}function X(L){return"__proto__"!==L}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,q)=>{this.resolve=G,this.reject=q})}wrapCallback(G){return(q,we)=>{q?this.reject(q):this.resolve(we),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(q):G(q,we))}}}function Te(L,G){if(L.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=G||"demo-project",H=L.iat||0,Q=L.sub||L.user_id;if(!Q)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:H,exp:H+3600,auth_time:H,sub:Q,user_id:Q,firebase:{sign_in_provider:"custom",identities:{}}},L);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(Me)),""].join(".")}function xe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function he(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(L){return!1}}function Ie(){return"object"==typeof self&&self.self===self}function He(){const L="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof L&&void 0!==L.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function be(){return xe().indexOf("Electron/")>=0}function _e(){const L=xe();return L.indexOf("MSIE ")>=0||L.indexOf("Trident/")>=0}function Ee(){return xe().indexOf("MSAppHost/")>=0}function Ve(){return!he()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){return"object"==typeof indexedDB}function V(){return new Promise((L,G)=>{try{let q=!0;const we="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(we);H.onsuccess=()=>{H.result.close(),q||self.indexedDB.deleteDatabase(we),L(!0)},H.onupgradeneeded=()=>{q=!1},H.onerror=()=>{var Q;G((null===(Q=H.error)||void 0===Q?void 0:Q.message)||"")}}catch(q){G(q)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ae extends Error{constructor(G,q,we){super(q),this.code=G,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ne.prototype.create)}}class ne{constructor(G,q,we){this.service=G,this.serviceName=q,this.errors=we}create(G,...q){const we=q[0]||{},H=`${this.service}/${G}`,Q=this.errors[G],Me=Q?function at(L,G){return L.replace(Dt,(q,we)=>{const H=G[we];return null!=H?String(H):`<${we}?>`})}(Q,we):"Error";return new Ae(H,`${this.serviceName}: ${Me} (${H}).`,we)}}const Dt=/\{\$([^}]+)}/g;function Hr(L,G){return Object.prototype.hasOwnProperty.call(L,G)}function xt(L){for(const G in L)if(Object.prototype.hasOwnProperty.call(L,G))return!1;return!0}function Gr(L,G){if(L===G)return!0;const q=Object.keys(L),we=Object.keys(G);for(const H of q){if(!we.includes(H))return!1;const Q=L[H],Me=G[H];if(nr(Q)&&nr(Me)){if(!Gr(Q,Me))return!1}else if(Q!==Me)return!1}for(const H of we)if(!q.includes(H))return!1;return!0}function nr(L){return null!==L&&"object"==typeof L}function gr(L){const G=[];for(const[q,we]of Object.entries(L))Array.isArray(we)?we.forEach(H=>{G.push(encodeURIComponent(q)+"="+encodeURIComponent(H))}):G.push(encodeURIComponent(q)+"="+encodeURIComponent(we));return G.length?"&"+G.join("&"):""}function Ii(L){const G={};return L.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[H,Q]=we.split("=");G[decodeURIComponent(H)]=decodeURIComponent(Q)}}),G}function Es(L){const G=L.indexOf("?");if(!G)return"";const q=L.indexOf("#",G);return L.substring(G,q>0?q:void 0)}function bi(L,G){const q=new lt(L,G);return q.subscribe.bind(q)}class lt{constructor(G,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{G(this)}).catch(we=>{this.error(we)})}next(G){this.forEachObserver(q=>{q.next(G)})}error(G){this.forEachObserver(q=>{q.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,q,we){let H;if(void 0===G&&void 0===q&&void 0===we)throw new Error("Missing Observer.");H=function fn(L,G){if("object"!=typeof L||null===L)return!1;for(const q of G)if(q in L&&"function"==typeof L[q])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:q,complete:we},void 0===H.next&&(H.next=mn),void 0===H.error&&(H.error=mn),void 0===H.complete&&(H.complete=mn);const Q=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch(Me){}}),this.observers.push(H),Q}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,G)}sendOne(G,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{q(this.observers[G])}catch(we){"undefined"!=typeof console&&console.error&&console.error(we)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mn(){}function Rt(L,G=1e3,q=2){const we=G*Math.pow(q,L),H=Math.round(.5*we*(Math.random()-.5)*2);return Math.min(144e5,we+H)}function sr(L){return L&&L._delegate?L._delegate:L}},2190:(Ke,ve,O)=>{var f=O(5e3);let J=null;function P(){return J}const le=new f.OlP("DocumentToken");let se=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ce(){return(0,f.LFG)(B)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let B=(()=>{class n extends se{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){X()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){X()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function $e(){return new B((0,f.LFG)(le))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Le(n){return n&&"?"!==n[0]?"?"+n:n}let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,f.LFG)(le).location;return new We((0,f.LFG)(se),e&&e.origin||"")}()},providedIn:"root"}),n})();const He=new f.OlP("appBaseHref");let We=(()=>{class n extends he{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Le(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+Le(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(He,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n extends he{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+Le(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(He,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=xe(Ve(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Le(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ve(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Le(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Le,n.joinWithSlash=Te,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(f.LFG(he),f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ee(){return new _e((0,f.LFG)(he),(0,f.LFG)(se))}()},providedIn:"root"}),n})();function Ve(n){return n.replace(/\/index.html$/,"")}class bs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let On=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new bs(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Ks(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Ks(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ks(n,e){n.context.$implicit=e.item}let Dn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Yt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Yt{constructor(){this.$implicit=null,this.ngIf=null}}function pu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Pc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function xo(n){return"server"===n}let cl=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Ro((0,f.LFG)(le),window)}),n})();class Ro{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=dl(this.window.history)||dl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function dl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Js extends class _a extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){J||(J=n)}(new Js)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function va(){return qt=qt||document.querySelector("base"),qt?qt.getAttribute("href"):null}();return null==t?null:function As(n){yu=yu||document.createElement("a"),yu.setAttribute("href",n);const e=yu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ga(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let yu,qt=null;const Kn=new f.OlP("TRANSITION_ID"),un=[{provide:f.ip1,useFactory:function hl(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Kn,le,f.zs3],multi:!0}];class Ri{static init(){(0,f.VLi)(new Ri)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Yn=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Xs=new f.OlP("EventManagerPlugins");let es=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Xs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Ea{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ai=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ni=(()=>{class n extends ai{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(No),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(No))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function No(n){P().remove(n)}const st={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Oo=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?De(n,o,t):(o=o.replace(Oo,n),t.push(o))}return t}function Tt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let sn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Po(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new ba(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new yl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(es),f.LFG(Ni),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Po{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(st[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=st[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=st[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Tt(r)):this.eventManager.addEventListener(e,t,Tt(r))}}class ba extends Po{constructor(e,t,r,o){super(e),this.component=r;const u=De(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function pl(n){return"_ngcontent-%COMP%".replace(Oo,n)}(o+"-"+r.id),this.hostAttr=function gl(n){return"_nghost-%COMP%".replace(Oo,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class yl extends Po{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=De(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Lp=(()=>{class n extends Ea{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const vu=["alt","control","meta","shift"],Eu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_n={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ts={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ca=(()=>{class n extends Ea{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(vu.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function Ss(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&_n.hasOwnProperty(e)&&(e=_n[e]))}return Eu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),vu.forEach(u=>{u!=o&&ts[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(le))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Iu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function ui(){Js.makeCurrent(),Ri.init()},multi:!0},{provide:le,useFactory:function wu(){return(0,f.RDi)(document),document},deps:[]}]),Ta=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function _l(){return new f.qLn},deps:[]},{provide:Xs,useClass:Lp,multi:!0,deps:[le,f.R0b,f.Lbi]},{provide:Xs,useClass:Ca,multi:!0,deps:[le]},{provide:sn,useClass:sn,deps:[es,Ni,f.AFp]},{provide:f.FYo,useExisting:sn},{provide:ai,useExisting:Ni},{provide:Ni,useClass:Ni,deps:[le]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:es,useClass:es,deps:[Xs,f.R0b]},{provide:class Qt{},useClass:Yn,deps:[]}];let Aa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Kn,useExisting:f.AFp},un]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:Ta,imports:[Pc,f.hGG]}),n})();"undefined"!=typeof window&&window;const jp_firebaseConfig={apiKey:"AIzaSyBrNCQ7IpMlJEvW-SmfdE0OtN7bOatpJNc",authDomain:"szucsmate-prf.firebaseapp.com",projectId:"szucsmate-prf",storageBucket:"szucsmate-prf.appspot.com",messagingSenderId:"73413585964",appId:"1:73413585964:web:c3f3b52fbc0b8cf9dd7589",measurementId:"G-MHMQ6Y6CW7"};var gn=O(8996),on=O(8306);const{isArray:Ra}=Array,{getPrototypeOf:Hc,prototype:li,keys:Il}=Object;function bl(n){if(1===n.length){const e=n[0];if(Ra(e))return{args:e,keys:null};if(function ki(n){return n&&"object"==typeof n&&Hc(n)===li}(e)){const t=Il(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Uo=O(8421),zt=O(7669),Pn=O(5403),wt=O(4004);const{isArray:Gc}=Array;function Dl(n){return(0,wt.U)(e=>function Tu(n,e){return Gc(e)?n(...e):n(e)}(n,e))}function qc(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Ms=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Qr=(()=>{class n extends Ms{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const ur=new f.OlP("NgValueAccessor"),Wc={provide:ur,useExisting:(0,f.Gpc)(()=>ci),multi:!0},Bo=new f.OlP("CompositionEventMode");let ci=(()=>{class n extends Ms{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Na(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Bo,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([Wc]),f.qOj]}),n})();function Fi(n){return null==n||0===n.length}function Rs(n){return null!=n&&"number"==typeof n.length}const Cn=new f.OlP("NgValidators"),Li=new f.OlP("NgAsyncValidators"),Oa=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Or{static min(e){return function Ns(n){return e=>{if(Fi(e.value)||Fi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Pa(n){return e=>{if(Fi(e.value)||Fi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function ro(n){return Fi(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function ka(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function jo(n){return Fi(n.value)||Oa.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function $o(n){return e=>Fi(e.value)||!Rs(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Os(n){return e=>Rs(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Vi(n){if(!n)return rs;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Fi(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return bh(e)}static composeAsync(e){return $p(e)}}function rs(n){return null}function Fa(n){return null!=n}function Ho(n){const e=(0,f.QGY)(n)?(0,gn.D)(n):n;return(0,f.CqO)(e),e}function io(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ih(n,e){return e.map(t=>t(n))}function an(n){return n.map(e=>function Cl(n){return!n.validate}(e)?e:t=>e.validate(t))}function bh(n){if(!n)return null;const e=n.filter(Fa);return 0==e.length?null:function(t){return io(Ih(t,e))}}function Dh(n){return null!=n?bh(an(n)):null}function $p(n){if(!n)return null;const e=n.filter(Fa);return 0==e.length?null:function(t){return function zc(...n){const e=(0,zt.jO)(n),{args:t,keys:r}=bl(n),o=new on.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let R=0;R<d;R++){let N=!1;(0,Uo.Xf)(t[R]).subscribe((0,Pn.x)(u,W=>{N||(N=!0,C--),m[R]=W},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?qc(r,m):m),u.complete())}))}});return e?o.pipe(Dl(e)):o}(Ih(t,e).map(Ho)).pipe((0,wt.U)(io))}}function Zc(n){return null!=n?$p(an(n)):null}function Kc(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Tl(n){return n._rawValidators}function Ch(n){return n._rawAsyncValidators}function so(n){return n?Array.isArray(n)?n:[n]:[]}function Al(n,e){return Array.isArray(n)?n.includes(e):n===e}function ln(n,e){const t=so(e);return so(n).forEach(o=>{Al(t,o)||t.push(o)}),t}function Au(n,e){return so(e).filter(t=>!Al(n,t))}class Ps{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Zc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Go extends Ps{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $n extends Ps{get formDirective(){return null}get path(){return null}}class Pr{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Ui=(()=>{class n extends Pr{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Go,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),hi=(()=>{class n extends Pr{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36($n,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function kr(n,e){ao(n,e),e.valueAccessor.writeValue(n.value),function Jc(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&D(n,e)})}(n,e),function M(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function b(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&D(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function zo(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ji(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),os(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Qc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ao(n,e){const t=Tl(n);null!==e.validator?n.setValidators(Kc(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ch(n);null!==e.asyncValidator?n.setAsyncValidators(Kc(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Qc(e._rawValidators,o),Qc(e._rawAsyncValidators,o)}function os(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=Tl(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=Ch(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>d!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Qc(e._rawValidators,r),Qc(e._rawAsyncValidators,r),t}function D(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Tn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const lr="VALID",Jr="INVALID",Hn="PENDING",Wo="DISABLED";function Mu(n){return(Ru(n)?n.validators:n)||null}function xu(n){return Array.isArray(n)?Dh(n):n||null}function Xc(n,e){return(Ru(e)?e.asyncValidators:n)||null}function Mh(n){return Array.isArray(n)?Zc(n):n||null}function Ru(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Ua=n=>n instanceof $i,Ba=n=>n instanceof Ls;function xh(n){return Ua(n)?n.value:n.getRawValue()}function Rh(n,e){const t=Ba(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function Hp(n,e){Ba(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class Nh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=xu(this._rawValidators),this._composedAsyncValidatorFn=Mh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===lr}get invalid(){return this.status===Jr}get pending(){return this.status==Hn}get disabled(){return this.status===Wo}get enabled(){return this.status!==Wo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=xu(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Mh(e)}addValidators(e){this.setValidators(ln(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ln(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Au(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Au(e,this._rawAsyncValidators))}hasValidator(e){return Al(this._rawValidators,e)}hasAsyncValidator(e){return Al(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hn,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wo,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lr,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lr||this.status===Hn)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wo:lr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hn,this._hasOwnPendingAsyncValidator=!0;const t=Ho(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Sh(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Ba(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof iy)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?Wo:this.errors?Jr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hn)?Hn:this._anyControlsHaveStatus(Jr)?Jr:lr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ru(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class $i extends Nh{constructor(e=null,t,r){super(Mu(t),Xc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ru(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Tn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Tn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Ls extends Nh{constructor(e,t,r){super(Mu(t),Xc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Hp(this,e),Object.keys(e).forEach(r=>{Rh(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=xh(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class iy extends Nh{constructor(e,t,r){super(Mu(t),Xc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Hp(this,e),e.forEach((r,o)=>{Rh(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>xh(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Nu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const sy={provide:ur,useExisting:(0,f.Gpc)(()=>nd),multi:!0};let nd=(()=>{class n extends Qr{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([sy]),f.qOj]}),n})(),Ko=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const Kp=new f.OlP("NgModelWithFormControlWarning"),Qp={provide:$n,useExisting:(0,f.Gpc)(()=>Yo)};let Yo=(()=>{class n extends $n{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(os(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return kr(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ji(t.control||null,t,!1),Tn(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function gt(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(ji(r||null,t),Ua(o)&&(kr(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function F(n,e){ao(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function K(n,e){return os(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ao(this.form,this),this._oldForm&&os(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cn,10),f.Y36(Li,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Qp]),f.qOj,f.TTD]}),n})();const Xp={provide:Go,useExisting:(0,f.Gpc)(()=>Fr)};let Fr=(()=>{class n extends Go{constructor(t,r,o,u,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Jn(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===ci?t=u:function Ot(n){return Object.getPrototypeOf(n.constructor)===Qr}(u)?r=u:o=u}),o||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function dt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function oo(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36($n,13),f.Y36(Cn,10),f.Y36(Li,10),f.Y36(ur,10),f.Y36(Kp,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([Xp]),f.qOj,f.TTD]}),n})(),Ol=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Ko]]}),n})(),Wh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kp,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Ol]}),n})();function ut(...n){const e=(0,zt.yG)(n);return(0,gn.D)(n,e)}var us=O(7579);class ls extends us.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var qa=O(4671),lg=O(9672);function Zh(n,e,t){n?(0,lg.f)(t,n,e):e()}var ad=O(576);function Pu(n,e){const t=(0,ad.m)(n)?n:()=>n,r=o=>o.error(t());return new on.y(e?o=>e.schedule(r,0,o):r)}const ku=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Pl=O(8189);function Hi(...n){return function gy(){return(0,Pl.J)(1)}()((0,gn.D)(n,(0,zt.yG)(n)))}function Yh(n){return new on.y(e=>{(0,Uo.Xf)(n()).subscribe(e)})}var Fu=O(515),kl=O(727),mi=O(4482);function Qh(){return(0,mi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ei extends on.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,mi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kl.w0.EMPTY)}return e}refCount(){return Qh()(this)}}function dr(n,e){return(0,mi.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,Pn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const R=u++;(0,Uo.Xf)(n(w,R)).subscribe(o=(0,Pn.x)(r,N=>r.next(e?e(w,N,R,C++):N),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var Fl=O(5698);function Ll(...n){const e=(0,zt.yG)(n);return(0,mi.e)((t,r)=>{(e?Hi(n,t,e):Hi(n,t)).subscribe(r)})}function uo(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,Pn.x)(d,R=>{const N=C++;w=m?n(w,R,N):(m=!0,R),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function lo(n,e){return(0,mi.e)(uo(n,e,arguments.length>=2,!0))}function Vs(n,e){return(0,mi.e)((t,r)=>{let o=0;t.subscribe((0,Pn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}function co(n){return(0,mi.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Pn.x)(t,void 0,void 0,d=>{u=(0,Uo.Xf)(n(d,co(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var Er=O(5577);function za(n,e){return(0,ad.m)(e)?(0,Er.z)(n,e,1):(0,Er.z)(n,1)}function Jh(n){return n<=0?()=>Fu.E:(0,mi.e)((e,t)=>{let r=[];e.subscribe((0,Pn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function cg(n=Lu){return(0,mi.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Lu(){return new ku}function cs(n){return(0,mi.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function h(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vs((o,u)=>n(o,u,r)):qa.y,(0,Fl.q)(1),t?cs(e):cg(()=>new ku))}var p=O(8505);class T{constructor(e,t){this.id=e,this.url=t}}class x extends T{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class z extends T{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fe extends T{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pe extends T{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ze extends T{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ct extends T{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rt extends T{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class An extends T{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yi extends T{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vu{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dg{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Jo{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ud{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xh{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ef{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vl{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const At="primary";class tf{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wa(n){return new tf(n)}const hg="ngNavigationCancelingError";function Ul(n){const e=Error("NavigationCancelingError: "+n);return e[hg]=!0,e}function A0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ho(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!fg(n[o],e[o]))return!1;return!0}function fg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function S0(n){return Array.prototype.concat.apply([],n)}function M0(n){return n.length>0?n[n.length-1]:null}function wr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ti(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,gn.D)(Promise.resolve(n)):ut(n)}const R0={exact:function _y(n,e,t){if(!Uu(n.segments,e.segments)||!rf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!_y(n.children[r],e.children[r],t))return!1;return!0},subset:vy},N0={exact:function lb(n,e){return ho(n,e)},subset:function O0(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fg(n[t],e[t]))},ignored:()=>!0};function nf(n,e,t){return R0[t.paths](n.root,e.root,t.matrixParams)&&N0[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vy(n,e,t){return pg(n,e,e.segments,t)}function pg(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Uu(o,t)||e.hasChildren()||!rf(o,t,r))}if(n.segments.length===t.length){if(!Uu(n.segments,t)||!rf(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!vy(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Uu(n.segments,o)&&rf(n.segments,o,r)&&n.children[At])&&pg(n.children[At],e,u,r)}}function rf(n,e,t){return e.every((r,o)=>N0[t](n[o].parameters,r.parameters))}class Xo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wa(this.queryParams)),this._queryParamMap}toString(){return k0.serialize(this)}}class Nt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gg(this)}}class ld{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wa(this.parameters)),this._parameterMap}toString(){return by(this)}}function Uu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class cd{}class P0{parse(e){const t=new gb(e);return new Xo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${sf(e.root,!0)}`,r=function db(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${dd(t)}=${dd(o)}`).join("&"):`${dd(t)}=${dd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function F0(n){return encodeURI(n)}(e.fragment)}`:""}`}}const k0=new P0;function gg(n){return n.segments.map(e=>by(e)).join("/")}function sf(n,e){if(!n.hasChildren())return gg(n);if(e){const t=n.children[At]?sf(n.children[At],!1):"",r=[];return wr(n.children,(o,u)=>{u!==At&&r.push(`${u}:${sf(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function wy(n,e){let t=[];return wr(n.children,(r,o)=>{o===At&&(t=t.concat(e(r,o)))}),wr(n.children,(r,o)=>{o!==At&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===At?[sf(n.children[At],!1)]:[`${o}:${sf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${gg(n)}/${t[0]}`:`${gg(n)}/(${t.join("//")})`}}function Iy(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function dd(n){return Iy(n).replace(/%3B/gi,";")}function L0(n){return Iy(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function of(n){return decodeURIComponent(n)}function V0(n){return of(n.replace(/\+/g,"%20"))}function by(n){return`${L0(n.path)}${function cb(n){return Object.keys(n).map(e=>`;${L0(e)}=${L0(n[e])}`).join("")}(n.parameters)}`}const fo=/^[^\/()?;=#]+/;function mg(n){const e=n.match(fo);return e?e[0]:""}const U0=/^[^=?&#]+/,fb=/^[^&#]+/;class gb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Nt([],{}):new Nt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[At]=new Nt(e,t)),r}parseSegment(){const e=mg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ld(of(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=mg(this.remaining);o&&(r=o,this.capture(r))}e[of(t)]=of(r)}parseQueryParam(e){const t=function hb(n){const e=n.match(U0);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function pb(n){const e=n.match(fb);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=V0(t),u=V0(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mg(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=At);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[At]:new Nt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Dy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Cy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Cy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ty(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ty(e,this._root).map(t=>t.value)}}function Cy(n,e){if(n===e.value)return e;for(const t of e.children){const r=Cy(n,t);if(r)return r}return null}function Ty(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ty(n,t);if(r.length)return r.unshift(e),r}return[]}class Za{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Et(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ay extends Dy{constructor(e,t){super(e),this.snapshot=t,po(this,e)}toString(){return this.snapshot.toString()}}function Sy(n,e){const t=function B0(n,e){const d=new yg([],{},{},"",{},At,e,null,n.root,-1,{});return new _g("",new Za(d,[]))}(n,e),r=new ls([new ld("",{})]),o=new ls({}),u=new ls({}),d=new ls({}),m=new ls(""),w=new Ka(r,o,d,m,u,At,e,t.root);return w.snapshot=t.root,new Ay(new Za(w,[]),t)}class Ka{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>Wa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>Wa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Us(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function j0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yg{constructor(e,t,r,o,u,d,m,w,C,R,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=R,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _g extends Dy{constructor(e,t){super(t),this.url=e,po(this,t)}toString(){return vg(this._root)}}function po(n,e){e.value._routerState=n,e.children.forEach(t=>po(n,t))}function vg(n){const e=n.children.length>0?` { ${n.children.map(vg).join(", ")} } `:"";return`${n.value}${e}`}function Eg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ho(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ho(e.params,t.params)||n.params.next(t.params),function yy(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ho(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ho(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function af(n,e){const t=ho(n.params,e.params)&&function Ey(n,e){return Uu(n,e)&&n.every((t,r)=>ho(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||af(n.parent,e.parent))}function hd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function WT(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return hd(n,r,o);return hd(n,r)})}(n,e,t);return new Za(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>hd(n,m)),d}}const r=function wg(n){return new Ka(new ls(n.url),new ls(n.params),new ls(n.queryParams),new ls(n.fragment),new ls(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>hd(n,u));return new Za(r,o)}}function fd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bl(n){return"object"==typeof n&&null!=n&&n.outlets}function uf(n,e,t,r,o){let u={};if(r&&wr(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Xo(t,u,o);const d=mb(n,e,t);return new Xo(d,u,o)}function mb(n,e,t){const r={};return wr(n.children,(o,u)=>{r[u]=o===e?t:mb(o,e,t)}),new Nt(n.segments,r)}class $0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fd(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Bl);if(o&&o!==M0(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class My{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function G0(n,e,t){if(n||(n=new Nt([],{})),0===n.segments.length&&n.hasChildren())return xy(n,e,t);const r=function q0(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Bl(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!Eb(w,C,d))return u;r+=2}else{if(!Eb(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Nt(n.segments.slice(0,r.pathIndex),{});return u.children[At]=new Nt(n.segments.slice(r.pathIndex),n.children),xy(u,0,o)}return r.match&&0===o.length?new Nt(n.segments,{}):r.match&&!n.hasChildren()?bg(n,e,t):r.match?xy(n,0,o):bg(n,e,t)}function xy(n,e,t){if(0===t.length)return new Nt(n.segments,{});{const r=function ZT(n){return Bl(n[0])?n[0].outlets:{[At]:n}}(t),o={};return wr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=G0(n.children[d],e,u))}),wr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Nt(n.segments,o)}}function bg(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Bl(u)){const w=vb(u.outlets);return new Nt(r,w)}if(0===o&&fd(t[0])){r.push(new ld(n.segments[e].path,Dg(t[0]))),o++;continue}const d=Bl(u)?u.outlets[At]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&fd(m)?(r.push(new ld(d,Dg(m))),o+=2):(r.push(new ld(d,{})),o++)}return new Nt(r,{})}function vb(n){const e={};return wr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=bg(new Nt([],{}),0,t))}),e}function Dg(n){const e={};return wr(n,(t,r)=>e[r]=`${t}`),e}function Eb(n,e,t){return n==t.path&&ho(e,t.parameters)}class YT{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Eg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Et(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),wr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Et(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Et(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Et(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new ef(u.value.snapshot))}),e.children.length&&this.forwardEvent(new ud(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Eg(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Eg(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function QT(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class z0{constructor(e,t){this.routes=e,this.module=t}}function jl(n){return"function"==typeof n}function pd(n){return n instanceof Xo}const lf=Symbol("INITIAL_VALUE");function gd(){return dr(n=>function gi(...n){const e=(0,zt.yG)(n),t=(0,zt.jO)(n),{args:r,keys:o}=bl(n);if(0===r.length)return(0,gn.D)([],e);const u=new on.y(function Ou(n,e,t=qa.y){return r=>{Zh(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Zh(e,()=>{const C=(0,gn.D)(n[w],e);let R=!1;C.subscribe((0,Pn.x)(r,N=>{u[w]=N,R||(R=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>qc(o,d):qa.y));return t?u.pipe(Dl(t)):u}(n.map(e=>e.pipe((0,Fl.q)(1),Ll(lf)))).pipe(lo((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==lf?o:(u===lf&&(r=!0),r||!1!==u&&d!==t.length-1&&!pd(u)?o:u),e)},lf),Vs(e=>e!==lf),(0,wt.U)(e=>pd(e)?e:!0===e),(0,Fl.q)(1)))}class Ny{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new md,this.attachRef=null}}class md{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ny,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let cf=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||At,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new wb(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(md),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class wb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ka?this.route:e===md?this.childContexts:this.parent.get(e,t)}}let Ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[cf],encapsulation:2}),n})();function Oy(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Ib(r,Py(e,r))}}function Ib(n,e){n.children&&Oy(n.children,e)}function Py(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ky(n){const e=n.children&&n.children.map(ky),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==At&&(t.component=Ya),t}function ds(n){return n.outlet||At}function W0(n,e){const t=n.filter(r=>ds(r)===e);return t.push(...n.filter(r=>ds(r)!==e)),t}const Z0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ju(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Z0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||A0)(t,n,e);if(!u)return Object.assign({},Z0);const d={};wr(u.posParams,(w,C)=>{d[C]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Qa(n,e,t,r,o="corrected"){if(t.length>0&&function df(n,e,t){return t.some(r=>Cg(n,e,r)&&ds(r)!==At)}(n,t,r)){const d=new Nt(e,function yd(n,e,t,r){const o={};o[At]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ds(u)!==At){const d=new Nt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[ds(u)]=d}return o}(n,e,r,new Nt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function _d(n,e,t){return t.some(r=>Cg(n,e,r))}(n,t,r)){const d=new Nt(n.segments,function Fy(n,e,t,r,o,u){const d={};for(const m of r)if(Cg(n,t,m)&&!o[ds(m)]){const w=new Nt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[ds(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Nt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Cg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ly(n,e,t,r){return!!(ds(n)===r||r!==At&&Cg(e,t,n))&&("**"===n.path||ju(e,n,t).matched)}function Vy(n,e,t){return 0===e.length&&!n.children[t]}class vd{constructor(e){this.segmentGroup=e||null}}class Tg{constructor(e){this.urlTree=e}}function Ed(n){return Pu(new vd(n))}function hf(n){return Pu(new Tg(n))}class Y0{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Qa(this.urlTree.root,[],[],this.config).segmentGroup,t=new Nt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,At).pipe((0,wt.U)(u=>this.createUrlTree(Uy(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(co(u=>{if(u instanceof Tg)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof vd?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,At).pipe((0,wt.U)(o=>this.createUrlTree(Uy(o),e.queryParams,e.fragment))).pipe(co(o=>{throw o instanceof vd?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Nt([],{[At]:e}):e;return new Xo(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(u=>new Nt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,gn.D)(o).pipe(za(u=>{const d=r.children[u],m=W0(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,wt.U)(w=>({segment:w,outlet:u})))}),lo((u,d)=>(u[d.outlet]=d.segment,u),{}),function y(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vs((o,u)=>n(o,u,r)):qa.y,Jh(1),t?cs(e):cg(()=>new ku))}())}expandSegment(e,t,r,o,u,d){return(0,gn.D)(r).pipe(za(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(co(C=>{if(C instanceof vd)return ut(null);throw C}))),h(m=>!!m),co((m,w)=>{if(m instanceof ku||"EmptyError"===m.name)return Vy(t,o,u)?ut(new Nt([],{})):Ed(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Ly(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Ed(t):Ed(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?hf(u):this.lineralizeSegments(r,u).pipe((0,Er.z)(d=>{const m=new Nt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:R}=ju(t,o,u);if(!m)return Ed(t);const N=this.applyRedirectCommands(w,o.redirectTo,R);return o.redirectTo.startsWith("/")?hf(N):this.lineralizeSegments(o,N).pipe((0,Er.z)(W=>this.expandSegment(e,t,r,W.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ut(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,wt.U)(N=>(r._loadedConfig=N,new Nt(o,{})))):ut(new Nt(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=ju(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,Er.z)(R=>{const N=R.module,W=R.routes,{segmentGroup:ee,slicedSegments:ge}=Qa(t,m,w,W),ke=new Nt(ee.segments,ee.children);if(0===ge.length&&ke.hasChildren())return this.expandChildren(N,W,ke).pipe((0,wt.U)(Bt=>new Nt(m,Bt)));if(0===W.length&&0===ge.length)return ut(new Nt(m,{}));const et=ds(r)===u;return this.expandSegment(N,ke,W,ge,et?At:u,!0).pipe((0,wt.U)(Vt=>new Nt(m.concat(Vt.segments),Vt.children)))})):Ed(t)}getChildConfig(e,t,r){return t.children?ut(new z0(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ut(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Er.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,wt.U)(u=>(t._loadedConfig=u,u))):function K0(n){return Pu(Ul(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ut(new z0([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?ut(o.map(d=>{const m=e.get(d);let w;if(function XT(n){return n&&jl(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!jl(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return ti(w)})).pipe(gd(),(0,p.b)(d=>{if(!pd(d))return;const m=Ul(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,wt.U)(d=>!0===d)):ut(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ut(r);if(o.numberOfChildren>1||!o.children[At])return Pu(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[At]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Xo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return wr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Nt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Uy(n){const e={};for(const r of Object.keys(n.children)){const u=Uy(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Q0(n){if(1===n.numberOfChildren&&n.children[At]){const e=n.children[At];return new Nt(n.segments.concat(e.segments),e.children)}return n}(new Nt(n.segments,e))}class X0{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ag{constructor(e,t){this.component=e,this.route=t}}function hs(n,e,t){const r=n._root;return Mg(r,e?e._root:null,t,[r.value])}function Sg(n,e,t){const r=function nA(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Mg(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Et(e);return n.children.forEach(d=>{(function eE(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function rA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Uu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Uu(n.url,e.url)||!ho(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!af(n,e)||!ho(n.queryParams,e.queryParams);default:return!af(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new X0(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Mg(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ag(m.outlet.component,d))}else d&&ff(e,m,o),o.canActivateChecks.push(new X0(r)),Mg(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),wr(u,(d,m)=>ff(d,t.getContext(m),o)),o}function ff(n,e,t){const r=Et(n),o=n.value;wr(r,(u,d)=>{ff(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Ag(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Mb{}function iE(n){return new on.y(e=>e.error(n))}class oE{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=Qa(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,At);if(null===t)return null;const r=new yg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Za(r,t),u=new _g(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Us(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=W0(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=aE(r);return function xb(n){n.sort((e,t)=>e.value.outlet===At?-1:t.value.outlet===At?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Vy(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Ly(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const ee=r.length>0?M0(r).parameters:{};u=new yg(r,ee,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uE(e),ds(e),e.component,e,Rb(t),$y(t)+r.length,lE(e))}else{const ee=ju(t,e,r);if(!ee.matched)return null;d=ee.consumedSegments,m=ee.remainingSegments,u=new yg(d,ee.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,uE(e),ds(e),e.component,e,Rb(t),$y(t)+d.length,lE(e))}const w=function ea(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:R}=Qa(t,d,m,w.filter(ee=>void 0===ee.redirectTo),this.relativeLinkResolution);if(0===R.length&&C.hasChildren()){const ee=this.processChildren(w,C);return null===ee?null:[new Za(u,ee)]}if(0===w.length&&0===R.length)return[new Za(u,[])];const N=ds(e)===o,W=this.processSegment(w,C,R,N?At:o);return null===W?null:[new Za(u,W)]}}function jy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function aE(n){const e=[],t=new Set;for(const r of n){if(!jy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=aE(r.children);e.push(new Za(r.value,o))}return e.filter(r=>!t.has(r))}function Rb(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function $y(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function uE(n){return n.data||{}}function lE(n){return n.resolve||{}}function pf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qy(n){return dr(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,wt.U)(()=>e)):ut(e)})}class cE extends class Wy{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Zy=new f.OlP("ROUTES");class dE{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,wt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new z0(S0(d.injector.get(Zy,void 0,f.XFs.Self|f.XFs.Optional)).map(ky),d)}),co(u=>{throw t._loader$=void 0,u}));return t._loader$=new ei(o,()=>new us.x).pipe(Qh()),t._loader$}loadModuleFactory(e){return ti(e()).pipe((0,Er.z)(t=>t instanceof f.YKP?ut(t):(0,gn.D)(this.compiler.compileModuleAsync(t))))}}class sA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function kb(n){throw n}function hE(n,e,t){return e.parse("/")}function Yy(n,e){return ut(null)}const fE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kn=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new us.x,this.errorHandler=kb,this.malformedUriErrorHandler=hE,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Yy,afterPreactivation:Yy},this.urlHandlingStrategy=new sA,this.routeReuseStrategy=new cE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const N=d.get(f.R0b);this.isNgZoneEnabled=N instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function x0(){return new Xo(new Nt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new dE(d,m,W=>this.triggerEvent(new Vu(W)),W=>this.triggerEvent(new dg(W))),this.routerState=Sy(this.currentUrlTree,this.rootComponentType),this.transitions=new ls({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Vs(o=>0!==o.id),(0,wt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),dr(o=>{let u=!1,d=!1;return ut(o).pipe((0,p.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),dr(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return gf(m.source)&&(this.browserUrlTree=m.extractedUrl),ut(m).pipe(dr(N=>{const W=this.transitions.getValue();return r.next(new x(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),W!==this.transitions.getValue()?Fu.E:Promise.resolve(N)}),function J0(n,e,t,r){return dr(o=>function tA(n,e,t,r,o){return new Y0(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,wt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,p.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function Nb(n,e,t,r,o){return(0,Er.z)(u=>function sE(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new oE(n,e,t,r,o,u).recognize();return null===d?iE(new Mb):ut(d)}catch(d){return iE(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,wt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,p.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const ee=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(ee,N)}this.browserUrlTree=N.urlAfterRedirects}const W=new ze(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(W)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:W,extractedUrl:ee,source:ge,restoredState:ke,extras:et}=m,Lt=new x(W,this.serializeUrl(ee),ge,ke);r.next(Lt);const Vt=Sy(ee,this.rootComponentType).snapshot;return ut(Object.assign(Object.assign({},m),{targetSnapshot:Vt,urlAfterRedirects:ee,extras:Object.assign(Object.assign({},et),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Fu.E}),qy(m=>{const{targetSnapshot:w,id:C,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:W,replaceUrl:ee}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!W,replaceUrl:!!ee})}),(0,p.b)(m=>{const w=new ct(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,wt.U)(m=>Object.assign(Object.assign({},m),{guards:hs(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function By(n,e){return(0,Er.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ut(Object.assign(Object.assign({},t),{guardsResult:!0})):function tE(n,e,t,r){return(0,gn.D)(n).pipe((0,Er.z)(o=>function rE(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ut(u.map(m=>{const w=Sg(m,e,o);let C;if(function Ry(n){return n&&jl(n.canDeactivate)}(w))C=ti(w.canDeactivate(n,e,t,r));else{if(!jl(w))throw new Error("Invalid CanDeactivate guard");C=ti(w(n,e,t,r))}return C.pipe(h())})).pipe(gd()):ut(!0)}(o.component,o.route,t,e,r)),h(o=>!0!==o,!0))}(d,r,o,n).pipe((0,Er.z)(m=>m&&function JT(n){return"boolean"==typeof n}(m)?function Cb(n,e,t,r){return(0,gn.D)(e).pipe(za(o=>Hi(function Ab(n,e){return null!==n&&e&&e(new Jo(n)),ut(!0)}(o.route.parent,r),function Tb(n,e){return null!==n&&e&&e(new Xh(n)),ut(!0)}(o.route,r),function Sb(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Db(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Yh(()=>ut(d.guards.map(w=>{const C=Sg(w,d.node,t);let R;if(function Bu(n){return n&&jl(n.canActivateChild)}(C))R=ti(C.canActivateChild(r,n));else{if(!jl(C))throw new Error("Invalid CanActivateChild guard");R=ti(C(r,n))}return R.pipe(h())})).pipe(gd())));return ut(u).pipe(gd())}(n,o.path,t),function nE(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const o=r.map(u=>Yh(()=>{const d=Sg(u,e,t);let m;if(function eA(n){return n&&jl(n.canActivate)}(d))m=ti(d.canActivate(e,n));else{if(!jl(d))throw new Error("Invalid CanActivate guard");m=ti(d(e,n))}return m.pipe(h())}));return ut(o).pipe(gd())}(n,o.route,t))),h(o=>!0!==o,!0))}(r,u,n,e):ut(m)),(0,wt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,p.b)(m=>{if(pd(m.guardsResult)){const C=Ul(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new rt(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Vs(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),qy(m=>{if(m.guards.canActivateChecks.length)return ut(m).pipe((0,p.b)(w=>{const C=new An(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),dr(w=>{let C=!1;return ut(w).pipe(function Hy(n,e){return(0,Er.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ut(t);let u=0;return(0,gn.D)(o).pipe(za(d=>function Ob(n,e,t,r){return function Pb(n,e,t,r){const o=pf(n);if(0===o.length)return ut({});const u={};return(0,gn.D)(o).pipe((0,Er.z)(d=>function Gy(n,e,t,r){const o=Sg(n,e,r);return ti(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,p.b)(m=>{u[d]=m}))),Jh(1),(0,Er.z)(()=>pf(u).length===o.length?ut(u):Fu.E))}(n._resolve,n,e,r).pipe((0,wt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Us(n,t).resolve),null)))}(d.route,r,n,e)),(0,p.b)(()=>u++),Jh(1),(0,Er.z)(d=>u===o.length?ut(t):Fu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,p.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,p.b)(w=>{const C=new yi(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),qy(m=>{const{targetSnapshot:w,id:C,extractedUrl:R,rawUrl:N,extras:{skipLocationChange:W,replaceUrl:ee}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:R,rawUrlTree:N,skipLocationChange:!!W,replaceUrl:!!ee})}),(0,wt.U)(m=>{const w=function zT(n,e,t){const r=hd(n,e._root,t?t._root:void 0);return new Ay(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,p.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new YT(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,p.b)({next(){u=!0},complete(){u=!0}}),function v(n){return(0,mi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),co(m=>{if(d=!0,function my(n){return n&&n[hg]}(m)){const w=pd(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new fe(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gf(o.source)};this.scheduleNavigation(R,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new Pe(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Fu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Oy(t),this.config=t.map(ky),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,R=w?this.currentUrlTree.fragment:d;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function Ig(n,e,t,r,o){if(0===t.length)return uf(e.root,e.root,e.root,r,o);const u=function yb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new $0(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return wr(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new $0(t,e,r)}(t);if(u.toRoot())return uf(e.root,e.root,new Nt([],{}),r,o);const d=function _b(n,e,t){if(n.isAbsolute)return new My(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new My(u,u===e.root,0)}const r=fd(n.commands[0])?0:1;return function H0(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new My(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?xy(d.segmentGroup,d.index,u.commands):G0(d.segmentGroup,d.index,u.commands);return uf(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=R?R:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=pd(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Ja(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},fE):!1===r?Object.assign({},pE):r,pd(t))return nf(this.currentUrlTree,t,o);const u=this.parseUrl(t);return nf(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new z(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,R,N;d?(C=d.resolve,R=d.reject,N=d.promise):N=new Promise((ge,ke)=>{C=ge,R=ke});const W=++this.navigationId;let ee;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ee=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):ee=0,this.setTransition({id:W,targetPageId:ee,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:R,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ge=>Promise.reject(ge))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new fe(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function gf(n){return"imperative"!==n}let Xa=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new us.x,this.subscription=t.events.subscribe(u=>{u instanceof z&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:mf(this.skipLocationChange),replaceUrl:mf(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:mf(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(kn),f.Y36(Ka),f.Y36(he))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function mf(n){return""===n||!!n}class xg{}class mE{preload(e,t){return ut(null)}}let Rg=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new dE(o,r,w=>t.triggerEvent(new Vu(w)),w=>t.triggerEvent(new dg(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Vs(t=>t instanceof z),za(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,gn.D)(o).pipe((0,Pl.J)(),(0,wt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ut(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Er.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(kn),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(xg))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ng=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof x?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof z&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vl&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Vl(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const $u=new f.OlP("ROUTER_CONFIGURATION"),yE=new f.OlP("ROUTER_FORROOT_GUARD"),Xy=[_e,{provide:cd,useClass:P0},{provide:kn,useFactory:function Vb(n,e,t,r,o,u,d={},m,w){const C=new kn(null,n,e,t,r,o,S0(u));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function Id(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(R=>{var N,W;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${R.constructor.name}`),console.log(R.toString()),console.log(R),null===(W=console.groupEnd)||void 0===W||W.call(console)}),C},deps:[cd,md,_e,f.zs3,f.Sil,Zy,$u,[class Ky{},new f.FiY],[class zy{},new f.FiY]]},md,{provide:Ka,useFactory:function Ub(n){return n.routerState.root},deps:[kn]},Rg,mE,class yf{preload(e,t){return t().pipe(co(()=>ut(null)))}},{provide:$u,useValue:{enableTracing:!1}}];function Lb(){return new f.PXZ("Router",kn)}let _E=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Xy,wE(t),{provide:yE,useFactory:EE,deps:[[kn,new f.FiY,new f.tp0]]},{provide:$u,useValue:r||{}},{provide:he,useFactory:wd,deps:[se,[new f.tBr(He),new f.FiY],$u]},{provide:Ng,useFactory:vE,deps:[kn,cl,$u]},{provide:xg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:mE},{provide:f.PXZ,multi:!0,useFactory:Lb},[e_,{provide:f.ip1,multi:!0,useFactory:Bb,deps:[e_]},{provide:Bs,useFactory:jb,deps:[e_]},{provide:f.tb,multi:!0,useExisting:Bs}]]}}static forChild(t){return{ngModule:n,providers:[wE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(yE,8),f.LFG(kn,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function vE(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ng(n,e,t)}function wd(n,e,t={}){return t.useHash?new be(n,e):new We(n,e)}function EE(n){return"guarded"}function wE(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Zy,multi:!0,useValue:n}]}let e_=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new us.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(kn),d=this.injector.get($u);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?ut(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get($u),o=this.injector.get(Rg),u=this.injector.get(Ng),d=this.injector.get(kn),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Bb(n){return n.appInitializer.bind(n)}function jb(n){return n.bootstrapListener.bind(n)}const Bs=new f.OlP("Router Initializer");var me=O(5861);class n_{constructor(e,t,r){this.name=e,this.price=t,this.image=r}}var IE=O(4986),ni=O(5813);function r_(){return(0,mi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Gb(n,e){return n===e}var Ye,js=O(2011),bE=(O(7139),O(3942)),$l=O(9681),Og=O(4859),Hl=O(1877),Pt=O(2090),i_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},eu={},Pg=Pg||{},Ct=i_||self;function Gi(){}function DE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fg="closure_uid_"+(1e9*Math.random()>>>0),TE=0;function qb(n,e,t){return n.call.apply(n.bind,arguments)}function oA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Ir(n,e,t){return(Ir=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?qb:oA).apply(null,arguments)}function bd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Lr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function ta(){this.s=this.s,this.o=this.o}var Wb={};ta.prototype.s=!1,ta.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function CE(n){return Object.prototype.hasOwnProperty.call(n,Fg)&&n[Fg]||(n[Fg]=++TE)}(this);delete Wb[n]}},ta.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const AE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},SE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function ME(n){return Array.prototype.concat.apply([],arguments)}function Dd(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function tu(n){return/^[\s\xa0]*$/.test(n)}var _i,xE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function hr(n,e){return-1!=n.indexOf(e)}function s_(n,e){return n<e?-1:n>e?1:0}e:{var Lg=Ct.navigator;if(Lg){var go=Lg.userAgent;if(go){_i=go;break e}}_i=""}function Gl(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vr(n){const e={};for(const t in n)e[t]=n[t];return e}var Hu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _f(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Hu.length;u++)t=Hu[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function qi(n){return qi[" "](n),n}qi[" "]=Gi;var nu,n,Cd=hr(_i,"Opera"),mo=hr(_i,"Trident")||hr(_i,"MSIE"),ql=hr(_i,"Edge"),Gu=ql||mo,zl=hr(_i,"Gecko")&&!(hr(_i.toLowerCase(),"webkit")&&!hr(_i,"Edge"))&&!(hr(_i,"Trident")||hr(_i,"MSIE"))&&!hr(_i,"Edge"),Td=hr(_i.toLowerCase(),"webkit")&&!hr(_i,"Edge");function Wl(){var n=Ct.document;return n?n.documentMode:void 0}e:{var qu="",Vg=(n=_i,zl?/rv:([^\);]+)(\)|;)/.exec(n):ql?/Edge\/([\d\.]+)/.exec(n):mo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Td?/WebKit\/(\S+)/.exec(n):Cd?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Vg&&(qu=Vg?Vg[1]:""),mo){var Ug=Wl();if(null!=Ug&&Ug>parseFloat(qu)){nu=String(Ug);break e}}nu=qu}var RE={};var OE=Ct.document&&mo&&(Wl()||parseInt(nu,10))||void 0,PE=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",Gi,e),Ct.removeEventListener("test",Gi,e)}catch(t){}return n}();function Ur(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function vf(n,e){if(Ur.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zl){e:{try{qi(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vf.Z.h.call(this)}}Ur.prototype.h=function(){this.defaultPrevented=!0},Lr(vf,Ur);var kE={2:"touch",3:"pen",4:"mouse"};vf.prototype.h=function(){vf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ef="closure_listenable_"+(1e6*Math.random()|0),Kb=0;function FE(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Kb,this.ca=this.fa=!1}function jg(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function $g(n){this.src=n,this.g={},this.h=0}function Hg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=AE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(jg(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function u_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}$g.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=u_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new FE(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Gg="closure_lm_"+(1e6*Math.random()|0),l_={};function LE(n,e,t,r,o){if(r&&r.once)return qg(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)LE(n,e[u],t,r,o);return null}return t=Wg(t),n&&n[Ef]?n.N(e,t,kg(r)?!!r.capture:!!r,o):Yb(n,e,t,!1,r,o)}function Yb(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=kg(o)?!!o.capture:!!o,m=VE(n);if(m||(n[Gg]=m=new $g(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function Qb(){var e=aA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)PE||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Jb(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function qg(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)qg(n,e[u],t,r,o);return null}return t=Wg(t),n&&n[Ef]?n.O(e,t,kg(r)?!!r.capture:!!r,o):Yb(n,e,t,!0,r,o)}function zg(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)zg(n,e[u],t,r,o);else r=kg(r)?!!r.capture:!!r,t=Wg(t),n&&n[Ef]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=u_(u=n.g[e],t,r,o))&&(jg(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=VE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=u_(e,t,r,o)),(t=-1<n?e[n]:null)&&c_(t))}function c_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ef])Hg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Jb(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=VE(e))?(Hg(t,n),0==t.h&&(t.src=null,e[Gg]=null)):jg(n)}}}function Jb(n){return n in l_?l_[n]:l_[n]="on"+n}function aA(n,e){if(n.ca)n=!0;else{e=new vf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&c_(n),n=t.call(r,e)}return n}function VE(n){return(n=n[Gg])instanceof $g?n:null}var d_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wg(n){return"function"==typeof n?n:(n[d_]||(n[d_]=function(e){return n.handleEvent(e)}),n[d_])}function Br(){ta.call(this),this.i=new $g(this),this.P=this,this.I=null}function jr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ur(e,n);else if(e instanceof Ur)e.target=e.target||n;else{var o=e;_f(e=new Ur(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=ru(d,r,!0,e)&&o}if(o=ru(d=e.g=n,r,!0,e)&&o,o=ru(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=ru(d=e.g=t[u],r,!1,e)&&o}function ru(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&Hg(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Lr(Br,ta),Br.prototype[Ef]=!0,Br.prototype.removeEventListener=function(n,e,t,r){zg(this,n,e,t,r)},Br.prototype.M=function(){if(Br.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jg(t[r]);delete n.g[e],n.h--}}this.I=null},Br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var h_=Ct.JSON.stringify;function UE(){var n=BE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var p_,f_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Zg,n=>n.reset());class Zg{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function eD(n){Ct.setTimeout(()=>{throw n},0)}function Kg(n,e){p_||function tD(){var n=Ct.Promise.resolve(void 0);p_=function(){n.then(nD)}}(),g_||(p_(),g_=!0),BE.add(n,e)}var g_=!1,BE=new class Xb{constructor(){this.h=this.g=null}add(e,t){const r=f_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nD(){for(var n;n=UE();){try{n.h.call(n.g)}catch(t){eD(t)}var e=f_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}g_=!1}function wf(n,e){Br.call(this),this.h=n||1,this.g=e||Ct,this.j=Ir(this.kb,this),this.l=Date.now()}function m_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Yg(n,e,t){if("function"==typeof n)t&&(n=Ir(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ir(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function y_(n){n.g=Yg(()=>{n.g=null,n.i&&(n.i=!1,y_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Lr(wf,Br),(Ye=wf.prototype).da=!1,Ye.S=null,Ye.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jr(this,"tick"),this.da&&(m_(this),this.start()))}},Ye.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){wf.Z.M.call(this),m_(this),delete this.g};class __ extends ta{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:y_(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qg(n){ta.call(this),this.h=n,this.g={}}Lr(Qg,ta);var Jg=[];function jE(n,e,t,r){Array.isArray(t)||(t&&(Jg[0]=t.toString()),t=Jg);for(var o=0;o<t.length;o++){var u=LE(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function rD(n){Gl(n.g,function(e,t){this.g.hasOwnProperty(t)&&c_(e)},n),n.g={}}function zu(){this.g=!0}function Wu(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Xg(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return h_(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Qg.prototype.M=function(){Qg.Z.M.call(this),rD(this)},Qg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zu.prototype.Aa=function(){this.g=!1},zu.prototype.info=function(){};var na={},em=null;function E_(){return em=em||new Br}function HE(n){Ur.call(this,na.Ma,n)}function Zl(n){const e=E_();jr(e,new HE(e,n))}function tm(n,e){Ur.call(this,na.STAT_EVENT,n),this.stat=e}function ri(n){const e=E_();jr(e,new tm(e,n))}function GE(n,e){Ur.call(this,na.Na,n),this.size=e}function Kl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}na.Ma="serverreachability",Lr(HE,Ur),na.STAT_EVENT="statevent",Lr(tm,Ur),na.Na="timingevent",Lr(GE,Ur);var If={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},w_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bf(){}function qE(){}bf.prototype.h=null;var b_,Ad={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function nm(){Ur.call(this,"d")}function Df(){Ur.call(this,"c")}function rm(){}function Cf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Qg(this),this.P=D_,this.W=new wf(n=Gu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new zE}function zE(){this.i=null,this.g="",this.h=!1}Lr(nm,Ur),Lr(Df,Ur),Lr(rm,bf),rm.prototype.g=function(){return new XMLHttpRequest},rm.prototype.i=function(){return{}},b_=new rm;var D_=45e3,Tf={},Af={};function im(n,e,t){n.K=1,n.v=Mf(ra(e)),n.s=t,n.U=!0,C_(n,null)}function C_(n,e){n.F=Date.now(),Sd(n),n.A=ra(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),XE(t.h,"t",r),n.C=0,t=n.l.H,n.h=new zE,n.g=yD(n.l,t?e:null,!n.s),0<n.O&&(n.L=new __(Ir(n.Ia,n,n.g),n.O)),jE(n.V,n.g,"readystatechange",n.gb),e=n.H?Vr(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Zl(1),function $E(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var R=C[0];C=C[1];var N=R.split("_");d=2<=N.length&&"type"==N[1]?d+(R+"=")+C+"&":d+(R+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function T_(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function A_(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=WE(n,t),o==Af){4==e&&(n.o=4,ri(14),r=!1),Wu(n.j,n.m,null,"[Incomplete Response]");break}if(o==Tf){n.o=4,ri(15),Wu(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wu(n.j,n.m,o,null),sm(n,o)}T_(n)&&o!=Af&&o!=Tf&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ri(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),z_(e),e.L=!0,ri(11))):(Wu(n.j,n.m,t,"[Invalid Chunked Response]"),Yl(n),Sf(n))}function WE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Af:(t=Number(e.substring(t,r)),isNaN(t)?Tf:(r+=1)+t>e.length?Af:(e=e.substr(r,t),n.C=r+t,e))}function Sd(n){n.Y=Date.now()+n.P,S_(n,n.P)}function S_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Kl(Ir(n.eb,n),e)}function M_(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function Sf(n){0==n.l.G||n.I||mD(n.l,n)}function Yl(n){M_(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,m_(n.W),rD(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function sm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||xd(t.i,n)))if(t.I=n.N,!n.J&&xd(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Kl(Ir(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;au(t),Ff(t)}ou(t),ri(18)}if(1>=k_(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Pd(t,11)}else if((n.J||t.g==n)&&au(t),!tu(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const R=C[3];null!=R&&(t.ma=R,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const W=C[5];null!=W&&"number"==typeof W&&0<W&&(t.K=r=1.5*W,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const ee=n.g;if(ee){const ge=ee.g?ee.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ge){var u=r.i;!u.g&&(hr(ge,"spdy")||hr(ge,"quic")||hr(ge,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(F_(u,u.h),u.h=null))}if(r.D){const ke=ee.g?ee.g.getResponseHeader("X-HTTP-Session-Id"):null;ke&&(r.sa=ke,vn(r.F,r.D,ke))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Z_(r,r.H?r.la:null,r.W),d.J){L_(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(M_(m),Sd(m)),r.g=d}else q_(r);0<t.l.length&&Lf(t)}else"stop"!=C[0]&&"close"!=C[0]||Pd(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Pd(t,7):dm(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Zl(4)}catch(C){}}function Gn(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(DE(n)||"string"==typeof n)SE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(DE(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function sD(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(DE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function Ql(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ql)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function x_(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Jl(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Jl(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Jl(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ye=Cf.prototype).setTimeout=function(n){this.P=n},Ye.gb=function(n){n=n.target;const e=this.L;e&&3==su(n)?e.l():this.Ia(n)},Ye.Ia=function(n){try{if(n==this.g)e:{const R=su(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>R)&&(3!=R||Gu||this.g&&(this.h.h||this.g.ga()||aw(this.g)))){this.I||4!=R||7==e||Zl(8==e||0>=N?3:2),M_(this);var t=this.g.ba();this.N=t;t:if(T_(this)){var r=aw(this.g);n="";var o=r.length,u=4==su(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yl(this),Sf(this);var d="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function v_(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,R,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!tu(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,ri(12),Yl(this),Sf(this);break e}Wu(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sm(this,t)}this.U?(A_(this,R,d),Gu&&this.i&&3==R&&(jE(this.V,this.W,"tick",this.fb),this.W.start())):(Wu(this.j,this.m,d,null),sm(this,d)),4==R&&Yl(this),this.i&&!this.I&&(4==R?mD(this.l,this):(this.i=!1,Sd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,ri(12)):(this.o=0,ri(13)),Yl(this),Sf(this)}}}catch(R){}},Ye.fb=function(){if(this.g){var n=su(this.g),e=this.g.ga();this.C<e.length&&(M_(this),A_(this,n,e),this.i&&4!=n&&Sd(this))}},Ye.cancel=function(){this.I=!0,Yl(this)},Ye.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function iD(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Zl(3),ri(17)),Yl(this),this.o=2,Sf(this)):S_(this,this.Y-n)},(Ye=Ql.prototype).R=function(){x_(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ye.T=function(){return x_(this),this.g.concat()},Ye.get=function(n,e){return Jl(this.h,n)?this.h[n]:e},Ye.set=function(n,e){Jl(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ye.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var R_=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Zu(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Zu){this.g=void 0!==e?e:n.g,iu(this,n.j),this.s=n.s,om(this,n.i),am(this,n.m),this.l=n.l,e=n.h;var t=new Md;t.i=e.i,e.g&&(t.g=new Ql(e.g),t.h=e.h),N_(this,t),this.o=n.o}else n&&(t=String(n).match(R_))?(this.g=!!e,iu(this,t[1]||"",!0),this.s=Xl(t[2]||""),om(this,t[3]||"",!0),am(this,t[4]),this.l=Xl(t[5]||"",!0),N_(this,t[6]||"",!0),this.o=Xl(t[7]||"")):(this.g=!!e,this.h=new Md(null,this.g))}function ra(n){return new Zu(n)}function iu(n,e,t){n.j=t?Xl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function om(n,e,t){n.i=t?Xl(e,!0):e}function am(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function N_(n,e,t){e instanceof Md?(n.h=e,function xf(n,e){e&&!n.j&&(Ku(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(QE(this,r),XE(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=zi(e,_o)),n.h=new Md(e,n.g))}function vn(n,e,t){n.h.set(e,t)}function Mf(n){return vn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Xl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zi(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,aD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function aD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Zu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zi(e,KE,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zi(e,KE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(zi(t,"/"==t.charAt(0)?yo:ia,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zi(t,YE)),n.join("")};var KE=/[#\/\?@]/g,ia=/[#\?:]/g,yo=/[#\?]/g,_o=/[#\?@]/g,YE=/#/g;function Md(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ku(n){n.g||(n.g=new Ql,n.h=0,n.i&&function oD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function QE(n,e){Ku(n),e=Yu(n,e),Jl(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Jl((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&x_(n)))}function JE(n,e){return Ku(n),e=Yu(n,e),Jl(n.g.h,e)}function XE(n,e,t){QE(n,e),0<t.length&&(n.i=null,n.g.set(Yu(n,e),Dd(t)),n.h+=t.length)}function Yu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function O_(n){this.l=n||lD,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=Md.prototype).add=function(n,e){Ku(this),this.i=null,n=Yu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){Ku(this),this.g.forEach(function(t,r){SE(t,function(o){n.call(e,o,r,this)},this)},this)},Ye.T=function(){Ku(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ye.R=function(n){Ku(this);var e=[];if("string"==typeof n)JE(this,n)&&(e=ME(e,this.g.get(Yu(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=ME(e,n[t])}return e},Ye.set=function(n,e){return Ku(this),this.i=null,JE(this,n=Yu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var lD=10;function P_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function k_(n){return n.h?1:n.g?n.g.size:0}function xd(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function F_(n,e){n.g?n.g.add(e):n.h=e}function L_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function V_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Dd(n.i)}function Rf(){}function um(){this.g=new Rf}function ew(n,e,t){const r=t||"";try{Gn(n,function(o,u){let d=o;kg(o)&&(d=h_(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Nf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Rd(n){this.l=n.$b||null,this.j=n.ib||!1}function Of(n,e){Br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=lm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}O_.prototype.cancel=function(){if(this.i=V_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Rf.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},Rf.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},Lr(Rd,bf),Rd.prototype.g=function(){return new Of(this.l,this.j)},Rd.prototype.i=function(n){return function(){return n}}({}),Lr(Of,Br);var lm=0;function U_(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Nd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Pf(n)}function Pf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=Of.prototype).open=function(n,e){if(this.readyState!=lm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Pf(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nd(this)),this.readyState=lm},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Pf(this)),this.g&&(this.readyState=3,Pf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ct.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;U_(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Nd(this):Pf(this),3==this.readyState&&U_(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,Nd(this))},Ye.Ta=function(n){this.g&&(this.response=n,Nd(this))},Ye.ha=function(){this.g&&Nd(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Of.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var cD=Ct.JSON.parse;function Xn(n){Br.call(this),this.headers=new Ql,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=nw,this.K=this.L=!1}Lr(Xn,Br);var nw="",dD=/^https?$/i,hD=["POST","PUT"];function pD(n){return"content-type"==n.toLowerCase()}function rw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,iw(n),cm(n)}function iw(n){n.D||(n.D=!0,jr(n,"complete"),jr(n,"error"))}function sw(n){if(n.h&&void 0!==Pg&&(!n.C[1]||4!=su(n)||2!=n.ba()))if(n.v&&4==su(n))Yg(n.Fa,0,n);else if(jr(n,"readystatechange"),4==su(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(R_)[1]||null;if(!o&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;o=u.substr(0,u.length-1)}r=!dD.test(o?o.toLowerCase():"")}t=r}if(t)jr(n,"complete"),jr(n,"success");else{n.m=6;try{var d=2<su(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",iw(n)}}finally{cm(n)}}}function cm(n,e){if(n.g){ow(n);const t=n.g,r=n.C[0]?Gi:null;n.g=null,n.C=null,e||jr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function ow(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function su(n){return n.g?n.g.readyState:0}function aw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case nw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function B_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function gD(n){let e="";return Gl(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):vn(n,e,t))}function kf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function j_(n){this.za=0,this.l=[],this.h=new zu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=kf("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=kf("baseRetryDelayMs",5e3,n),this.$a=kf("retryDelaySeedMs",1e4,n),this.Ya=kf("forwardChannelMaxRetries",2,n),this.ra=kf("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new O_(n&&n.concurrentRequestLimit),this.Ca=new um,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function dm(n){if($_(n),3==n.G){var e=n.V++,t=ra(n.F);vn(t,"SID",n.J),vn(t,"RID",e),vn(t,"TYPE","terminate"),Od(n,t),(e=new Cf(n,n.h,e,void 0)).K=2,e.v=Mf(ra(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=yD(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Sd(e)}W_(n)}function Ff(n){n.g&&(z_(n),n.g.cancel(),n.g=null)}function $_(n){Ff(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),au(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function hm(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Lf(n)}function Lf(n){P_(n.i)||n.m||(n.m=!0,Kg(n.Ha,n),n.C=0)}function H_(n,e){var t;t=e?e.m:n.V++;const r=ra(n.F);vn(r,"SID",n.J),vn(r,"RID",t),vn(r,"AID",n.U),Od(n,r),n.o&&n.s&&B_(r,n.o,n.s),t=new Cf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=G_(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),F_(n.i,t),im(t,r,e)}function Od(n,e){n.j&&Gn({},function(t,r){vn(e,r,t)})}function G_(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Ir(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const R=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{ew(R,d,"req"+C+"_")}catch(N){r&&r(R)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function q_(n){n.g||n.u||(n.Y=1,Kg(n.Ga,n),n.A=0)}function ou(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Kl(Ir(n.Ga,n),fm(n,n.A)),n.A++,0))}function z_(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function lw(n){n.g=new Cf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=ra(n.oa);vn(e,"RID","rpc"),vn(e,"SID",n.J),vn(e,"CI",n.N?"0":"1"),vn(e,"AID",n.U),Od(n,e),vn(e,"TYPE","xmlhttp"),n.o&&n.s&&B_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Mf(ra(e)),t.s=null,t.U=!0,C_(t,n)}function au(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function mD(n,e){var t=null;if(n.g==e){au(n),z_(n),n.g=null;var r=2}else{if(!xd(n.i,e))return;t=e.D,L_(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;jr(r=E_(),new GE(r,t,e,o)),Lf(n)}else q_(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function uw(n,e){return!(k_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Kl(Ir(n.Ha,n,e),fm(n,n.C)),n.C++,0)))}(n,e)||2==r&&ou(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Pd(n,5);break;case 4:Pd(n,10);break;case 3:Pd(n,6);break;default:Pd(n,2)}}function fm(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Pd(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Ir(n.jb,n);t||(t=new Zu("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||iu(t,"https"),Mf(t)),function tw(n,e){const t=new zu;if(Ct.Image){const r=new Image;r.onload=bd(Nf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=bd(Nf,t,r,"TestLoadImage: error",!1,e),r.onabort=bd(Nf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=bd(Nf,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ri(2);n.G=0,n.j&&n.j.va(e),W_(n),$_(n)}function W_(n){n.G=0,n.I=-1,n.j&&((0!=V_(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Dd(n.l),n.l.length=0),n.j.ua())}function Z_(n,e,t){let r=function uA(n){return n instanceof Zu?ra(n):new Zu(n,void 0)}(t);if(""!=r.i)e&&om(r,e+"."+r.i),am(r,r.m);else{const o=Ct.location;r=function ZE(n,e,t,r){var o=new Zu(null,void 0);return n&&iu(o,n),e&&om(o,e),t&&am(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Gl(n.aa,function(o,u){vn(r,u,o)}),t=n.sa,(e=n.D)&&t&&vn(r,e,t),vn(r,"VER",n.ma),Od(n,r),r}function yD(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(t&&n.Ba&&!n.qa?new Rd({ib:!0}):n.qa)).L=n.H,e}function ht(){}function pm(){if(mo&&!(10<=Number(OE)))throw Error("Environmental error: no available transport.")}function fs(n,e){Br.call(this),this.g=new j_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!tu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!tu(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new kd(this)}function cw(n){nm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Vf(){Df.call(this),this.status=1}function kd(n){this.g=n}(Ye=Xn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():b_.g(),this.C=function I_(n){return n.h||(n.h=n.i())}(this.u?this.u:b_),this.g.onreadystatechange=Ir(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void rw(this,u)}n=t||"";const o=new Ql(this.headers);r&&Gn(r,function(u,d){o.set(d,u)}),r=function Zb(n){e:{var e=pD;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=AE(hD,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ow(this),0<this.B&&((this.K=function fD(n){return mo&&function NE(){return function o_(n){var e=RE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xE(String(nu)).split("."),t=xE("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=s_(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||s_(0==o[2].length,0==u[2].length)||s_(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ir(this.pa,this)):this.A=Yg(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){rw(this,u)}},Ye.pa=function(){void 0!==Pg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jr(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,jr(this,"complete"),jr(this,"abort"),cm(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cm(this,!0)),Xn.Z.M.call(this)},Ye.Fa=function(){this.s||(this.F||this.v||this.l?sw(this):this.cb())},Ye.cb=function(){sw(this)},Ye.ba=function(){try{return 2<su(this)?this.g.status:-1}catch(n){return-1}},Ye.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ye.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),cD(e)}},Ye.Da=function(){return this.m},Ye.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=j_.prototype).ma=8,Ye.G=1,Ye.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ye.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Cf(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Vr(u),_f(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=G_(this,o,e),vn(t=ra(this.F),"RID",n),vn(t,"CVER",22),this.D&&vn(t,"X-HTTP-Session-Id",this.D),Od(this,t),this.o&&u&&B_(t,this.o,u),F_(this.i,o),this.Ra&&vn(t,"TYPE","init"),this.ja?(vn(t,"$req",e),vn(t,"SID","null"),o.$=!0,im(o,t,null)):im(o,t,e),this.G=2}}else 3==this.G&&(n?H_(this,n):0==this.l.length||P_(this.i)||H_(this))},Ye.Ga=function(){if(this.u=null,lw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Kl(Ir(this.bb,this),n)}},Ye.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ri(10),Ff(this),lw(this))},Ye.ab=function(){null!=this.v&&(this.v=null,Ff(this),ou(this),ri(19))},Ye.jb=function(n){n?(this.h.info("Successfully pinged google.com"),ri(2)):(this.h.info("Failed to ping google.com"),ri(1))},(Ye=ht.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Oa=function(){},pm.prototype.g=function(n,e){return new fs(n,e)},Lr(fs,Br),fs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Kg(Ir(n.hb,n,e))),ri(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Z_(n,null,n.W),Lf(n)},fs.prototype.close=function(){dm(this.g)},fs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,hm(this.g,e)}else this.v?((e={}).__data__=h_(n),hm(this.g,e)):hm(this.g,n)},fs.prototype.M=function(){this.g.j=null,delete this.j,dm(this.g),delete this.g,fs.Z.M.call(this)},Lr(cw,nm),Lr(Vf,Df),Lr(kd,ht),kd.prototype.xa=function(){jr(this.g,"a")},kd.prototype.wa=function(n){jr(this.g,new cw(n))},kd.prototype.va=function(n){jr(this.g,new Vf(n))},kd.prototype.ua=function(){jr(this.g,"b")},pm.prototype.createWebChannel=pm.prototype.g,fs.prototype.send=fs.prototype.u,fs.prototype.open=fs.prototype.m,fs.prototype.close=fs.prototype.close,If.NO_ERROR=0,If.TIMEOUT=8,If.HTTP_ERROR=6,w_.COMPLETE="complete",qE.EventType=Ad,Ad.OPEN="a",Ad.CLOSE="b",Ad.ERROR="c",Ad.MESSAGE="d",Br.prototype.listen=Br.prototype.N,Xn.prototype.listenOnce=Xn.prototype.O,Xn.prototype.getLastError=Xn.prototype.La,Xn.prototype.getLastErrorCode=Xn.prototype.Da,Xn.prototype.getStatus=Xn.prototype.ba,Xn.prototype.getResponseJson=Xn.prototype.Qa,Xn.prototype.getResponseText=Xn.prototype.ga,Xn.prototype.send=Xn.prototype.ea;var gm=eu.createWebChannelTransport=function(){return new pm},mm=eu.getStatEventTarget=function(){return E_()},En=eu.ErrorCode=If,lA=eu.EventType=w_,dw=eu.Event=na,hw=eu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_D=eu.FetchXmlHttpFactory=Rd,Uf=eu.WebChannel=qE,fw=eu.XhrIo=Xn;const K_="@firebase/firestore";class br{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");let Fd="9.8.0";const Qu=new Hl.Yd("@firebase/firestore");function Y_(){return Qu.logLevel}function Oe(n,...e){if(Qu.logLevel<=Hl.in.DEBUG){const t=e.map(Ld);Qu.debug(`Firestore (${Fd}): ${n}`,...t)}}function er(n,...e){if(Qu.logLevel<=Hl.in.ERROR){const t=e.map(Ld);Qu.error(`Firestore (${Fd}): ${n}`,...t)}}function jf(n,...e){if(Qu.logLevel<=Hl.in.WARN){const t=e.map(Ld);Qu.warn(`Firestore (${Fd}): ${n}`,...t)}}function Ld(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function Xe(n="Unexpected state"){const e=`FIRESTORE (${Fd}) INTERNAL ASSERTION FAILED: `+n;throw er(e),new Error(e)}function It(n,e){n||Xe()}function qe(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Pt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class gw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(br.UNAUTHENTICATED))}shutdown(){}}class mw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yw{constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Dr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Dr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new gw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new br(e)}}class _w{constructor(e,t,r){this.type="FirstParty",this.user=br.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ED{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new _w(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(br.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Q_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wD{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new Q_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class $s{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function dA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}$s.A=-1;class ID{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=dA(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function St(n,e){return n<e?-1:n>e?1:0}function ec(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function $f(n){return n+"\0"}class qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return qn.fromMillis(Date.now())}static fromDate(e){return qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?St(this.nanoseconds,e.nanoseconds):St(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _t(e)}static min(){return new _t(new qn(0,0))}static max(){return new _t(new qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function J_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function vw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hf{constructor(e,t,r){void 0===t?t=0:t>e.length&&Xe(),void 0===r?r=e.length-t:r>e.length-t&&Xe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Hf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $t extends Hf{construct(e,t,r){return new $t(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new $t(t)}static emptyPath(){return new $t([])}}const bD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Hf{construct(e,t,r){return new fr(e,t,r)}static isValidIdentifier(e){return bD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Se(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Se(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Se(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Se(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(t)}static emptyPath(){return new fr([])}}class tc{constructor(e){this.fields=e,e.sort(fr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ec(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return St(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const Vd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ju(n){if(It(!!n),"string"==typeof n){let e=0;const t=Vd.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Sn(n.seconds),nanos:Sn(n.nanos)}}function Sn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function nc(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function ym(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ew(n){const e=n.mapValue.fields.__previous_value__;return ym(e)?Ew(e):e}function Ud(n){const e=Ju(n.mapValue.fields.__local_write_time__.timestampValue);return new qn(e.seconds,e.nanos)}class CD{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Eo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Eo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Eo&&e.projectId===this.projectId&&e.database===this.database}}function Gf(n){return null==n}function Bd(n){return 0===n&&1/n==-1/0}function X_(n){return"number"==typeof n&&Number.isInteger(n)&&!Bd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class je{constructor(e){this.path=e}static fromPath(e){return new je($t.fromString(e))}static fromName(e){return new je($t.fromString(e).popFirst(5))}static empty(){return new je($t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$t.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new $t(e.slice()))}}const Xu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_m={nullValue:"NULL_VALUE"};function uu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ym(n)?4:bw(n)?9007199254740991:10:Xe()}function sa(n,e){if(n===e)return!0;const t=uu(n);if(t!==uu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ud(n).isEqual(Ud(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Ju(r.timestampValue),d=Ju(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,nc(n.bytesValue).isEqual(nc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Sn(r.geoPointValue.latitude)===Sn(o.geoPointValue.latitude)&&Sn(r.geoPointValue.longitude)===Sn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Sn(r.integerValue)===Sn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Sn(r.doubleValue),d=Sn(o.doubleValue);return u===d?Bd(u)===Bd(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return ec(n.arrayValue.values||[],e.arrayValue.values||[],sa);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(J_(u)!==J_(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!sa(u[m],d[m])))return!1;return!0}(n,e);default:return Xe()}var o}function jd(n,e){return void 0!==(n.values||[]).find(t=>sa(t,e))}function el(n,e){if(n===e)return 0;const t=uu(n),r=uu(e);if(t!==r)return St(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return St(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Sn(o.integerValue||o.doubleValue),m=Sn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return ww(n.timestampValue,e.timestampValue);case 4:return ww(Ud(n),Ud(e));case 5:return St(n.stringValue,e.stringValue);case 6:return function(o,u){const d=nc(o),m=nc(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=St(d[w],m[w]);if(0!==C)return C}return St(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=St(Sn(o.latitude),Sn(u.latitude));return 0!==d?d:St(Sn(o.longitude),Sn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=el(d[w],m[w]);if(C)return C}return St(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Xu.mapValue&&u===Xu.mapValue)return 0;if(o===Xu.mapValue)return 1;if(u===Xu.mapValue)return-1;const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let R=0;R<m.length&&R<C.length;++R){const N=St(m[R],C[R]);if(0!==N)return N;const W=el(d[m[R]],w[C[R]]);if(0!==W)return W}return St(m.length,C.length)}(n.mapValue,e.mapValue);default:throw Xe()}}function ww(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return St(n,e);const t=Ju(n),r=Ju(e),o=St(t.seconds,r.seconds);return 0!==o?o:St(t.nanos,r.nanos)}function $d(n){return ev(n)}function ev(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Ju(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?nc(n.bytesValue).toBase64():"referenceValue"in n?je.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=ev(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${ev(r.fields[m])}`;return u+"}"}(n.mapValue):Xe();var e}function rc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function tv(n){return!!n&&"integerValue"in n}function qf(n){return!!n&&"arrayValue"in n}function Iw(n){return!!n&&"nullValue"in n}function nv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zf(n){return!!n&&"mapValue"in n}function Wf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return vo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bw(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Dw(n){return"nullValue"in n?_m:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?rc(Eo.empty(),je.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Xe()}function TD(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?rc(Eo.empty(),je.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Xu:Xe()}function Cw(n,e){const t=el(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Tw(n,e){const t=el(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Cr{constructor(e){this.value=e}static empty(){return new Cr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wf(t)}setAll(e){let t=fr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Wf(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());zf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];zf(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){vo(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Cr(Wf(this.value))}}function vm(n){const e=[];return vo(n.fields,(t,r)=>{const o=new fr([t]);if(zf(r)){const u=vm(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new tc(e)}class dn{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,_t.min(),_t.min(),Cr.empty(),0)}static newFoundDocument(e,t,r){return new dn(e,1,t,_t.min(),r,0)}static newNoDocument(e,t){return new dn(e,2,t,_t.min(),Cr.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,_t.min(),Cr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hd{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function rv(n){return n.fields.find(e=>2===e.kind)}function ic(n){return n.fields.filter(e=>2!==e.kind)}Hd.UNKNOWN_ID=-1;class Gd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zf(0,Hs.min())}}function iv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=_t.fromTimestamp(1e9===r?new qn(t+1,0):new qn(t,r));return new Hs(o,je.empty(),e)}function AD(n){return new Hs(n.readTime,n.key,-1)}class Hs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hs(_t.min(),je.empty(),-1)}static max(){return new Hs(_t.max(),je.empty(),-1)}}function Aw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=je.comparator(n.documentKey,e.documentKey),0!==t?t:St(n.largestBatchId,e.largestBatchId))}class Fn{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new Fn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new Fn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sv(this.root,e,this.comparator,!1)}getReverseIterator(){return new sv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sv(this.root,e,this.comparator,!0)}}class sv{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:$r.RED,this.left=null!=o?o:$r.EMPTY,this.right=null!=u?u:$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new $r(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return $r.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Xe();const e=this.left.check();if(e!==this.right.check())throw Xe();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe()}get value(){throw Xe()}get color(){throw Xe()}get left(){throw Xe()}get right(){throw Xe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new $r(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class en{constructor(e){this.comparator=e,this.data=new Fn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sw(this.data.getIterator())}getIteratorFrom(e){return new Sw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new en(this.comparator);return t.data=e,t}}class Sw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function wo(n){return n.hasNext()?n.getNext():void 0}class Kf{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function Mw(n,e=null,t=[],r=[],o=null,u=null,d=null){return new Kf(n,e,t,r,o,u,d)}function qd(n){const e=qe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+$d(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$d(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$d(r)).join(",")),e.P=t}return e.P}function Yf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!hA(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!sa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Fw(n.startAt,e.startAt)&&Fw(n.endAt,e.endAt)}function Em(n){return je.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wm(n,e){return n.filters.filter(t=>t instanceof Tr&&t.field.isEqual(e))}function Rw(n,e,t){let r=_m,o=!0;for(const u of wm(n,e)){let d=_m,m=!0;switch(u.op){case"<":case"<=":d=Dw(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=_m}Cw({value:r,inclusive:o},{value:d,inclusive:m})<0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Cw({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function ov(n,e,t){let r=Xu,o=!0;for(const u of wm(n,e)){let d=Xu,m=!0;switch(u.op){case">=":case">":d=TD(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=Xu}Tw({value:r,inclusive:o},{value:d,inclusive:m})>0&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Tw({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class Tr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new av(e,t,r):"array-contains"===t?new Ow(e,r):"in"===t?new Pw(e,r):"not-in"===t?new SD(e,r):"array-contains-any"===t?new MD(e,r):new Tr(e,t,r)}static V(e,t,r){return"in"===t?new Im(e,r):new Qf(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(el(t,this.value)):null!==t&&uu(this.value)===uu(t)&&this.v(el(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Xe()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class av extends Tr{constructor(e,t,r){super(e,t,r),this.key=je.fromName(r.referenceValue)}matches(e){const t=je.comparator(e.key,this.key);return this.v(t)}}class Im extends Tr{constructor(e,t){super(e,"in",t),this.keys=Nw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Qf extends Tr{constructor(e,t){super(e,"not-in",t),this.keys=Nw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Nw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>je.fromName(r.referenceValue))}class Ow extends Tr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qf(t)&&jd(t.arrayValue,this.value)}}class Pw extends Tr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&jd(this.value.arrayValue,t)}}class SD extends Tr{constructor(e,t){super(e,"not-in",t)}matches(e){if(jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!jd(this.value.arrayValue,t)}}class MD extends Tr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jd(this.value.arrayValue,r))}}class oa{constructor(e,t){this.position=e,this.inclusive=t}}class zd{constructor(e,t="asc"){this.field=e,this.dir=t}}function hA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function kw(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?je.comparator(je.fromName(d.referenceValue),t.key):el(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Fw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!sa(n.position[t],e.position[t]))return!1;return!0}class Wi{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function uv(n,e,t,r,o,u,d,m){return new Wi(n,e,t,r,o,u,d,m)}function Io(n){return new Wi(n)}function bm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function lv(n){for(const e of n.filters)if(e.S())return e.field;return null}function Lw(n){return null!==n.collectionGroup}function sc(n){const e=qe(n);if(null===e.D){e.D=[];const t=lv(e),r=bm(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new zd(t)),e.D.push(new zd(fr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new zd(fr.keyField(),u))}}}return e.D}function bo(n){const e=qe(n);if(!e.C)if("F"===e.limitType)e.C=Mw(e.path,e.collectionGroup,sc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of sc(e))t.push(new zd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new oa(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new oa(e.startAt.position,e.startAt.inclusive):null;e.C=Mw(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function cv(n,e,t){return new Wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function oc(n,e){return Yf(bo(n),bo(e))&&n.limitType===e.limitType}function Vw(n){return`${qd(bo(n))}|lt:${n.limitType}`}function dv(n){return`Query(target=${function xw(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${$d(r.value)}`;var r}).join(", ")}]`),Gf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>$d(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>$d(t)).join(",")),`Target(${e})`}(bo(n))}; limitType=${n.limitType})`}function hv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):je.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=kw(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,sc(t),r)||t.endAt&&!function(o,u,d){const m=kw(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,sc(t),r)));var t,r}function Uw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Bw(n){return(e,t)=>{let r=!1;for(const o of sc(n)){const u=xD(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function xD(n,e,t){const r=n.field.isKeyField()?je.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?el(m,w):Xe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Xe()}}function jw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bd(e)?"-0":e}}function $w(n){return{integerValue:""+n}}function Hw(n,e){return X_(e)?$w(e):jw(n,e)}class Dm{constructor(){this._=void 0}}function Jf(n,e,t){return n instanceof ac?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof tl?pv(n,e):n instanceof uc?qw(n,e):function(r,o){const u=fv(r,o),d=zw(u)+zw(r.k);return tv(u)&&tv(r.k)?$w(d):jw(r.M,d)}(n,e)}function Gw(n,e,t){return n instanceof tl?pv(n,e):n instanceof uc?qw(n,e):t}function fv(n,e){return n instanceof Wd?tv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ac extends Dm{}class tl extends Dm{constructor(e){super(),this.elements=e}}function pv(n,e){const t=Ww(e);for(const r of n.elements)t.some(o=>sa(o,r))||t.push(r);return{arrayValue:{values:t}}}class uc extends Dm{constructor(e){super(),this.elements=e}}function qw(n,e){let t=Ww(e);for(const r of n.elements)t=t.filter(o=>!sa(o,r));return{arrayValue:{values:t}}}class Wd extends Dm{constructor(e,t){super(),this.M=e,this.k=t}}function zw(n){return Sn(n.integerValue||n.doubleValue)}function Ww(n){return qf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Xf{constructor(e,t){this.field=e,this.transform=t}}class ep{constructor(e,t){this.version=e,this.transformResults=t}}class tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ps{}function ND(n,e,t){n instanceof rp?function(r,o,u){const d=r.value.clone(),m=Yw(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof aa?function(r,o,u){if(!Zd(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=Yw(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(ip(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tp(n,e,t){var o;n instanceof rp?function(r,o,u){if(!Zd(r.precondition,o))return;const d=r.value.clone(),m=Qw(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(Kw(o),d).setHasLocalMutations()}(n,e,t):n instanceof aa?function(r,o,u){if(!Zd(r.precondition,o))return;const d=Qw(r.fieldTransforms,u,o),m=o.data;m.setAll(ip(r)),m.setAll(d),o.convertToFoundDocument(Kw(o),m).setHasLocalMutations()}(n,e,t):Zd(n.precondition,o=e)&&o.convertToNoDocument(_t.min())}function np(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=fv(r.transform,o||null);null!=u&&(null==t&&(t=Cr.empty()),t.set(r.field,u))}return t||null}function Zw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ec(t,r,(o,u)=>function RD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof tl&&r instanceof tl||t instanceof uc&&r instanceof uc?ec(t.elements,r.elements,sa):t instanceof Wd&&r instanceof Wd?sa(t.k,r.k):t instanceof ac&&r instanceof ac);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function Kw(n){return n.isFoundDocument()?n.version:_t.min()}class rp extends ps{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class aa extends ps{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function ip(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Yw(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Gw(d,m,t[o]))}return r}function Qw(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,Jf(u,d,e))}return r}class Kd extends ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Cm extends ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class gv{constructor(e){this.count=e}}var zn,Ht;function Jw(n){switch(n){default:return Xe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function OD(n){if(void 0===n)return er("GRPC error has no .code"),ae.UNKNOWN;switch(n){case zn.OK:return ae.OK;case zn.CANCELLED:return ae.CANCELLED;case zn.UNKNOWN:return ae.UNKNOWN;case zn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case zn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case zn.INTERNAL:return ae.INTERNAL;case zn.UNAVAILABLE:return ae.UNAVAILABLE;case zn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case zn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case zn.NOT_FOUND:return ae.NOT_FOUND;case zn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case zn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case zn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case zn.ABORTED:return ae.ABORTED;case zn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case zn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case zn.DATA_LOSS:return ae.DATA_LOSS;default:return Xe()}}(Ht=zn||(zn={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";class ua{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return vw(this.inner)}size(){return this.innerSize}}const mv=new Fn(je.comparator);function gs(){return mv}const yv=new Fn(je.comparator);function sp(...n){let e=yv;for(const t of n)e=e.insert(t.key,t);return e}function op(){return new ua(n=>n.toString(),(n,e)=>n.isEqual(e))}const PD=new Fn(je.comparator),kD=new en(je.comparator);function Jt(...n){let e=kD;for(const t of n)e=e.add(t);return e}const Xw=new en(St);function Yd(){return Xw}class Qd{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,ap.createSynthesizedTargetChangeForCurrentChange(e,t)),new Qd(_t.min(),r,Yd(),gs(),Jt())}}class ap{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new ap(pr.EMPTY_BYTE_STRING,t,Jt(),Jt(),Jt())}}class up{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class _v{constructor(e,t){this.targetId=e,this.$=t}}class eI{constructor(e,t,r=pr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class vv{constructor(){this.B=0,this.L=Ev(),this.U=pr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Jt(),t=Jt(),r=Jt();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Xe()}}),new ap(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Ev()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class tI{constructor(e){this.nt=e,this.st=new Map,this.it=gs(),this.rt=nI(),this.ot=new en(St)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:Xe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Em(u))if(0===r){const d=new je(u.path);this.ct(t,d,dn.newNoDocument(d,_t.min()))}else It(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&Em(m.target)){const w=new je(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,dn.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=Jt();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new Qd(e,t,this.ot,this.it,r);return this.it=gs(),this.rt=nI(),this.ot=new en(St),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new vv,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new en(St),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new vv),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function nI(){return new Fn(je.comparator)}function Ev(){return new Fn(je.comparator)}const FD={asc:"ASCENDING",desc:"DESCENDING"},vi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Jd{constructor(e,t){this.databaseId=e,this.N=t}}function lp(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rI(n,e){return n.N?e.toBase64():e.toUint8Array()}function pA(n,e){return lp(n,e.toTimestamp())}function Ln(n){return It(!!n),_t.fromTimestamp(function(e){const t=Ju(e);return new qn(t.seconds,t.nanos)}(n))}function wv(n,e){return(t=n,new $t(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tm(n){const e=$t.fromString(n);return It(Mv(e)),e}function cp(n,e){return wv(n.databaseId,e.path)}function Do(n,e){const t=Tm(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new je(bv(t))}function Iv(n,e){return wv(n.databaseId,e)}function iI(n){const e=Tm(n);return 4===e.length?$t.emptyPath():bv(e)}function lc(n){return new $t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bv(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Dv(n,e,t){return{name:cp(n,e),fields:t.value.mapValue.fields}}function dp(n,e,t){const r=Do(n,e.name),o=Ln(e.updateTime),u=new Cr({mapValue:{fields:e.fields}}),d=dn.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Xd(n,e){let t;if(e instanceof rp)t={update:Dv(n,e.key,e.value)};else if(e instanceof Kd)t={delete:cp(n,e.key)};else if(e instanceof aa)t={update:Dv(n,e.key,e.data),updateMask:uI(e.fieldMask)};else{if(!(e instanceof Cm))return Xe();t={verify:cp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof ac)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof tl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof uc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Wd)return{fieldPath:u.field.canonicalString(),increment:d.k};throw Xe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:pA(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Xe()),t;var o}function Tv(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?tr.updateTime(Ln(o.updateTime)):void 0!==o.exists?tr.exists(o.exists):tr.none():tr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(It("REQUEST_TIME"===d.setToServerValue),m=new ac):"appendMissingElements"in d?m=new tl(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new uc(d.removeAllFromArray.values||[]):"increment"in d?m=new Wd(u,d.increment):Xe();const w=fr.fromServerFormat(d.fieldPath);return new Xf(w,m)}(n,o)):[];var o;if(e.update){const o=Do(n,e.update.name),u=new Cr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new tc((e.updateMask.fieldPaths||[]).map(C=>fr.fromServerFormat(C)));return new aa(o,u,d,t,r)}return new rp(o,u,t,r)}if(e.delete){const o=Do(n,e.delete);return new Kd(o,t)}if(e.verify){const o=Do(n,e.verify);return new Cm(o,t)}return Xe()}function hp(n,e){return{documents:[Iv(n,e.path)]}}function Av(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Iv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Iv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(R=>function(N){if("=="===N.op){if(nv(N.value))return{unaryFilter:{field:eh(N.field),op:"IS_NAN"}};if(Iw(N.value))return{unaryFilter:{field:eh(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(nv(N.value))return{unaryFilter:{field:eh(N.field),op:"IS_NOT_NAN"}};if(Iw(N.value))return{unaryFilter:{field:eh(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eh(N.field),op:LD(N.op),value:N.value}}}(R));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:eh((R=C).field),direction:mA(R.dir)};var R})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||Gf(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function oI(n){let e=iI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const R=t.from[0];R.allDescendants?o=R.collectionId:e=e.child(R.collectionId)}let u=[];t.where&&(u=Am(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(R=>{return new zd(cc((N=R).field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(R){let N;return N="object"==typeof R?R.value:R,Gf(N)?null:N}(t.limit));let w=null;var R;t.startAt&&(w=new oa((R=t.startAt).values||[],!!R.before));let C=null;return t.endAt&&(C=function(R){return new oa(R.values||[],!R.before)}(t.endAt)),uv(e,o,d,u,m,"F",w,C)}function Am(n){return n?void 0!==n.unaryFilter?[VD(n)]:void 0!==n.fieldFilter?[aI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Am(e)).reduce((e,t)=>e.concat(t)):Xe():[]}function mA(n){return FD[n]}function LD(n){return vi[n]}function eh(n){return{fieldPath:n.canonicalString()}}function cc(n){return fr.fromServerFormat(n.fieldPath)}function aI(n){return Tr.create(cc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Xe()}}(n.fieldFilter.op),n.fieldFilter.value)}function VD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=cc(n.unaryFilter.field);return Tr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=cc(n.unaryFilter.field);return Tr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cc(n.unaryFilter.field);return Tr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=cc(n.unaryFilter.field);return Tr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Xe()}}function uI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mv(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xv(e)),e=UD(n.get(t),e);return xv(e)}function UD(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function xv(n){return n+"\x01\x01"}function la(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),$t.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&Xe(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:Xe()}u=d+2}return new $t(r)}const Rv=["userId","batchId"];function fp(n,e){return[n,Ei(e)]}function Nv(n,e,t){return[n,Ei(e),t]}const lI={},BD=["prefixPath","collectionGroup","readTime","documentId"],jD=["prefixPath","collectionGroup","documentId"],yA=["collectionGroup","readTime","prefixPath","documentId"],cI=["canonicalId","targetId"],_A=["targetId","path"],vA=["path","targetId"],EA=["collectionId","parent"],wA=["indexId","uid"],IA=["uid","sequenceNumber"],bA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DA=["indexId","uid","orderedDocumentKey"],CA=["userId","collectionPath","documentId"],Sm=["userId","collectionPath","largestBatchId"],TA=["userId","collectionGroup","largestBatchId"],Ov=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pv=[...Ov,"documentOverlays"],kv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dI=[...kv,"indexConfiguration","indexState","indexEntries"],$D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(o=>o?de.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class pp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Dr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new th(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=hI(r.target.error);this.At.reject(new th(e,o))}}static open(e,t,r,o){try{return new pp(t,e.transaction(o,r))}catch(u){throw new th(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Fv(t)}}class Gs{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Gs.Vt((0,Pt.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),hc(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Pt.hl)())return!1;if(Gs.St())return!0;const e=(0,Pt.z$)(),t=Gs.Vt(e),r=0<t&&t<10,o=Gs.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Se(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Se(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new th(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.Pt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=pp.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(R=>(w.bt(),R)).catch(R=>(w.abort(R),de.reject(R))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),u.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class AA{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return hc(this.Ft.delete())}}class th extends Se{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dc(n){return"IndexedDbTransactionError"===n.name}class Fv{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hc(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),hc(this.store.add(e))}get(e){return hc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),hc(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),hc(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new de((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new de((r,o)=>{t.onerror=u=>{const d=hI(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new de((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new AA(m),C=t(m.primaryKey,m.value,w);if(C instanceof de){const R=C.catch(N=>(w.done(),de.reject(N)));r.push(R)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hc(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=hI(r.target.error);t(o)}})}let HD=!1;function hI(n){const e=Gs.Vt((0,Pt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HD||(HD=!0,setTimeout(()=>{throw r},0)),r}}return n}class GD extends Mm{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Ar(n,e){const t=qe(n);return Gs.xt(t.Ht,e)}class Lv{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&ND(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&tp(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&tp(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(_t.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Jt())}isEqual(e){return this.batchId===e.batchId&&ec(this.mutations,e.mutations,(t,r)=>Zw(t,r))&&ec(this.baseMutations,e.baseMutations,(t,r)=>Zw(t,r))}}class Vv{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=PD;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new Vv(e,t,r,o)}}class fI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nl{constructor(e,t,r,o,u=_t.min(),d=_t.min(),m=pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new nl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class xm{constructor(e){this.Jt=e}}function qs(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Rm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:cp(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:lp(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:lu(e.version)};else{if(!e.isUnknownDocument())return Xe();r.unknownDocument={path:t.path.toArray(),version:lu(e.version)}}var o,u;return r}function Rm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fc(n){const e=new qn(n.seconds,n.nanoseconds);return _t.fromTimestamp(e)}function nh(n,e){const t=(e.baseMutations||[]).map(u=>Tv(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Tv(n.Jt,u)),o=qn.fromMillis(e.localWriteTimeMs);return new Lv(e.batchId,o,t,r)}function pc(n){const e=fc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fc(n.lastLimboFreeSnapshotVersion):_t.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=bo(Io(iI(o.documents[0])))):r=bo(oI(n.query)),new nl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken))}function Uv(n,e){const t=lu(e.snapshotVersion),r=lu(e.lastLimboFreeSnapshotVersion);let o;o=Em(e.target)?hp(n.Jt,e.target):Av(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:qd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function Nm(n){const e=oI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?cv(e,e.limit,"L"):e}function Bv(n,e){return new fI(e.largestBatchId,Tv(n.Jt,e.overlayMutation))}function jv(n,e){const t=e.path.lastSegment();return[n,Ei(e.path.popLast()),t]}class pI{getBundleMetadata(e,t){return gI(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:fc(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return gI(e).put({bundleId:(r=t).id,createTime:lu(Ln(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return mI(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:Nm(o.bundledQuery),readTime:fc(o.readTime)};var o})}saveNamedQuery(e,t){return mI(e).put({name:(r=t).name,readTime:lu(Ln(r.readTime)),bundledQuery:r.bundledQuery});var r}}function gI(n){return Ar(n,"bundles")}function mI(n){return Ar(n,"namedQueries")}class gp{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new gp(e,t.uid||"")}getOverlay(e,t){return wi(e).get(jv(this.userId,t)).next(r=>r?Bv(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new fI(t,d);o.push(this.Xt(e,m))}),de.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(Ei(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(wi(e).Qt("collectionPathOverlayIndex",m))}),de.waitFor(u)}getOverlaysForCollection(e,t,r){const o=op(),u=Ei(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return wi(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=Bv(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=op();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wi(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,R)=>{const N=Bv(this.M,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):R.done()}).next(()=>u)}Xt(e,t){return wi(e).put(function(r,o,u){const[d,m,w]=jv(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Xd(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function wi(n){return Ar(n,"documentOverlays")}class gc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Sn(e.integerValue));else if("doubleValue"in e){const r=Sn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Bd(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(nc(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?bw(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Xe()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),je.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function SA(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function yI(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=SA(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}gc.fe=new gc;class _I{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=yI(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=yI(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class zD{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class WD{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class rh{constructor(){this.De=new _I,this.Ce=new zD(this.De),this.xe=new WD(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class mc{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mc(this.indexId,this.documentKey,this.arrayValue,r)}}function ih(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=$v(n.arrayValue,e.arrayValue),0!==t?t:(t=$v(n.directionalValue,e.directionalValue),0!==t?t:je.comparator(n.documentKey,e.documentKey)))}function $v(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class vI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=rv(e);if(void 0!==t&&!this.Be(t))return!1;const r=ic(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ZD{constructor(){this.qe=new Hv}addToCollectionParentIndex(e,t){return this.qe.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(Hs.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class Hv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new en($t.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new en($t.comparator)).toArray()}}const mp=new Uint8Array(0);class Gv{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Hv,this.Ge=new ua(r=>qd(r),(r,o)=>Yf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Ei(o)};return Om(e).put(u)}return de.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[$f(t),""],!1,!0);return Om(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(la(d.parent))}return r})}addFieldIndex(e,t){const r=Pm(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=Pm(e),o=yp(e),u=sh(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=sh(e);let o=!0;const u=new Map;return de.forEach(this.Qe(t),d=>this.je(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=Jt();const m=[];return de.forEach(u,(w,C)=>{var R;Oe("IndexedDbIndexManager",`Using index ${R=w,`id=${R.indexId}|cg=${R.collectionGroup}|f=${R.fields.map(Bt=>`${Bt.fieldPath}:${Bt.kind}`).join(",")}`} to execute ${qd(t)}`);const N=function(Bt,Mt){const Ut=rv(Mt);if(void 0===Ut)return null;for(const tn of wm(Bt,Ut.fieldPath))switch(tn.op){case"array-contains-any":return tn.value.arrayValue.values||[];case"array-contains":return[tn.value]}return null}(C,w),W=function(Bt,Mt){const Ut=new Map;for(const tn of ic(Mt))for(const Yi of wm(Bt,tn.fieldPath))switch(Yi.op){case"==":case"in":Ut.set(tn.fieldPath.canonicalString(),Yi.value);break;case"not-in":case"!=":return Ut.set(tn.fieldPath.canonicalString(),Yi.value),Array.from(Ut.values())}return null}(C,w),ee=function(Bt,Mt){const Ut=[];let tn=!0;for(const Yi of ic(Mt)){const _0=0===Yi.kind?Rw(Bt,Yi.fieldPath,Bt.startAt):ov(Bt,Yi.fieldPath,Bt.startAt);Ut.push(_0.value),tn&&(tn=_0.inclusive)}return new oa(Ut,tn)}(C,w),ge=function(Bt,Mt){const Ut=[];let tn=!0;for(const Yi of ic(Mt)){const _0=0===Yi.kind?ov(Bt,Yi.fieldPath,Bt.endAt):Rw(Bt,Yi.fieldPath,Bt.endAt);Ut.push(_0.value),tn&&(tn=_0.inclusive)}return new oa(Ut,tn)}(C,w),ke=this.We(w,C,ee),et=this.We(w,C,ge),Lt=this.ze(w,C,W),Vt=this.He(w.indexId,N,ke,ee.inclusive,et,ge.inclusive,Lt);return de.forEach(Vt,Bt=>r.Gt(Bt,t.limit).next(Mt=>{Mt.forEach(Ut=>{const tn=je.fromSegments(Ut.documentKey);d.has(tn)||(d=d.add(tn),m.push(tn))})}))}).next(()=>m)}return de.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),R=[];for(let N=0;N<w;++N){const W=t?this.Je(t[N/C]):mp,ee=this.Ye(e,W,r[N%C],o),ge=this.Xe(e,W,u[N%C],d),ke=m.map(et=>this.Ye(e,W,et,!0));R.push(...this.createRange(ee,ge,ke))}return R}Ye(e,t,r,o){const u=new mc(e,je.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new mc(e,je.empty(),t,r);return o?u.ke():u}je(e,t){const r=new vI(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const m of u)r.$e(m)&&(!d||m.fields.length>d.fields.length)&&(d=m);return d})}getIndexType(e,t){let r=2;return de.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?0!==r&&u.fields.length<function(d){let m=new en(fr.comparator),w=!1;for(const C of d.filters){const R=C;R.field.isKeyField()||("array-contains"===R.op||"array-contains-any"===R.op?w=!0:m=m.add(R.field))}for(const C of d.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new rh;for(const o of ic(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);gc.fe.Zt(u,d)}return r.Se()}Je(e){const t=new rh;return gc.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new rh;return gc.fe.Zt(rc(this.databaseId,t),r.Ne(function(o){const u=ic(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let o=[];o.push(new rh);let u=0;for(const d of ic(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&qf(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);gc.fe.Zt(m,C)}}return this.sn(o)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new rh;w.seed(m.Se()),gc.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Tr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Pm(e),o=yp(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return de.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,R){const N=R?new Zf(R.sequenceNumber,new Hs(fc(R.readTime),new je(la(R.documentKey)),R.largestBatchId)):Zf.empty(),W=C.fields.map(([ee,ge])=>new Gd(fr.fromServerFormat(ee),ge));return new Hd(C.indexId,C.collectionGroup,W,N)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:St(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Pm(e),u=yp(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>de.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:lu((W=r).readTime),documentKey:Ei(W.documentKey.path),largestBatchId:W.largestBatchId});var W})))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?de.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),de.forEach(m,w=>this.on(e,o,w).next(C=>{const R=this.un(u,w);return C.isEqual(R)?de.resolve():this.an(e,u,w,C,R)}))))})}cn(e,t,r,o){return sh(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return sh(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=sh(e);let u=new en(ih);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new mc(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new en(ih);const o=this.Ze(t,e);if(null==o)return r;const u=rv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(qf(d))for(const m of d.arrayValue.values||[])r=r.add(new mc(t.indexId,e.key,this.Je(m),o))}else r=r.add(new mc(t.indexId,e.key,mp,o));return r}an(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,R,N){const W=m.getIterator(),ee=w.getIterator();let ge=wo(W),ke=wo(ee);for(;ge||ke;){let et=!1,Lt=!1;if(ge&&ke){const Vt=C(ge,ke);Vt<0?Lt=!0:Vt>0&&(et=!0)}else null!=ge?Lt=!0:et=!0;et?(R(ke),ke=wo(ee)):Lt?(N(ge),ge=wo(W)):(ge=wo(W),ke=wo(ee))}}(o,u,ih,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),de.waitFor(d)}rn(e){let t=1;return yp(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>ih(d,m)).filter((d,m,w)=>!m||0!==ih(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=ih(d,e),w=ih(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,mp,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,mp,[]]));return u}getMinOffset(e,t){let r;return de.forEach(this.Qe(t),o=>this.je(e,o).next(u=>{u?(!r||Aw(u.indexState.offset,r)<0)&&(r=u.indexState.offset):r=Hs.min()})).next(()=>r)}}function Om(n){return Ar(n,"collectionParents")}function sh(n){return Ar(n,"indexEntries")}function Pm(n){return Ar(n,"indexConfiguration")}function yp(n){return Ar(n,"indexState")}const qv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zi(e,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function EI(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(R,N,W)=>(m++,W.delete()));u.push(w.next(()=>{It(1===m)}));const C=[];for(const R of t.mutations){const N=Nv(e,R.key.path,t.batchId);u.push(o.delete(N)),C.push(R.key)}return de.waitFor(u).next(()=>C)}function zv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Xe();e=n.noDocument}return JSON.stringify(e).length}Zi.DEFAULT_COLLECTION_PERCENTILE=10,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zi.DEFAULT=new Zi(41943040,Zi.DEFAULT_COLLECTION_PERCENTILE,Zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zi.DISABLED=new Zi(-1,0,0);class wI{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new wI(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rl(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=oh(e),d=rl(e);return d.add({}).next(m=>{It("number"==typeof m);const w=new Lv(m,t,r,o),C=function(W,ee,ge){const ke=ge.baseMutations.map(Lt=>Xd(W.Jt,Lt)),et=ge.mutations.map(Lt=>Xd(W.Jt,Lt));return{userId:ee,batchId:ge.batchId,localWriteTimeMs:ge.localWriteTime.toMillis(),baseMutations:ke,mutations:et}}(this.M,this.userId,w),R=[];let N=new en((W,ee)=>St(W.canonicalString(),ee.canonicalString()));for(const W of o){const ee=Nv(this.userId,W.key.path,m);N=N.add(W.key.path.popLast()),R.push(d.put(C)),R.push(u.put(ee,lI))}return N.forEach(W=>{R.push(this.indexManager.addToCollectionParentIndex(e,W))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),de.waitFor(R).next(()=>w)})}lookupMutationBatch(e,t){return rl(e).get(t).next(r=>r?(It(r.userId===this.userId),nh(this.M,r)):null)}fn(e,t){return this.ln[t]?de.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return rl(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(It(m.batchId>=r),u=nh(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rl(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rl(e).qt("userMutationsIndex",t).next(r=>r.map(o=>nh(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=fp(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return oh(e).Wt({range:o},(d,m,w)=>{const[C,R,N]=d,W=la(R);if(C===this.userId&&t.path.isEqual(W))return rl(e).get(N).next(ee=>{if(!ee)throw Xe();It(ee.userId===this.userId),u.push(nh(this.M,ee))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new en(St);const o=[];return t.forEach(u=>{const d=fp(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=oh(e).Wt({range:m},(C,R,N)=>{const[W,ee,ge]=C,ke=la(ee);W===this.userId&&u.path.isEqual(ke)?r=r.add(ge):N.done()});o.push(w)}),de.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=fp(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new en(St);return oh(e).Wt({range:d},(w,C,R)=>{const[N,W,ee]=w,ge=la(W);N===this.userId&&r.isPrefixOf(ge)?ge.length===o&&(m=m.add(ee)):R.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(rl(e).get(u).next(d=>{if(null===d)throw Xe();It(d.userId===this.userId),r.push(nh(this.M,d))}))}),de.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return EI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),de.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return oh(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=la(u[1]);o.push(w)}else m.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return Wv(e,this.userId,t)}wn(e){return II(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Wv(n,e,t){const r=fp(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return oh(n).Wt({range:u,jt:!0},(m,w,C)=>{const[R,N,W]=m;R===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function rl(n){return Ar(n,"mutations")}function oh(n){return Ar(n,"documentMutations")}function II(n){return Ar(n,"mutationQueues")}class ah{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ah(0)}static yn(){return new ah(-1)}}class MA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new ah(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>_t.fromTimestamp(new qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_p(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return _p(e).Wt((d,m)=>{const w=pc(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>de.waitFor(u)).next(()=>o)}forEachTarget(e,t){return _p(e).Wt((r,o)=>{const u=pc(o);t(u)})}pn(e){return KD(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}In(e,t){return KD(e).put("targetGlobalKey",t)}Tn(e,t){return _p(e).put(Uv(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=qd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return _p(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=pc(m);Yf(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=yc(e);return t.forEach(d=>{const m=Ei(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),de.waitFor(o)}removeMatchingKeys(e,t,r){const o=yc(e);return de.forEach(t,u=>{const d=Ei(u.path);return de.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=yc(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=yc(e);let u=Jt();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=la(d[1]),R=new je(C);u=u.add(R)}).next(()=>u)}containsKey(e,t){const r=Ei(t.path),o=IDBKeyRange.bound([r],[$f(r)],!1,!0);let u=0;return yc(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return _p(e).get(t).next(r=>r?pc(r):null)}}function _p(n){return Ar(n,"targets")}function KD(n){return Ar(n,"targetGlobal")}function yc(n){return Ar(n,"targetDocuments")}function _c(n){return uh.apply(this,arguments)}function uh(){return uh=(0,me.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==$D)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),uh.apply(this,arguments)}function bI([n,e],[t,r]){const o=St(n,t);return 0===o?St(e,r):o}class YD{constructor(e){this.An=e,this.buffer=new en(bI),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();bI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DI{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){dc(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield _c(o)}yield t.Sn(e)}))}}class vc{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve($s.A);const r=new YD(t);return this.Dn.forEachTarget(e,o=>r.Pn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.Pn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(qv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qv):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,C;const R=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),Y_()<=Hl.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-R}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-R}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class CI{constructor(e,t){this.db=e,this.garbageCollector=new vc(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return lh(e,r)}removeReference(e,t,r){return lh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lh(e,t)}On(e,t){return function(r,o){let u=!1;return II(r).zt(d=>Wv(r,d,o).next(m=>(m&&(u=!0),de.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,_t.min()),yc(e).delete([0,Ei(d.path)])))});o.push(w)}}).next(()=>de.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lh(e,t)}Mn(e,t){const r=yc(e);let o,u=$s.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==$s.A&&t(new je(la(o)),u),u=C,o=w):u=$s.A}).next(()=>{u!==$s.A&&t(new je(la(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lh(n,e){return yc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ei(e.path),sequenceNumber:r}));var r}class km{constructor(){this.changes=new ua(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class QD{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ca(e).put(r)}removeEntry(e,t,r){return ca(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Rm(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=dn.newInvalidDocument(t);return ca(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Lm(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:dn.newInvalidDocument(t)};return ca(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Lm(t))},(o,u)=>{r={document:this.$n(t,u),size:zv(u)}}).next(()=>r)}getEntries(e,t){let r=gs();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=gs(),o=new Fn(je.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,zv(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return de.resolve();let o=new en(XD);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Lm(o.first()),Lm(o.last())),d=o.getIterator();let m=d.getNext();return ca(e).Wt({index:"documentKeyIndex",range:u},(w,C,R)=>{const N=je.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&XD(m,N)<0;)r(m,null),m=d.getNext();m&&m.isEqual(N)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?R.Ut(Lm(m)):R.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),Rm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ca(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=gs();for(const w of d){const C=this.$n(je.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=gs();const d=JD(t,r),m=JD(t,Hs.max());return ca(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,R)=>{const N=this.$n(je.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&R.done()}).next(()=>u)}newChangeBuffer(e){return new Zv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Fm(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Fn(e,t){return Fm(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function qD(n,e){let t;if(e.document)t=dp(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=je.fromSegments(e.noDocument.path),o=fc(e.noDocument.readTime);t=dn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Xe();{const r=je.fromSegments(e.unknownDocument.path),o=fc(e.unknownDocument.version);t=dn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new qn(r[0],r[1]);return _t.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(_t.min()))return r}return dn.newInvalidDocument(e)}}class Zv extends km{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new ua(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new en((u,d)=>St(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=qs(this.Kn.M,d);o=o.add(u.path.popLast()),r+=zv(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=qs(this.Kn.M,d.convertToNoDocument(_t.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Fm(n){return Ar(n,"remoteDocumentGlobal")}function ca(n){return Ar(n,"remoteDocumentsV14")}function Lm(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JD(n,e){const t=e.documentKey.path.toArray();return[n,Rm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XD(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=St(t[u],r[u]),o)return o;return o=St(t.length,r.length),o||(o=St(t[t.length-2],r[r.length-2]),o||St(t[t.length-1],r[r.length-1]))}class xA{constructor(e){this.M=e}kt(e,t,r,o){const u=new pp("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rv,{unique:!0}),m.createObjectStore("documentMutations"),Kv(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=de.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Kv(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_t.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Rv,{unique:!0});const R=w.store("mutations"),N=C.map(W=>R.put(W));return de.waitFor(N)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:CA});w.createIndex("collectionPathOverlayIndex",Sm,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",TA,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:BD});w.createIndex("documentKeyIndex",jD),w.createIndex("collectionGroupIndex",yA)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:wA}).createIndex("sequenceNumberIndex",IA,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:bA}).createIndex("documentKeyIndex",DA,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=zv(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>de.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>de.forEach(m,w=>{It(w.userId===u.userId);const C=nh(this.M,w);return EI(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new $t(d),C=[0,Ei(w)];u.push(t.get(C).next(R=>R?de.resolve():t.put({targetId:0,path:Ei(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>de.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:EA});const r=t.store("collectionParents"),o=new Hv,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:Ei(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new $t(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const R=la(m);return u(R.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=pc(o),d=Uv(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new je($t.fromString(C.document.name).popFirst(5)):C.noDocument?je.fromSegments(C.noDocument.path):C.unknownDocument?je.fromSegments(C.unknownDocument.path):Xe()).path.toArray();var C;const R={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(R))}).next(()=>de.waitFor(o))}}function Kv(n){n.createObjectStore("targetDocuments",{keyPath:_A}).createIndex("documentTargetsIndex",vA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",cI,{unique:!0}),n.createObjectStore("targetGlobal")}const Yv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Qv{constructor(e,t,r,o,u,d,m,w,C,R,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=R,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=W=>Promise.resolve(),!Qv.vt())throw new Se(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CI(this,o),this.hs=t+"main",this.M=new xm(w),this.ls=new Gs(this.hs,this.ts,new xA(this.M)),this.fs=new MA(this.referenceDelegate,this.M),this.ds=new QD(this.M),this._s=new pI,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===R&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ae.FAILED_PRECONDITION,Yv);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new $s(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(dc(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return vp(e).get("owner").next(t=>de.resolve(this.Ps(t)))}Vs(e){return Vm(e).delete(this.clientId)}vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Ar(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return de.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?de.resolve(!0):vp(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Se(ae.FAILED_PRECONDITION,Yv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vm(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new GD(t,$s.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Vm(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return wI.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Gv(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return gp.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?dI:13===d?kv:12===d?Pv:11===d?Ov:void Xe();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new GD(w,this.es?this.es.next():$s.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Se(ae.FAILED_PRECONDITION,$D);return r(m)}).next(C=>this.bs(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return vp(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ae.FAILED_PRECONDITION,Yv)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vp(e).put("owner",t)}static vt(){return Gs.vt()}Rs(e){const t=vp(e);return t.get("owner").next(r=>this.Ps(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(er(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Pt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return er("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vp(n){return Ar(n,"owner")}function Vm(n){return Ar(n,"clientMetadata")}function Um(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class TI{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return je.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):Lw(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new je(t)).next(r=>{let o=sp();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=sp();return this.indexManager.getCollectionParents(e,o).next(d=>de.forEach(d,m=>{const w=(C=t,R=m.child(o),new Wi(R,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,R;return this.zs(e,w,r).next(C=>{C.forEach((R,N)=>{u=u.insert(R,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=dn.newInvalidDocument(w),o=o.insert(w,C)),tp(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{hv(t,d)||(o=o.remove(u))}),o))}}class Bm{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=Jt(),o=Jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Bm(e,t.fromCache,r,o)}}class AI{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,o){return this.ti(e,t).next(u=>u||this.ei(e,t,o,r)).next(u=>u||this.ni(e,t))}ti(e,t){return de.resolve(null)}ei(e,t,r,o){return function fA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||o.isEqual(_t.min())?this.ni(e,t):this.Zs.Ks(e,r).next(u=>{const d=this.si(t,u);return this.ii(t,d,r,o)?this.ni(e,t):(Y_()<=Hl.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),dv(t)),this.ri(e,d,t,iv(o,-1)))})}si(e,t){let r=new en(Bw(e));return t.forEach((o,u)=>{hv(e,u)&&(r=r.add(u))}),r}ii(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ni(e,t){return Y_()<=Hl.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",dv(t)),this.Zs.Qs(e,t,Hs.min())}ri(e,t,r,o){return this.Zs.Qs(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class eC{constructor(e,t,r,o){this.persistence=e,this.oi=t,this.M=o,this.ui=new Fn(St),this.ai=new ua(u=>qd(u),Yf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new TI(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Jv(n,e,t,r){return new eC(n,e,t,r)}function jm(n,e){return SI.apply(this,arguments)}function SI(){return SI=(0,me.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.li(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=Jt();for(const C of o){d.push(C.batchId);for(const R of C.mutations)w=w.add(R.key)}for(const C of u){m.push(C.batchId);for(const R of C.mutations)w=w.add(R.key)}return t.fi.Ks(r,w).next(C=>({di:C,removedBatchIds:d,addedBatchIds:m}))})})}),SI.apply(this,arguments)}function MI(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.hi.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const R=w.batch,N=R.keys();let W=de.resolve();return N.forEach(ee=>{W=W.next(()=>C.getEntry(m,ee)).next(ge=>{const ke=w.docVersions.get(ee);It(null!==ke),ge.version.compareTo(ke)<0&&(R.applyToRemoteDocument(ge,w),ge.isValidDocument()&&(ge.setReadTime(w.commitVersion),C.addEntry(ge)))})}),W.next(()=>d.Bs.removeMutationBatch(m,R))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,o))})}function $m(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function tC(n,e){const t=qe(n),r=e.snapshotVersion;let o=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.hi.newChangeBuffer({trackRemovals:!0});o=t.ui;const m=[];e.targetChanges.forEach((C,R)=>{const N=o.get(R);if(!N)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,R).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,R)));let W=N.withSequenceNumber(u.currentSequenceNumber);var ee,ge,ke;e.targetMismatches.has(R)?W=W.withResumeToken(pr.EMPTY_BYTE_STRING,_t.min()).withLastLimboFreeSnapshotVersion(_t.min()):C.resumeToken.approximateByteSize()>0&&(W=W.withResumeToken(C.resumeToken,r)),o=o.insert(R,W),ge=W,ke=C,(0===(ee=N).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-ee.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,W))});let w=gs();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(xI(u,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(_t.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(R=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return de.waitFor(m).next(()=>d.apply(u)).next(()=>t.fi.Gs(u,w)).next(()=>w)}).then(u=>(t.ui=o,u))}function xI(n,e,t){let r=Jt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=gs();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(_t.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Oe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function RA(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Ep(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,de.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new nl(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function wp(n,e,t){return Xv.apply(this,arguments)}function Xv(){return Xv=(0,me.Z)(function*(n,e,t){const r=qe(n),o=r.ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!dc(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ui=r.ui.remove(e),r.ai.delete(o.target)}),Xv.apply(this,arguments)}function Hm(n,e,t){const r=qe(n);let o=_t.min(),u=Jt();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const R=qe(m),N=R.ai.get(C);return void 0!==N?de.resolve(R.ui.get(N)):R.fs.getTargetData(w,C)}(r,d,bo(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.oi.Qs(d,e,t?o:_t.min(),t?u:Jt())).next(m=>(iC(r,Uw(e),m),{documents:m,_i:u})))}function nC(n,e){const t=qe(n),r=qe(t.fs),o=t.ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function rC(n,e){const t=qe(n),r=t.ci.get(e)||_t.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.hi.getAllFromCollectionGroup(o,e,iv(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(iC(t,e,o),o))}function iC(n,e,t){let r=_t.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ci.set(e,r)}function RI(){return RI=(0,me.Z)(function*(n,e,t,r){const o=qe(n);let u=Jt(),d=gs();for(const C of t){const R=e.wi(C.metadata.name);C.document&&(u=u.add(R));const N=e.mi(C);N.setReadTime(e.gi(C.metadata.readTime)),d=d.insert(R,N)}const m=o.hi.newChangeBuffer({trackRemovals:!0}),w=yield Ep(o,(C=r,bo(Io($t.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>xI(C,m,d).next(R=>(m.apply(C),R)).next(R=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,u,w.targetId)).next(()=>o.fi.Gs(C,R)).next(()=>R)))}),RI.apply(this,arguments)}function sC(n,e){return NI.apply(this,arguments)}function NI(){return NI=(0,me.Z)(function*(n,e,t=Jt()){const r=yield Ep(n,bo(Nm(e.bundledQuery))),o=qe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=Ln(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(pr.EMPTY_BYTE_STRING,d);return o.ui=o.ui.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),NI.apply(this,arguments)}class OA{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return de.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:Ln(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Nm(r.bundledQuery),readTime:Ln(r.readTime)}),de.resolve();var r}}class PA{constructor(){this.overlays=new Fn(je.comparator),this.Ii=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Ii.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ii.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const o=op(),u=t.length+1,d=new je(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return de.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Fn((C,R)=>C-R);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let R=u.get(C.largestBatchId);null===R&&(R=op(),u=u.insert(C.largestBatchId,R)),R.set(C.getKey(),C)}}const m=op(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,R)=>m.set(C,R)),!(m.size()>=o)););return de.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.Ii.get(o.largestBatchId).delete(r.key);this.Ii.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new fI(t,r));let u=this.Ii.get(t);void 0===u&&(u=Jt(),this.Ii.set(t,u)),this.Ii.set(t,u.add(r.key))}}class OI{constructor(){this.Ti=new en(i.Ei),this.Ai=new en(i.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new i(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new i(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new je(new $t([])),r=new i(t,e),o=new i(t,e+1),u=[];return this.Ai.forEachInRange([r,o],d=>{this.Pi(d),u.push(d.key)}),u}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new je(new $t([])),r=new i(t,e),o=new i(t,e+1);let u=Jt();return this.Ai.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new i(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class i{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return je.comparator(e.key,t.key)||St(e.Ci,t.Ci)}static Ri(e,t){return St(e.Ci,t.Ci)||je.comparator(e.key,t.key)}}class s{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new en(i.Ei)}checkEmpty(e){return de.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.xi;this.xi++;const d=new Lv(u,t,r,o);this.Bs.push(d);for(const m of o)this.Ni=this.Ni.add(new i(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return de.resolve(d)}lookupMutationBatch(e,t){return de.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Mi(t+1),u=o<0?0:o;return de.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return de.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new i(t,0),o=new i(t,Number.POSITIVE_INFINITY),u=[];return this.Ni.forEachInRange([r,o],d=>{const m=this.ki(d.Ci);u.push(m)}),de.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new en(St);return t.forEach(o=>{const u=new i(o,0),d=new i(o,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([u,d],m=>{r=r.add(m.Ci)})}),de.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;je.isDocumentKey(u)||(u=u.child(""));const d=new i(new je(u),0);let m=new en(St);return this.Ni.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.Ci)),!0)},d),de.resolve(this.Oi(m))}Oi(e){const t=[];return e.forEach(r=>{const o=this.ki(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return de.forEach(t.mutations,o=>{const u=new i(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new i(t,0),o=this.Ni.firstAfterOrEqual(r);return de.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return de.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class a{constructor(e){this.$i=e,this.docs=new Fn(je.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let r=gs();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():dn.newInvalidDocument(o))}),de.resolve(r)}getAllFromCollection(e,t,r){let o=gs();const u=new je(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Aw(AD(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return de.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Xe()}Bi(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new l(this)}getSize(e){return de.resolve(this.size)}}class l extends km{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class c{constructor(e){this.persistence=e,this.Li=new ua(t=>qd(t),Yf),this.lastRemoteSnapshotVersion=_t.min(),this.highestTargetId=0,this.Ui=0,this.qi=new OI,this.targetCount=0,this.Ki=ah.gn()}forEachTarget(e,t){return this.Li.forEach((r,o)=>t(o)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),de.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new ah(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Tn(t),de.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Li.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Li.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),de.waitFor(u).next(()=>o)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),de.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.qi.containsKey(t))}}class g{constructor(e,t){this.Gi={},this.overlays={},this.es=new $s(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new c(this),this.indexManager=new ZD,this.ds=new a(r=>this.referenceDelegate.Qi(r)),this.M=new xm(t),this._s=new OA(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new PA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new s(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new _(this.es.next());return this.referenceDelegate.ji(),r(o).next(u=>this.referenceDelegate.Wi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}zi(e,t){return de.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class _ extends Mm{constructor(e){super(),this.currentSequenceNumber=e}}class E{constructor(e){this.persistence=e,this.Hi=new OI,this.Ji=null}static Yi(e){return new E(e)}get Xi(){if(this.Ji)return this.Ji;throw Xe()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),de.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(o=>this.Xi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Xi,r=>{const o=je.fromPath(r);return this.Zi(e,o).next(u=>{u||t.removeEntry(o,_t.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return de.or([()=>de.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function I(n,e){return`firestore_clients_${n}_${e}`}function A(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function S(n,e){return`firestore_targets_${n}_${e}`}class k{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static tr(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Se(o.error.code,o.error.message))),d?new k(e,t,o.state,u):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class U{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Se(r.error.code,r.error.message))),u?new U(e,r.state,o):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Y{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Yd();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=X_(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new Y(e,u):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ye{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ye(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ne{constructor(){this.activeTargetIds=Yd()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Be{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Fn(St),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.hr=I(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Ne),this.dr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.ir)continue;const u=e.getItem(I(e.persistenceKey,o));if(u){const d=Y.tr(o,u);d&&(e.ar=e.ar.insert(d.clientId,d))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const o=e.pr(r);o&&e.Ir(o)}for(const o of e.cr)e.ur(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(S(this.persistenceKey,e));if(r){const o=U.tr(e,r);o&&(t=o.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(S(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ar(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Sr(o,null)}{const o=t.Dr(r.key,r.newValue);if(o)return t.Sr(o.clientId,o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Cr(r.key,r.newValue);if(o)return t.Nr(o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.kr(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.mr){if(null!==r.newValue){const o=t.pr(r.newValue);if(o)return t.Ir(o)}}else if(r.key===t.lr){const o=function(u){let d=$s.A;if(null!=u)try{const m=JSON.parse(u);It("number"==typeof m),d=m}catch(m){er("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==$s.A&&t.sequenceNumberHandler(o)}else if(r.key===t.gr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const o=new k(this.currentUser,e,t,r),u=A(this.persistenceKey,this.currentUser,e);this.setItem(u,o.er())}Ar(e){const t=A(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const o=S(this.persistenceKey,e),u=new U(e,t,r);this.setItem(o,u.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Y.tr(r,t)}Cr(e,t){const r=this._r.exec(e),o=Number(r[1]);return k.tr(new br(void 0!==r[2]?r[2]:null),o,t)}kr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return U.tr(o,t)}pr(e){return ye.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Tr(this.ar),u=this.Tr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Lr(d,m).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Yd();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Qe{constructor(){this.Ur=new Ne,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Ne,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ce{Kr(e){}shutdown(){}}class ot{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const kt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Xt{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class ms extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,o,u){const d=this.ho(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.lo(m,o,u),this.fo(e,d,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw jf("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}_o(e,t,r,o,u){return this.co(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Fd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.uo}/v1/${t}:${kt[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const m=new fw;m.listenOnce(lA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case En.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case En.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new Se(ae.DEADLINE_EXCEEDED,"Request time out"));break;case En.HTTP_ERROR:const R=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',R,"response text:",m.getResponseText()),R>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const W=function(ee){const ge=ee.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ge)>=0?ge:ae.UNKNOWN}(N.status);d(new Se(W,N.message))}else d(new Se(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Se(ae.UNAVAILABLE,"Connection failed."));break;default:Xe()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=gm(),d=mm(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new _D({})),this.lo(m.initMessageHeaders,t,r),(0,Pt.uI)()||(0,Pt.b$)()||(0,Pt.d)()||(0,Pt.w1)()||(0,Pt.Mn)()||(0,Pt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let R=!1,N=!1;const W=new Xt({Jr:ge=>{N?Oe("Connection","Not sending because WebChannel is closed:",ge):(R||(Oe("Connection","Opening WebChannel transport."),C.open(),R=!0),Oe("Connection","WebChannel sending:",ge),C.send(ge))},Yr:()=>C.close()}),ee=(ge,ke,et)=>{ge.listen(ke,Lt=>{try{et(Lt)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return ee(C,Uf.EventType.OPEN,()=>{N||Oe("Connection","WebChannel transport opened.")}),ee(C,Uf.EventType.CLOSE,()=>{N||(N=!0,Oe("Connection","WebChannel transport closed"),W.ro())}),ee(C,Uf.EventType.ERROR,ge=>{N||(N=!0,jf("Connection","WebChannel transport errored:",ge),W.ro(new Se(ae.UNAVAILABLE,"The operation could not be completed")))}),ee(C,Uf.EventType.MESSAGE,ge=>{var ke;if(!N){const et=ge.data[0];It(!!et);const Lt=et,Vt=Lt.error||(null===(ke=Lt[0])||void 0===ke?void 0:ke.error);if(Vt){Oe("Connection","WebChannel received error:",Vt);const Bt=Vt.status;let Mt=function(tn){const Yi=zn[tn];if(void 0!==Yi)return OD(Yi)}(Bt),Ut=Vt.message;void 0===Mt&&(Mt=ae.INTERNAL,Ut="Unknown error status: "+Bt+" with message "+Vt.message),N=!0,W.ro(new Se(Mt,Ut)),C.close()}else Oe("Connection","WebChannel received:",et),W.oo(et)}}),ee(d,dw.STAT_EVENT,ge=>{ge.stat===hw.PROXY?Oe("Connection","Detected buffering proxy"):ge.stat===hw.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{W.io()},0),W}}function il(){return"undefined"!=typeof window?window:null}function ch(){return"undefined"!=typeof document?document:null}function Ec(n){return new Jd(n,!0)}class Ip{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Gm{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Vo=r,this.vo=o,this.So=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Ip(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,me.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Do===t&&this.Qo(r,o)},r=>{e(()=>{const o=new Se(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(o)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(o=>{r(()=>this.jo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.No.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}jo(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e0 extends Gm{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function gA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:Xe(),o=e.targetChange.targetIds||[],u=function(w,C){return w.N?(It(void 0===C||"string"==typeof C),pr.fromBase64String(C||"")):(It(void 0===C||C instanceof Uint8Array),pr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ae.UNKNOWN:OD(w.code);return new Se(C,w.message||"")}(d);t=new eI(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Do(n,r.document.name),u=Ln(r.document.updateTime),d=new Cr({mapValue:{fields:r.document.fields}}),m=dn.newFoundDocument(o,u,d);t=new up(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Do(n,r.document),u=r.readTime?Ln(r.readTime):_t.min(),d=dn.newNoDocument(o,u);t=new up([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Do(n,r.document);t=new up([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Xe();{const r=e.filter,u=new gv(r.count||0);t=new _v(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return _t.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?_t.min():u.readTime?Ln(u.readTime):_t.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=lc(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=Em(m)?{documents:hp(o,m)}:{query:Av(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=rI(o,u.resumeToken):u.snapshotVersion.compareTo(_t.min())>0&&(d.readTime=lp(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function Sv(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=lc(this.M),t.removeTarget=e,this.Lo(t)}}class t0 extends Gm{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function sI(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=Ln(r.updateTime?r.updateTime:o);return u.isEqual(_t.min())&&(u=Ln(o)),new ep(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ln(e.commitTime);return this.listener.tu(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=lc(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Xd(this.M,r))};this.Lo(t)}}class n0 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=o,this.su=!1}iu(){if(this.su)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So.co(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ae.UNKNOWN,o.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.So._o(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ae.UNKNOWN,o.toString())})}terminate(){this.su=!0}}class r0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(er(t),this.uu=!1):Oe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class s0{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=u,this.gu.Kr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;dh(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(C){const R=qe(C);R.wu.add(4),yield qm(R),R.yu.set("Unknown"),R.wu.delete(4),yield o0(R)}),function(C){return w.apply(this,arguments)})(d))}))}),this.yu=new r0(r,o)}}function o0(n){return oC.apply(this,arguments)}function oC(){return oC=(0,me.Z)(function*(n){if(dh(n))for(const e of n.mu)yield e(!0)}),oC.apply(this,arguments)}function qm(n){return aC.apply(this,arguments)}function aC(){return aC=(0,me.Z)(function*(n){for(const e of n.mu)yield e(!1)}),aC.apply(this,arguments)}function PI(n,e){const t=qe(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),cC(t)?lC(t):Wm(t).Mo()&&uC(t,e))}function a0(n,e){const t=qe(n),r=Wm(t);t._u.delete(e),r.Mo()&&kA(t,e),0===t._u.size&&(r.Mo()?r.$o():dh(t)&&t.yu.set("Unknown"))}function uC(n,e){n.pu.Z(e.targetId),Wm(n).Ho(e)}function kA(n,e){n.pu.Z(e),Wm(n).Jo(e)}function lC(n){n.pu=new tI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),Wm(n).start(),n.yu.au()}function cC(n){return dh(n)&&!Wm(n).ko()&&n._u.size>0}function dh(n){return 0===qe(n).wu.size}function FA(n){n.pu=void 0}function VM(n){return dC.apply(this,arguments)}function dC(){return dC=(0,me.Z)(function*(n){n._u.forEach((e,t)=>{uC(n,e)})}),dC.apply(this,arguments)}function UM(n,e){return hC.apply(this,arguments)}function hC(){return hC=(0,me.Z)(function*(n,e){FA(n),cC(n)?(n.yu.lu(e),lC(n)):n.yu.set("Unknown")}),hC.apply(this,arguments)}function BM(n,e,t){return fC.apply(this,arguments)}function fC(){return fC=(0,me.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof eI&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o._u.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o._u.delete(m),o.pu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield kI(n,r)}else if(e instanceof up?n.pu.ut(e):e instanceof _v?n.pu._t(e):n.pu.ht(e),!t.isEqual(_t.min()))try{const r=yield $m(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.pu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o._u.get(w);C&&o._u.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o._u.get(m);if(!w)return;o._u.set(m,w.withResumeToken(pr.EMPTY_BYTE_STRING,w.snapshotVersion)),kA(o,m);const C=new nl(w.target,m,1,w.sequenceNumber);uC(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield kI(n,r)}var r}),fC.apply(this,arguments)}function kI(n,e,t){return pC.apply(this,arguments)}function pC(){return pC=(0,me.Z)(function*(n,e,t){if(!dc(e))throw e;n.wu.add(1),yield qm(n),n.yu.set("Offline"),t||(t=()=>$m(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield o0(n)}))}),pC.apply(this,arguments)}function LA(n,e){return e().catch(t=>kI(n,t,e))}function zm(n){return gC.apply(this,arguments)}function gC(){return gC=(0,me.Z)(function*(n){const e=qe(n),t=hh(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;jM(e);)try{const o=yield RA(e.localStore,r);if(null===o){0===e.du.length&&t.$o();break}r=o.batchId,$M(e,o)}catch(o){yield kI(e,o)}VA(e)&&UA(e)}),gC.apply(this,arguments)}function jM(n){return dh(n)&&n.du.length<10}function $M(n,e){n.du.push(e);const t=hh(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function VA(n){return dh(n)&&!hh(n).ko()&&n.du.length>0}function UA(n){hh(n).start()}function HM(n){return mC.apply(this,arguments)}function mC(){return mC=(0,me.Z)(function*(n){hh(n).nu()}),mC.apply(this,arguments)}function GM(n){return yC.apply(this,arguments)}function yC(){return yC=(0,me.Z)(function*(n){const e=hh(n);for(const t of n.du)e.Zo(t.mutations)}),yC.apply(this,arguments)}function qM(n,e,t){return _C.apply(this,arguments)}function _C(){return _C=(0,me.Z)(function*(n,e,t){const r=n.du.shift(),o=Vv.from(r,e,t);yield LA(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield zm(n)}),_C.apply(this,arguments)}function zM(n,e){return vC.apply(this,arguments)}function vC(){return vC=(0,me.Z)(function*(n,e){var t;e&&hh(n).Xo&&(yield(t=(0,me.Z)(function*(r,o){if(Jw(u=o.code)&&u!==ae.ABORTED){const d=r.du.shift();hh(r).Fo(),yield LA(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield zm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),VA(n)&&UA(n)}),vC.apply(this,arguments)}function BA(n,e){return EC.apply(this,arguments)}function EC(){return EC=(0,me.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=dh(t);t.wu.add(3),yield qm(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield o0(t)}),EC.apply(this,arguments)}function wC(n,e){return IC.apply(this,arguments)}function IC(){return IC=(0,me.Z)(function*(n,e){const t=qe(n);e?(t.wu.delete(2),yield o0(t)):e||(t.wu.add(2),yield qm(t),t.yu.set("Unknown"))}),IC.apply(this,arguments)}function Wm(n){return n.Iu||(n.Iu=function(e,t,r){const o=qe(e);return o.iu(),new e0(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:VM.bind(null,n),eo:UM.bind(null,n),zo:BM.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Fo(),cC(n)?lC(n):n.yu.set("Unknown")):(yield n.Iu.stop(),FA(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function hh(n){return n.Tu||(n.Tu=function(e,t,r){const o=qe(e);return o.iu(),new t0(t,o.So,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Xr:HM.bind(null,n),eo:zM.bind(null,n),eu:GM.bind(null,n),tu:qM.bind(null,n)}),n.mu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Tu.Fo(),yield zm(n)):(yield n.Tu.stop(),n.du.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class bC{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new bC(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(n,e){if(er("AsyncQueue",`${e}: ${n}`),dc(n))return new Se(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Km{constructor(e){this.comparator=e?(t,r)=>e(t,r)||je.comparator(t.key,r.key):(t,r)=>je.comparator(t.key,r.key),this.keyedMap=sp(),this.sortedSet=new Fn(this.comparator)}static emptySet(e){return new Km(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Km)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Km;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class jA{constructor(){this.Eu=new Fn(je.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Xe():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ym{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Ym(e,t,Km.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class WM{constructor(){this.Ru=void 0,this.listeners=[]}}class ZM{constructor(){this.queries=new ua(e=>Vw(e),oc),this.onlineState="Unknown",this.bu=new Set}}function DC(n,e){return CC.apply(this,arguments)}function CC(){return CC=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new WM),o)try{u.Ru=yield t.onListen(r)}catch(d){const m=Zm(d,`Initialization of query '${dv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Pu(t.onlineState),u.Ru&&e.Vu(u.Ru)&&SC(t)}),CC.apply(this,arguments)}function TC(n,e){return AC.apply(this,arguments)}function AC(){return AC=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),AC.apply(this,arguments)}function KM(n,e){const t=qe(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Vu(o)&&(r=!0);d.Ru=o}}r&&SC(t)}function YM(n,e,t){const r=qe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function SC(n){n.bu.forEach(e=>{e.next()})}class MC{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ym(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=Ym.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class QM{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class $A{constructor(e){this.M=e}wi(e){return Do(this.M,e)}mi(e){return e.metadata.exists?dp(this.M,e.document,!1):dn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Ln(e)}}class JM{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HA(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=$t.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new $A(this.M);for(const o of e)if(o.metadata.queries){const u=r.wi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||Jt()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function NA(n,e,t,r){return RI.apply(this,arguments)}(e.localStore,new $A(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const o of e.queries)yield sC(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function HA(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class GA{constructor(e){this.key=e}}class qA{constructor(e){this.key=e}}class zA{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=Jt(),this.mutatedKeys=Jt(),this.Gu=Bw(e),this.Qu=new Km(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new jA,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((R,N)=>{const W=o.get(R),ee=hv(this.query,N)?N:null,ge=!!W&&this.mutatedKeys.has(W.key),ke=!!ee&&(ee.hasLocalMutations||this.mutatedKeys.has(ee.key)&&ee.hasCommittedMutations);let et=!1;W&&ee?W.data.isEqual(ee.data)?ge!==ke&&(r.track({type:3,doc:ee}),et=!0):this.Hu(W,ee)||(r.track({type:2,doc:ee}),et=!0,(w&&this.Gu(ee,w)>0||C&&this.Gu(ee,C)<0)&&(m=!0)):!W&&ee?(r.track({type:0,doc:ee}),et=!0):W&&!ee&&(r.track({type:1,doc:W}),et=!0,(w||C)&&(m=!0)),et&&(ee?(d=d.add(ee),u=ke?u.add(R):u.delete(R)):(d=d.delete(R),u=u.delete(R)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const R="F"===this.query.limitType?d.last():d.first();d=d.delete(R.key),u=u.delete(R.key),r.track({type:1,doc:R})}return{Qu:d,zu:r,ii:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Au();u.sort((C,R)=>function(N,W){const ee=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe()}};return ee(N)-ee(W)}(C.type,R.type)||this.Gu(C.doc,R.doc)),this.Ju(r);const d=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new Ym(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1),Xu:d}:{Xu:d}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new jA,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new qA(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new GA(r))}),t}ta(e){this.Uu=e._i,this.Ku=Jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return Ym.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class XM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ex{constructor(e){this.key=e,this.na=!1}}class tx{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sa={},this.ia=new ua(m=>Vw(m),oc),this.ra=new Map,this.oa=new Set,this.ua=new Fn(je.comparator),this.aa=new Map,this.ca=new OI,this.ha={},this.la=new Map,this.fa=ah.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function nx(n,e){return xC.apply(this,arguments)}function xC(){return xC=(0,me.Z)(function*(n,e){const t=XC(n);let r,o;const u=t.ia.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ea();else{const d=yield Ep(t.localStore,bo(e));t.isPrimaryClient&&PI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield RC(t,e,r,"current"===m)}return o}),xC.apply(this,arguments)}function RC(n,e,t,r){return NC.apply(this,arguments)}function NC(){return NC=(0,me.Z)(function*(n,e,t,r){n._a=(R,N,W)=>{return(ee=(0,me.Z)(function*(ge,ke,et,Lt){let Vt=ke.view.Wu(et);Vt.ii&&(Vt=yield Hm(ge.localStore,ke.query,!1).then(({documents:Ut})=>ke.view.Wu(Ut,Vt)));const Bt=Lt&&Lt.targetChanges.get(ke.targetId),Mt=ke.view.applyChanges(Vt,ge.isPrimaryClient,Bt);return $C(ge,ke.targetId,Mt.Xu),Mt.snapshot}),function(ge,ke,et,Lt){return ee.apply(this,arguments)})(n,R,N,W);var ee};const o=yield Hm(n.localStore,e,!0),u=new zA(e,o._i),d=u.Wu(o.documents),m=ap.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);$C(n,t,w.Xu);const C=new XM(e,t,u);return n.ia.set(e,C),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),w.snapshot}),NC.apply(this,arguments)}function rx(n,e){return OC.apply(this,arguments)}function OC(){return OC=(0,me.Z)(function*(n,e){const t=qe(n),r=t.ia.get(e),o=t.ra.get(r.targetId);if(o.length>1)return t.ra.set(r.targetId,o.filter(u=>!oc(u,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),a0(t.remoteStore,r.targetId),Qm(t,r.targetId)}).catch(_c))):(Qm(t,r.targetId),yield wp(t.localStore,r.targetId,!0))}),OC.apply(this,arguments)}function PC(){return PC=(0,me.Z)(function*(n,e,t){const r=eT(n);try{const o=yield function(u,d){const m=qe(u),w=qn.now(),C=d.reduce((N,W)=>N.add(W.key),Jt());let R;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.fi.Ks(N,C).next(W=>{R=W;const ee=[];for(const ge of d){const ke=np(ge,R.get(ge.key));null!=ke&&ee.push(new aa(ge.key,ke,vm(ke.value.mapValue),tr.exists(!0)))}return m.Bs.addMutationBatch(N,w,ee,d)})).then(N=>(N.applyToLocalDocumentSet(R),{batchId:N.batchId,changes:R}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ha[u.currentUser.toKey()];w||(w=new Fn(St)),w=w.insert(d,m),u.ha[u.currentUser.toKey()]=w}(r,o.batchId,t),yield wc(r,o.changes),yield zm(r.remoteStore)}catch(o){const u=Zm(o,"Failed to persist write");t.reject(u)}}),PC.apply(this,arguments)}function WA(n,e){return kC.apply(this,arguments)}function kC(){return kC=(0,me.Z)(function*(n,e){const t=qe(n);try{const r=yield tC(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.aa.get(u);d&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.na=!0:o.modifiedDocuments.size>0?It(d.na):o.removedDocuments.size>0&&(It(d.na),d.na=!1))}),yield wc(t,r,e)}catch(r){yield _c(r)}}),kC.apply(this,arguments)}function ZA(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ia.forEach((u,d)=>{const m=d.view.Pu(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=qe(u);m.onlineState=d;let w=!1;m.queries.forEach((C,R)=>{for(const N of R.listeners)N.Pu(d)&&(w=!0)}),w&&SC(m)}(r.eventManager,e),o.length&&r.sa.zo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sx(n,e,t){return FC.apply(this,arguments)}function FC(){return FC=(0,me.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.aa.get(e),u=o&&o.key;if(u){let d=new Fn(je.comparator);d=d.insert(u,dn.newNoDocument(u,_t.min()));const m=Jt().add(u),w=new Qd(_t.min(),new Map,new en(St),d,m);yield WA(r,w),r.ua=r.ua.remove(u),r.aa.delete(e),HC(r)}else yield wp(r.localStore,e,!1).then(()=>Qm(r,e,t)).catch(_c)}),FC.apply(this,arguments)}function ox(n,e){return LC.apply(this,arguments)}function LC(){return LC=(0,me.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const o=yield MI(t.localStore,e);jC(t,r,null),BC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wc(t,o)}catch(o){yield _c(o)}}),LC.apply(this,arguments)}function ax(n,e,t){return VC.apply(this,arguments)}function VC(){return VC=(0,me.Z)(function*(n,e,t){const r=qe(n);try{const o=yield function(u,d){const m=qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(R=>(It(null!==R),C=R.keys(),m.Bs.removeMutationBatch(w,R))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.fi.Ks(w,C))})}(r.localStore,e);jC(r,e,t),BC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wc(r,o)}catch(o){yield _c(o)}}),VC.apply(this,arguments)}function UC(){return UC=(0,me.Z)(function*(n,e){const t=qe(n);dh(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=qe(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.la.get(r)||[];o.push(e),t.la.set(r,o)}catch(r){const o=Zm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),UC.apply(this,arguments)}function BC(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function jC(n,e,t){const r=qe(n);let o=r.ha[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ha[r.currentUser.toKey()]=o}}function Qm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||KA(n,r)})}function KA(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(a0(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),HC(n))}function $C(n,e,t){for(const r of t)r instanceof GA?(n.ca.addReference(r.key,e),lx(n,r)):r instanceof qA?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||KA(n,r.key)):Xe()}function lx(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.oa.add(r),HC(n))}function HC(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new je($t.fromString(e)),r=n.fa.next();n.aa.set(r,new ex(t)),n.ua=n.ua.insert(t,r),PI(n.remoteStore,new nl(bo(Io(t.path)),r,2,$s.A))}}function wc(n,e,t){return GC.apply(this,arguments)}function GC(){return GC=(0,me.Z)(function*(n,e,t){const r=qe(n),o=[],u=[],d=[];var m;r.ia.isEmpty()||(r.ia.forEach((m,w)=>{d.push(r._a(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const R=Bm.Ys(w.targetId,C);u.push(R)}}))}),yield Promise.all(d),r.sa.zo(o),yield(m=(0,me.Z)(function*(w,C){const R=qe(w);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>de.forEach(C,W=>de.forEach(W.Hs,ee=>R.persistence.referenceDelegate.addReference(N,W.targetId,ee)).next(()=>de.forEach(W.Js,ee=>R.persistence.referenceDelegate.removeReference(N,W.targetId,ee)))))}catch(N){if(!dc(N))throw N;Oe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const W=N.targetId;if(!N.fromCache){const ee=R.ui.get(W),ke=ee.withLastLimboFreeSnapshotVersion(ee.snapshotVersion);R.ui=R.ui.insert(W,ke)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),GC.apply(this,arguments)}function cx(n,e){return qC.apply(this,arguments)}function qC(){return qC=(0,me.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield jm(t.localStore,e);t.currentUser=e,(o=t).la.forEach(d=>{d.forEach(m=>{m.reject(new Se(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wc(t,r.di)}var o}),qC.apply(this,arguments)}function dx(n,e){const t=qe(n),r=t.aa.get(e);if(r&&r.na)return Jt().add(r.key);{let o=Jt();const u=t.ra.get(e);if(!u)return o;for(const d of u){const m=t.ia.get(d);o=o.unionWith(m.view.ju)}return o}}function hx(n,e){return zC.apply(this,arguments)}function zC(){return zC=(0,me.Z)(function*(n,e){const t=qe(n),r=yield Hm(t.localStore,e.query,!0),o=e.view.ta(r);return t.isPrimaryClient&&$C(t,e.targetId,o.Xu),o}),zC.apply(this,arguments)}function fx(n,e){return WC.apply(this,arguments)}function WC(){return WC=(0,me.Z)(function*(n,e){const t=qe(n);return rC(t.localStore,e).then(r=>wc(t,r))}),WC.apply(this,arguments)}function px(n,e,t,r){return ZC.apply(this,arguments)}function ZC(){return ZC=(0,me.Z)(function*(n,e,t,r){const o=qe(n),u=yield function(d,m){const w=qe(d),C=qe(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",R=>C.fn(R,m).next(N=>N?w.fi.Ks(R,N):de.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield zm(o.remoteStore):"acknowledged"===t||"rejected"===t?(jC(o,e,r||null),BC(o,e),m=e,qe(qe(o.localStore).Bs)._n(m)):Xe(),yield wc(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),ZC.apply(this,arguments)}function KC(){return KC=(0,me.Z)(function*(n,e){const t=qe(n);if(XC(t),eT(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield YA(t,r.toArray());t.da=!0,yield wC(t.remoteStore,!0);for(const u of o)PI(t.remoteStore,u)}else if(!1===e&&!1!==t.da){const r=[];let o=Promise.resolve();t.ra.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Qm(t,d),wp(t.localStore,d,!0))),a0(t.remoteStore,d)}),yield o,yield YA(t,r),function(u){const d=qe(u);d.aa.forEach((m,w)=>{a0(d.remoteStore,w)}),d.ca.Si(),d.aa=new Map,d.ua=new Fn(je.comparator)}(t),t.da=!1,yield wC(t.remoteStore,!1)}}),KC.apply(this,arguments)}function YA(n,e,t){return YC.apply(this,arguments)}function YC(){return YC=(0,me.Z)(function*(n,e,t){const r=qe(n),o=[],u=[];for(const d of e){let m;const w=r.ra.get(d);if(w&&0!==w.length){m=yield Ep(r.localStore,bo(w[0]));for(const C of w){const R=r.ia.get(C),N=yield hx(r,R);N.snapshot&&u.push(N.snapshot)}}else{const C=yield nC(r.localStore,d);m=yield Ep(r.localStore,C),yield RC(r,QA(C),d,!1)}o.push(m)}return r.sa.zo(u),o}),YC.apply(this,arguments)}function QA(n){return uv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function mx(n){const e=qe(n);return qe(qe(e.localStore).persistence).Fs()}function yx(n,e,t,r){return QC.apply(this,arguments)}function QC(){return QC=(0,me.Z)(function*(n,e,t,r){const o=qe(n);if(o.da)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.ra.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield rC(o.localStore,Uw(u[0])),m=Qd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield wc(o,d,m);break}case"rejected":yield wp(o.localStore,e,!0),Qm(o,e,r);break;default:Xe()}}),QC.apply(this,arguments)}function _x(n,e,t){return JC.apply(this,arguments)}function JC(){return JC=(0,me.Z)(function*(n,e,t){const r=XC(n);if(r.da){for(const o of e){if(r.ra.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield nC(r.localStore,o),d=yield Ep(r.localStore,u);yield RC(r,QA(u),d.targetId,!1),PI(r.remoteStore,d)}for(const o of t)r.ra.has(o)&&(yield wp(r.localStore,o,!1).then(()=>{a0(r.remoteStore,o),Qm(r,o)}).catch(_c))}}),JC.apply(this,arguments)}function XC(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dx.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sx.bind(null,e),e.sa.zo=KM.bind(null,e.eventManager),e.sa.wa=YM.bind(null,e.eventManager),e}function eT(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ox.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ax.bind(null,e),e}class JA{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=Ec(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Jv(this.persistence,new AI,e.initialUser,this.M)}ya(e){return new g(E.Yi,this.M)}ga(e){return new Qe}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class XA extends JA{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield eT(r.Ta.syncEngine),yield zm(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Jv(this.persistence,new AI,e.initialUser,this.M)}pa(e){return new DI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Um(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Zi.withCacheSize(this.cacheSizeBytes):Zi.DEFAULT;return new Qv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,il(),ch(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new Qe}}class Ex extends XA{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.Ta.syncEngine;r.sharedClientState instanceof Be&&(r.sharedClientState.syncEngine={$r:px.bind(null,o),Br:yx.bind(null,o),Lr:_x.bind(null,o),Fs:mx.bind(null,o),Fr:fx.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,me.Z)(function*(d){yield function gx(n,e){return KC.apply(this,arguments)}(r.Ta.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}ga(e){const t=il();if(!Be.vt(t))throw new Se(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Um(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Be(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class tT{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>ZA(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=cx.bind(null,r.syncEngine),yield wC(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ZM}createDatastore(e){const t=Ec(e.databaseInfo.databaseId),r=new ms(e.databaseInfo);return new n0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>ZA(this.syncEngine,m,0),d=ot.vt()?new ot:new Ce,new s0(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const R=new tx(r,o,u,d,m,w);return C&&(R.da=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=qe(t);Oe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield qm(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function eS(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class FI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wx{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Dr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,me.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),o=Number(r);isNaN(o)&&e.va(`length string (${r}) is not valid number`);const u=yield e.Sa(o);return new QM(JSON.parse(u),t.length+o)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,me.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Ix{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,d){const m=qe(u),w=lc(m.M)+"/documents",C={documents:d.map(ee=>cp(m.M,ee))},R=yield m._o("BatchGetDocuments",w,C),N=new Map;R.forEach(ee=>{const ge=function Cv(n,e){return"found"in e?function(t,r){It(!!r.found);const o=Do(t,r.found.name),u=Ln(r.found.updateTime),d=new Cr({mapValue:{fields:r.found.fields}});return dn.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=Do(t,r.missing),u=Ln(r.readTime);return dn.newNoDocument(o,u)}(n,e):Xe()}(m.M,ee);N.set(ge.key.toString(),ge)});const W=[];return d.forEach(ee=>{const ge=N.get(ee.toString());It(!!ge),W.push(ge)}),W}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=je.fromPath(o);e.mutations.push(new Cm(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const d=qe(o),m=lc(d.M)+"/documents",w={writes:u.map(C=>Xd(d.M,C))};yield d.co("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Xe();t=_t.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?tr.updateTime(t):tr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(_t.min()))throw new Se(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tr.updateTime(t)}return tr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bx{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.xa=r.maxAttempts,this.No=new Ip(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,me.Z)(function*(){const t=new Ix(e.datastore),r=e.ka(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Ma(u)}))}).catch(o=>{e.Ma(o)})}))}ka(e){try{const t=this.updateFunction(e);return!Gf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Jw(t)}return!1}}class Dx{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=br.UNAUTHENTICATED,this.clientId=ID.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,me.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Zm(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function tS(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield jm(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),nT.apply(this,arguments)}function nS(n,e){return rT.apply(this,arguments)}function rT(){return rT=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield iT(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>BA(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>BA(e.remoteStore,u)),n.onlineComponents=e}),rT.apply(this,arguments)}function iT(n){return sT.apply(this,arguments)}function sT(){return sT=(0,me.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield tS(n,new JA)),n.offlineComponents}),sT.apply(this,arguments)}function LI(n){return oT.apply(this,arguments)}function oT(){return oT=(0,me.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield nS(n,new tT)),n.onlineComponents}),oT.apply(this,arguments)}function rS(n){return iT(n).then(e=>e.persistence)}function aT(n){return iT(n).then(e=>e.localStore)}function iS(n){return LI(n).then(e=>e.remoteStore)}function uT(n){return LI(n).then(e=>e.syncEngine)}function Jm(n){return lT.apply(this,arguments)}function lT(){return lT=(0,me.Z)(function*(n){const e=yield LI(n),t=e.eventManager;return t.onListen=nx.bind(null,e.syncEngine),t.onUnlisten=rx.bind(null,e.syncEngine),t}),lT.apply(this,arguments)}function sS(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new FI({next:N=>{u.enqueueAndForget(()=>TC(o,R));const W=N.docs.has(d);!W&&N.fromCache?w.reject(new Se(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&N.fromCache&&m&&"server"===m.source?w.reject(new Se(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),R=new MC(Io(d.path),C,{includeMetadataChanges:!0,ku:!0});return DC(o,R)}(yield Jm(n),n.asyncQueue,e,t,r)})),r.promise}function oS(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,d,m,w){const C=new FI({next:N=>{u.enqueueAndForget(()=>TC(o,R)),N.fromCache&&"server"===m.source?w.reject(new Se(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),R=new MC(d,C,{includeMetadataChanges:!0,ku:!0});return DC(o,R)}(yield Jm(n),n.asyncQueue,e,t,r)})),r.promise}const aS=new Map;function cT(n,e,t){if(!t)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uS(n,e,t,r){if(!0===e&&!0===r)throw new Se(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lS(n){if(!je.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cS(n){if(je.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Xe()}function Wt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=VI(n);throw new Se(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dS(n,e){if(e<=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class hS{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,uS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class u0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hS({}),this._settingsFrozen=!1,e instanceof Eo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Se(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Eo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Se(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hS(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new vD;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ED(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Se(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=aS.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),aS.delete(e),t.terminate())}(this),Promise.resolve()}}class Mn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class Ki{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class sl extends Ki{constructor(e,t,r){super(e,t,Io(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new je(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function fS(n,e,...t){if(n=(0,Pt.m9)(n),cT("collection","path",e),n instanceof u0){const r=$t.fromString(e,...t);return cS(r),new sl(n,null,r)}{if(!(n instanceof Mn||n instanceof sl))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($t.fromString(e,...t));return cS(r),new sl(n.firestore,null,r)}}function UI(n,e,...t){if(n=(0,Pt.m9)(n),1===arguments.length&&(e=ID.R()),cT("doc","path",e),n instanceof u0){const r=$t.fromString(e,...t);return lS(r),new Mn(n,null,new je(r))}{if(!(n instanceof Mn||n instanceof sl))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($t.fromString(e,...t));return lS(r),new Mn(n.firestore,n instanceof sl?n.converter:null,new je(r))}}function pS(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),(n instanceof Mn||n instanceof sl)&&(e instanceof Mn||e instanceof sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function gS(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),n instanceof Ki&&e instanceof Ki&&n.firestore===e.firestore&&oc(n._query,e._query)&&n.converter===e.converter}class kx{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Ip(this,"async_queue_retry"),this.Qa=()=>{const t=ch();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=ch();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=ch();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Dr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,me.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!dc(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,er("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const o=bC.createAndSchedule(this,e,t,r,u=>this.Ha(u));return this.La.push(o),o}ja(){this.Ua&&Xe()}verifyOperationInProgress(){}Ja(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function dT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class Fx{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Vn extends u0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new kx,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||mS(this),this._firestoreClient.terminate()}}function Sr(n){return n._firestoreClient||mS(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function mS(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new CD(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new Dx(n._authCredentials,n._appCheckCredentials,n._queue,r)}function yS(n,e,t){const r=new Dr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield tS(n,t),yield nS(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function _S(n){if(n._initialized||n._terminated)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ic{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(pr.fromBase64String(e))}catch(t){throw new Se(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ol(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bp{constructor(e){this._methodName=e}}class BI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return St(this._lat,e._lat)||St(this._long,e._long)}}const zx=/^__.*__$/;class Wx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new aa(e,this.data,this.fieldMask,t,this.fieldTransforms):new rp(e,this.data,t,this.fieldTransforms)}}class vS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new aa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ES(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe()}}class jI{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.tc(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new jI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.rc(e),o}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.nc({path:r,ic:!1});return o.tc(),o}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return GI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(ES(this.ec)&&zx.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Zx{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Ec(e)}lc(e,t,r,o=!1){return new jI({ec:e,methodName:t,hc:r,path:fr.emptyPath(),ic:!1,cc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Dp(n){const e=n._freezeSettings(),t=Ec(n._databaseId);return new Zx(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $I(n,e,t,r,o,u={}){const d=n.lc(u.merge||u.mergeFields?2:0,e,t,o);gT("Data must be an object, but it was:",d,r);const m=bS(r,d);let w,C;if(u.merge)w=new tc(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const R=[];for(const N of u.mergeFields){const W=mT(e,N,t);if(!d.contains(W))throw new Se(ae.INVALID_ARGUMENT,`Field '${W}' is specified in your field mask but missing from your input data.`);CS(R,W)||R.push(W)}w=new tc(R),C=d.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=d.fieldTransforms;return new Wx(new Cr(m),w,C)}class l0 extends bp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof l0}}function wS(n,e,t){return new jI({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class hT extends bp{_toFieldTransform(e){return new Xf(e.path,new ac)}isEqual(e){return e instanceof hT}}class Kx extends bp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=wS(this,e,!0),r=this.fc.map(u=>Cp(u,t)),o=new tl(r);return new Xf(e.path,o)}isEqual(e){return this===e}}class Yx extends bp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=wS(this,e,!0),r=this.fc.map(u=>Cp(u,t)),o=new uc(r);return new Xf(e.path,o)}isEqual(e){return this===e}}class Qx extends bp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new Wd(e.M,Hw(e.M,this.dc));return new Xf(e.path,t)}isEqual(e){return this===e}}function fT(n,e,t,r){const o=n.lc(1,e,t);gT("Data must be an object, but it was:",o,r);const u=[],d=Cr.empty();vo(r,(w,C)=>{const R=HI(e,w,t);C=(0,Pt.m9)(C);const N=o.oc(R);if(C instanceof l0)u.push(R);else{const W=Cp(C,N);null!=W&&(u.push(R),d.set(R,W))}});const m=new tc(u);return new vS(d,m,o.fieldTransforms)}function pT(n,e,t,r,o,u){const d=n.lc(1,e,t),m=[mT(e,r,t)],w=[o];if(u.length%2!=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let W=0;W<u.length;W+=2)m.push(mT(e,u[W])),w.push(u[W+1]);const C=[],R=Cr.empty();for(let W=m.length-1;W>=0;--W)if(!CS(C,m[W])){const ee=m[W];let ge=w[W];ge=(0,Pt.m9)(ge);const ke=d.oc(ee);if(ge instanceof l0)C.push(ee);else{const et=Cp(ge,ke);null!=et&&(C.push(ee),R.set(ee,et))}}const N=new tc(C);return new vS(R,N,d.fieldTransforms)}function IS(n,e,t,r=!1){return Cp(t,n.lc(r?4:3,e))}function Cp(n,e){if(DS(n=(0,Pt.m9)(n)))return gT("Unsupported field value:",e,n),bS(n,e);if(n instanceof bp)return function(t,r){if(!ES(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=Cp(d,r.uc(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Pt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Hw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=qn.fromDate(t);return{timestampValue:lp(r.M,o)}}if(t instanceof qn){const o=new qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:lp(r.M,o)}}if(t instanceof BI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ol)return{bytesValue:rI(r.M,t._byteString)};if(t instanceof Mn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ac(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:wv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${VI(t)}`)}(n,e)}function bS(n,e){const t={};return vw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(n,(r,o)=>{const u=Cp(o,e.sc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function DS(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof BI||n instanceof ol||n instanceof Mn||n instanceof bp)}function gT(n,e,t){if(!DS(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=VI(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function mT(n,e,t){if((e=(0,Pt.m9)(e))instanceof Ic)return e._internalPath;if("string"==typeof e)return HI(n,e);throw GI("Field path arguments must be of type string or ",n,!1,void 0,t)}const Jx=new RegExp("[~\\*/\\[\\]]");function HI(n,e,t){if(e.search(Jx)>=0)throw GI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ic(...e.split("."))._internalPath}catch(r){throw GI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function GI(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Se(ae.INVALID_ARGUMENT,m+n+w)}function CS(n,e){return n.some(t=>t.isEqual(e))}class c0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Xx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Xx extends c0{data(){return super.data()}}function qI(n,e){return"string"==typeof e?HI(n,e):e instanceof Ic?e._internalPath:e._delegate._internalPath}class Tp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bc extends c0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new d0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class d0 extends bc{data(e={}){return super.data(e)}}class fh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Tp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new d0(this._firestore,this._userDataWriter,r.key,r,new Tp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new d0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Tp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new d0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Tp(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:eR(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function eR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe()}}function TS(n,e){return n instanceof bc&&e instanceof bc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fh&&e instanceof fh&&n._firestore===e._firestore&&gS(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function AS(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h0{}function ph(n,...e){for(const t of e)n=t._apply(n);return n}class tR extends h0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Dp(e.firestore),r=function(o,u,d,m,w,C,R){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){OS(R,C);const ee=[];for(const ge of R)ee.push(NS(m,o,ge));N={arrayValue:{values:ee}}}else N=NS(m,o,R)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||OS(R,C),N=IS(d,"where",R,"in"===C||"not-in"===C);const W=Tr.create(w,C,N);return function(ee,ge){if(ge.S()){const et=lv(ee);if(null!==et&&!et.isEqual(ge.field))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${et.toString()}' and '${ge.field.toString()}'`);const Lt=bm(ee);null!==Lt&&PS(0,ge.field,Lt)}const ke=function(et,Lt){for(const Vt of et.filters)if(Lt.indexOf(Vt.op)>=0)return Vt.op;return null}(ee,function(et){switch(et){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ge.op));if(null!==ke)throw new Se(ae.INVALID_ARGUMENT,ke===ge.op?`Invalid query. You cannot use more than one '${ge.op.toString()}' filter.`:`Invalid query. You cannot use '${ge.op.toString()}' filters with '${ke.toString()}' filters.`)}(o,W),W}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Ki(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new Wi(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class rR extends h0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new zd(o,u);return function(m,w){if(null===bm(m)){const C=lv(m);null!==C&&PS(0,C,w.field)}}(r,d),d}(e._query,this._c,this.gc);return new Ki(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Wi(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class SS extends h0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new Ki(e.firestore,e.converter,cv(e._query,this.yc,this.Ic))}}class MS extends h0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=RS(e,this.type,this.Tc,this.Ec);return new Ki(e.firestore,e.converter,(o=t,new Wi((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class xS extends h0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=RS(e,this.type,this.Tc,this.Ec);return new Ki(e.firestore,e.converter,(o=t,new Wi((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function RS(n,e,t,r){if(t[0]=(0,Pt.m9)(t[0]),t[0]instanceof c0)return function(o,u,d,m,w){if(!m)throw new Se(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const R of sc(o))if(R.field.isKeyField())C.push(rc(u,m.key));else{const N=m.data.field(R.field);if(ym(N))throw new Se(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const W=R.field.canonicalString();throw new Se(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${W}' (used as the orderBy) does not exist.`)}C.push(N)}return new oa(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Dp(n.firestore);return function(u,d,m,w,C,R){const N=u.explicitOrderBy;if(C.length>N.length)throw new Se(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const W=[];for(let ee=0;ee<C.length;ee++){const ge=C[ee];if(N[ee].field.isKeyField()){if("string"!=typeof ge)throw new Se(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ge}`);if(!Lw(u)&&-1!==ge.indexOf("/"))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ge}' contains a slash.`);const ke=u.path.child($t.fromString(ge));if(!je.isDocumentKey(ke))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${ke}' is not because it contains an odd number of segments.`);const et=new je(ke);W.push(rc(d,et))}else{const ke=IS(m,w,ge);W.push(ke)}}return new oa(W,R)}(n._query,n.firestore._databaseId,o,e,t,r)}}function NS(n,e,t){if("string"==typeof(t=(0,Pt.m9)(t))){if(""===t)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lw(e)&&-1!==t.indexOf("/"))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($t.fromString(t));if(!je.isDocumentKey(r))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return rc(n,new je(r))}if(t instanceof Mn)return rc(n,t._key);throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${VI(t)}.`)}function OS(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function PS(n,e,t){if(!t.isEqual(e))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const dR={maxAttempts:5};class yT{convertValue(e,t="none"){switch(uu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Xe()}}convertObject(e,t){const r={};return vo(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new BI(Sn(e.latitude),Sn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ew(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ud(e));default:return null}}convertTimestamp(e){const t=Ju(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$t.fromString(e);It(Mv(r));const o=new Eo(r.get(1),r.get(3)),u=new je(r.popFirst(5));return o.isEqual(t)||er(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function zI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class hR extends yT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}class kS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Dp(e)}set(e,t,r){this._verifyNotCommitted();const o=gh(e,this._firestore),u=zI(o.converter,t,r),d=$I(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,tr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=gh(e,this._firestore);let d;return d="string"==typeof(t=(0,Pt.m9)(t))||t instanceof Ic?pT(this._dataReader,"WriteBatch.update",u._key,t,r,o):fT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,tr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gh(e,this._firestore);return this._mutations=this._mutations.concat(new Kd(t._key,tr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gh(n,e){if((n=(0,Pt.m9)(n)).firestore!==e)throw new Se(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ap extends yT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,t)}}function FS(n,e,t){n=Wt(n,Mn);const r=Wt(n.firestore,Vn),o=zI(n.converter,e,t);return Xm(r,[$I(Dp(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,tr.none())])}function LS(n,e,t,...r){n=Wt(n,Mn);const o=Wt(n.firestore,Vn),u=Dp(o);let d;return d="string"==typeof(e=(0,Pt.m9)(e))||e instanceof Ic?pT(u,"updateDoc",n._key,e,t,r):fT(u,"updateDoc",n._key,e),Xm(o,[d.toMutation(n._key,tr.exists(!0))])}function VS(n,...e){var t,r,o;n=(0,Pt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||dT(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(dT(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,R;if(n instanceof Mn)C=Wt(n.firestore,Vn),R=Io(n._key.path),w={next:N=>{e[d]&&e[d](_T(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=Wt(n,Ki);C=Wt(N.firestore,Vn),R=N._query;const W=new Ap(C);w={next:ee=>{e[d]&&e[d](new fh(C,W,N,ee))},error:e[d+1],complete:e[d+2]},AS(n._query)}return function(N,W,ee,ge){const ke=new FI(ge),et=new MC(W,ke,ee);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return DC(yield Jm(N),et)})),()=>{ke.Aa(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return TC(yield Jm(N),et)}))}}(Sr(C),R,m,w)}function Xm(n,e){return function(t,r){const o=new Dr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function ix(n,e,t){return PC.apply(this,arguments)}(yield uT(t),r,o)})),o.promise}(Sr(n),e)}function _T(n,e,t){const r=t.docs.get(e._key),o=new Ap(n);return new bc(n,o,e._key,r,new Tp(t.hasPendingWrites,t.fromCache),e.converter)}class IR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Dp(e)}get(e){const t=gh(e,this._firestore),r=new hR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Xe();const u=o[0];if(u.isFoundDocument())return new c0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new c0(this._firestore,r,t._key,null,t.converter);throw Xe()})}set(e,t,r){const o=gh(e,this._firestore),u=zI(o.converter,t,r),d=$I(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=gh(e,this._firestore);let d;return d="string"==typeof(t=(0,Pt.m9)(t))||t instanceof Ic?pT(this._dataReader,"Transaction.update",u._key,t,r,o):fT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=gh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gh(e,this._firestore),r=new Ap(this._firestore);return super.get(e).then(o=>new bc(this._firestore,r,t._key,o._document,new Tp(!1,!1),t.converter))}}function vT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function BS(){if("undefined"==typeof Uint8Array)throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function jS(){if(!function DD(){return"undefined"!=typeof atob}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Fd=$l.SDK_VERSION,(0,$l._registerComponent)(new Og.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new Vn(o,new yw(t.getProvider("auth-internal")),new wD(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,$l.registerVersion)(K_,"3.4.9",n),(0,$l.registerVersion)(K_,"3.4.9","esm2017")}();class f0{constructor(e){this._delegate=e}static fromBase64String(e){return jS(),new f0(ol.fromBase64String(e))}static fromUint8Array(e){return BS(),new f0(ol.fromUint8Array(e))}toBase64(){return jS(),this._delegate.toBase64()}toUint8Array(){return BS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ET(n){return function RR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class NR{enableIndexedDbPersistence(e,t){return function Vx(n,e){_S(n=Wt(n,Vn));const t=Sr(n),r=n._freezeSettings(),o=new tT;return yS(t,o,new XA(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ux(n){_S(n=Wt(n,Vn));const e=Sr(n),t=n._freezeSettings(),r=new tT;return yS(e,r,new Ex(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Bx(n){if(n._initialized&&!n._terminated)throw new Se(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Gs.vt())return Promise.resolve();const o=r+"main";yield Gs.delete(o)}),function(r){return t.apply(this,arguments)})(Um(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $S{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Eo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&jf("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Ox(n,e,t,r={}){var o;const u=(n=Wt(n,u0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&jf("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=br.MOCK_USER;else{d=(0,Pt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Se(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new br(w)}n._authCredentials=new mw(new gw(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function $x(n){return function Cx(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield rS(n),t=yield iS(n);return e.setNetworkEnabled(!0),function(r){const o=qe(r);return o.wu.delete(0),o0(o)}(t)}))}(Sr(n=Wt(n,Vn)))}(this._delegate)}disableNetwork(){return function Hx(n){return function Tx(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield rS(n),t=yield iS(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=qe(o);u.wu.add(0),yield qm(u),u.yu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Sr(n=Wt(n,Vn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uS("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function jx(n){return function(e){const t=new Dr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function ux(n,e){return UC.apply(this,arguments)}(yield uT(e),t)})),t.promise}(Sr(n=Wt(n,Vn)))}(this._delegate)}onSnapshotsInSync(e){return function wR(n,e){return function Mx(n,e){const t=new FI(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Jm(n),o=t,qe(r).bu.add(o),void o.next();var r,o})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Jm(n),o=t,void qe(r).bu.delete(o);var r,o}))}}(Sr(n=Wt(n,Vn)),dT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ey(this,fS(this._delegate,e))}catch(t){throw ys(t,"collection()","Firestore.collection()")}}doc(e){try{return new da(this,UI(this._delegate,e))}catch(t){throw ys(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _s(this,function Px(n,e){if(n=Wt(n,u0),cT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ki(n,null,(t=e,new Wi($t.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ys(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function bR(n,e,t){n=Wt(n,Vn);const r=Object.assign(Object.assign({},dR),t);return function(o){if(o.maxAttempts<1)throw new Se(ae.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function xx(n,e,t){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const o=yield(u=n,LI(u).then(d=>d.datastore));var u;new bx(n.asyncQueue,o,t,e,r).run()})),r.promise}(Sr(n),o=>e(new IR(n,o)),r)}(this._delegate,t=>e(new HS(this,t)))}batch(){return Sr(this._delegate),new GS(new kS(this._delegate,e=>Xm(this._delegate,e)))}loadBundle(e){return function Gx(n,e){const t=Sr(n=Wt(n,Vn)),r=new Fx;return function Rx(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return eS(w,C);if(w instanceof ArrayBuffer)return eS(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new wx(w,d);var w}(t,Ec(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function vx(n,e,t){const r=qe(n);var o;(o=(0,me.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(W,ee){const ge=qe(W),ke=Ln(ee.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",et=>ge._s.getBundleMetadata(et,ee.id)).then(et=>!!et&&et.createTime.compareTo(ke)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(W=w).totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes}),Promise.resolve(new Set);m._updateProgress(HA(w));const C=new JM(w,u.localStore,d.M);let R=yield d.ma();for(;R;){const W=yield C.Fu(R);W&&m._updateProgress(W),R=yield d.ma()}const N=yield C.complete();return yield wc(u,N.Lu,void 0),yield function(W,ee){const ge=qe(W);return ge.persistence.runTransaction("Save bundle","readwrite",ke=>ge._s.saveBundleMetadata(ke,ee))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return jf("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var W}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield uT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function qx(n,e){return function Nx(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=qe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield aT(n),e)}))}(Sr(n=Wt(n,Vn)),e).then(t=>t?new Ki(n,null,t.query):null)}(this._delegate,e).then(t=>t?new _s(this,t):null)}}class WI extends yT{constructor(e){super(),this.firestore=e}convertBytes(e){return new f0(new ol(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return da.forKey(t,this.firestore,null)}}class HS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new WI(e)}get(e){const t=Mp(e);return this._delegate.get(t).then(r=>new p0(this._firestore,new bc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Mp(e);return r?(vT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Mp(e);return this._delegate.delete(t),this}}class GS{constructor(e){this._delegate=e}set(e,t,r){const o=Mp(e);return r?(vT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Mp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Mp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Sp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new d0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new g0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Sp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Sp(e,new WI(e),t),o.set(t,u)),u}}Sp.INSTANCES=new WeakMap;class da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new WI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new da(t,new Mn(t._delegate,r,new je(e)))}static forKey(e,t,r){return new da(t,new Mn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ey(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ey(this.firestore,fS(this._delegate,e))}catch(t){throw ys(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Pt.m9)(e))instanceof Mn&&pS(this._delegate,e)}set(e,t){t=vT("DocumentReference.set",t);try{return t?FS(this._delegate,e,t):FS(this._delegate,e)}catch(r){throw ys(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?LS(this._delegate,e):LS(this._delegate,e,t,...r)}catch(o){throw ys(o,"updateDoc()","DocumentReference.update()")}}delete(){return function vR(n){return Xm(Wt(n.firestore,Vn),[new Kd(n._key,tr.none())])}(this._delegate)}onSnapshot(...e){const t=qS(e),r=zS(e,o=>new p0(this.firestore,new bc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return VS(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function pR(n){n=Wt(n,Mn);const e=Wt(n.firestore,Vn),t=Sr(e),r=new Ap(e);return function Ax(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield function(w,C){const R=qe(w);return R.persistence.runTransaction("read document","readonly",N=>R.fi.Ls(N,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Se(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Zm(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield aT(n),e,t);var r})),t.promise}(t,n._key).then(o=>new bc(e,r,n._key,o,new Tp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function gR(n){n=Wt(n,Mn);const e=Wt(n.firestore,Vn);return sS(Sr(e),n._key,{source:"server"}).then(t=>_T(e,n,t))}(this._delegate):function fR(n){n=Wt(n,Mn);const e=Wt(n.firestore,Vn);return sS(Sr(e),n._key).then(t=>_T(e,n,t))}(this._delegate),t.then(r=>new p0(this.firestore,new bc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new da(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}function ys(n,e,t){return n.message=n.message.replace(e,t),n}function qS(n){for(const e of n)if("object"==typeof e&&!ET(e))return e;return{}}function zS(n,e){var t,r;let o;return o=ET(n[0])?n[0]:ET(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class p0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return TS(this._delegate,e._delegate)}}class g0 extends p0{data(e){const t=this._delegate.data(e);return function pw(n,e){n||Xe()}(void 0!==t),t}}class _s{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new WI(e)}where(e,t,r){try{return new _s(this.firestore,ph(this._delegate,function nR(n,e,t){const r=e,o=qI("where",n);return new tR(o,r,t)}(e,t,r)))}catch(o){throw ys(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _s(this.firestore,ph(this._delegate,function iR(n,e="asc"){const t=e,r=qI("orderBy",n);return new rR(r,t)}(e,t)))}catch(r){throw ys(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _s(this.firestore,ph(this._delegate,function sR(n){return dS("limit",n),new SS("limit",n,"F")}(e)))}catch(t){throw ys(t,"limit()","Query.limit()")}}limitToLast(e){try{return new _s(this.firestore,ph(this._delegate,function oR(n){return dS("limitToLast",n),new SS("limitToLast",n,"L")}(e)))}catch(t){throw ys(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new _s(this.firestore,ph(this._delegate,function aR(...n){return new MS("startAt",n,!0)}(...e)))}catch(t){throw ys(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new _s(this.firestore,ph(this._delegate,function uR(...n){return new MS("startAfter",n,!1)}(...e)))}catch(t){throw ys(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new _s(this.firestore,ph(this._delegate,function lR(...n){return new xS("endBefore",n,!1)}(...e)))}catch(t){throw ys(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new _s(this.firestore,ph(this._delegate,function cR(...n){return new xS("endAt",n,!0)}(...e)))}catch(t){throw ys(t,"endAt()","Query.endAt()")}}isEqual(e){return gS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yR(n){n=Wt(n,Ki);const e=Wt(n.firestore,Vn),t=Sr(e),r=new Ap(e);return function Sx(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,d){try{const m=yield Hm(o,u,!0),w=new zA(u,m._i),C=w.Wu(m.documents),R=w.applyChanges(C,!1);d.resolve(R.snapshot)}catch(m){const w=Zm(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield aT(n),e,t);var r})),t.promise}(t,n._query).then(o=>new fh(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function _R(n){n=Wt(n,Ki);const e=Wt(n.firestore,Vn),t=Sr(e),r=new Ap(e);return oS(t,n._query,{source:"server"}).then(o=>new fh(e,r,n,o))}(this._delegate):function mR(n){n=Wt(n,Ki);const e=Wt(n.firestore,Vn),t=Sr(e),r=new Ap(e);return AS(n._query),oS(t,n._query).then(o=>new fh(e,r,n,o))}(this._delegate),t.then(r=>new wT(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=qS(e),r=zS(e,o=>new wT(this.firestore,new fh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return VS(this._delegate,t,r)}withConverter(e){return new _s(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}class PR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new g0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _s(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new g0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new PR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new g0(this._firestore,r))})}isEqual(e){return TS(this._delegate,e._delegate)}}class ey extends _s{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new da(this.firestore,e):null}doc(e){try{return new da(this.firestore,void 0===e?UI(this._delegate):UI(this._delegate,e))}catch(t){throw ys(t,"doc()","CollectionReference.doc()")}}add(e){return function ER(n,e){const t=Wt(n.firestore,Vn),r=UI(n),o=zI(n.converter,e);return Xm(t,[$I(Dp(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new da(this.firestore,t))}isEqual(e){return pS(this._delegate,e._delegate)}withConverter(e){return new ey(this.firestore,this._delegate.withConverter(e?Sp.getInstance(this.firestore,e):null))}}function Mp(n){return Wt(n,Mn)}class IT{constructor(...e){this._delegate=new Ic(...e)}static documentId(){return new IT(fr.keyField().canonicalString())}isEqual(e){return(e=(0,Pt.m9)(e))instanceof Ic&&this._delegate._internalPath.isEqual(e._internalPath)}}class xp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function CR(){return new hT("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new xp(e)}static delete(){const e=function DR(){return new l0("deleteField")}();return e._methodName="FieldValue.delete",new xp(e)}static arrayUnion(...e){const t=function TR(...n){return new Kx("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new xp(t)}static arrayRemove(...e){const t=function AR(...n){return new Yx("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new xp(t)}static increment(e){const t=function SR(n){return new Qx("increment",n)}(e);return t._methodName="FieldValue.increment",new xp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const kR={Firestore:$S,GeoPoint:BI,Timestamp:qn,Blob:f0,Transaction:HS,WriteBatch:GS,DocumentReference:da,DocumentSnapshot:p0,Query:_s,QueryDocumentSnapshot:g0,QuerySnapshot:wT,CollectionReference:ey,FieldPath:IT,FieldValue:xp,setLogLevel:function OR(n){!function Bf(n){Qu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function LR(n){(function FR(n,e){n.INTERNAL.registerComponent(new Og.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},kR)))})(n,(e,t)=>new $S(e,t,new NR)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(bE.Z);var VR=O(6451),ZI=O(5363),UR=O(6063);class BR extends us.x{constructor(e=1/0,t=1/0,r=UR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var jR=O(3099);function WS(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,jR.B)({connector:()=>new BR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function ZS(n,e){return(0,ad.m)(e)?dr(()=>n,e):dr(()=>n)}var bT=O(9468);O(5867);const YS=new Map,zR={activated:!1,tokenObservers:[]},WR={initialized:!1,enabled:!1};function ii(n){return YS.get(n)||zR}function cu(n,e){YS.set(n,e)}function YI(){return WR}class JR{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Pt.BH,yield function XR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Pt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const vs=new Pt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function JS(n){if(!ii(n).activated)throw vs.create("use-before-activation",{appName:n.name})}function AT(n,e){return ST.apply(this,arguments)}function ST(){return ST=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(N){throw vs.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==d.status)throw vs.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(N){throw vs.create("fetch-parse-error",{originalErrorMessage:N.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),R=Date.now();return{token:m.token,expireTimeMillis:R+C,issuedAtTimeMillis:R}}),ST.apply(this,arguments)}function iN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const m0="firebase-app-check-store";let XI=null;function eM(){return XI||(XI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(vs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(m0,{keyPath:"compositeKey"})}}catch(t){e(vs.create("storage-open",{originalErrorMessage:t.message}))}}),XI)}function MT(){return MT=(0,me.Z)(function*(n,e){const r=(yield eM()).transaction(m0,"readwrite"),u=r.objectStore(m0).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(vs.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),MT.apply(this,arguments)}const y0=new Hl.Yd("@firebase/app-check");function iM(n,e){return(0,Pt.hl)()?function uN(n,e){return function tM(n,e){return MT.apply(this,arguments)}(function rM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{y0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sM(){return YI().enabled}function oM(){return OT.apply(this,arguments)}function OT(){return OT=(0,me.Z)(function*(){const n=YI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),OT.apply(this,arguments)}const pN={error:"UNKNOWN_ERROR"};function gN(n){return Pt.US.encodeString(JSON.stringify(n),!1)}function eb(n){return PT.apply(this,arguments)}function PT(){return PT=(0,me.Z)(function*(n,e=!1){const t=n.app;JS(t);const r=ii(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&tb(w)&&(o=w)}if(!e&&o&&tb(o))return{token:o.token};let m,d=!1;if(sM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=AT(iN(t,yield oM()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield iM(t,w),cu(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?y0.warn(w.message):y0.error(w),u=w}return o?(m={token:o.token},cu(t,Object.assign(Object.assign({},r),{token:o})),yield iM(t,o)):m=yN(u),d&&uM(t,m),m}),PT.apply(this,arguments)}function FT(n,e){const t=ii(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),cu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function aM(n){const{app:e}=n,t=ii(e);let r=t.tokenRefresher;r||(r=function mN(n){const{app:e}=n;return new JR((0,me.Z)(function*(){let r;if(r=ii(e).token?yield eb(n,!0):yield eb(n),r.error)throw r.error}),()=>!0,()=>{const t=ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),cu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function uM(n,e){const t=ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function tb(n){return n.expireTimeMillis-Date.now()>0}function yN(n){return{token:gN(pN),error:n}}class _N{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ii(this.app);for(const t of e)FT(this.app,t.next);return Promise.resolve()}}const mM="app-check-internal";!function NN(){(0,$l._registerComponent)(new Og.wA("app-check",n=>function vN(n,e){return new _N(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(mM).initialize()})),(0,$l._registerComponent)(new Og.wA(mM,n=>function EN(n){return{getToken:e=>eb(n,e),addTokenListener:e=>function kT(n,e,t,r){const{app:o}=n,u=ii(o),d={next:t,error:r,type:e};if(cu(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&tb(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),aM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>aM(n))}(n,"INTERNAL",e),removeTokenListener:e=>FT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$l.registerVersion)("@firebase/app-check","0.5.8")}();class BT{constructor(){return(0,ni.vb)("app-check")}}"undefined"!=typeof window&&window,O(127);const _M=new f.OlP("angularfire2.auth.use-emulator"),vM=new f.OlP("angularfire2.auth.settings"),EM=new f.OlP("angularfire2.auth.tenant-id"),wM=new f.OlP("angularfire2.auth.langugage-code"),IM=new f.OlP("angularfire2.auth.use-device-language"),bM=new f.OlP("angularfire.auth.persistence"),DM=(n,e,t,r,o,u,d,m)=>(0,js.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,R]of Object.entries(d))w.settings[C]=R;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let $T=(()=>{class n{constructor(t,r,o,u,d,m,w,C,R,N,W,ee){const ge=new us.x,ke=ut(void 0).pipe((0,ZI.Q)(d.outsideAngular),dr(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7139)))),(0,wt.U)(()=>(0,js.on)(t,u,r)),(0,wt.U)(et=>DM(et,u,m,C,R,N,w,W)),WS({bufferSize:1,refCount:!1}));if(xo(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{ke.pipe(h()).subscribe();const Lt=ke.pipe(dr(Mt=>Mt.getRedirectResult().then(Ut=>Ut,()=>null)),ni.iC,WS({bufferSize:1,refCount:!1})),Vt=ke.pipe(dr(Mt=>new on.y(Ut=>({unsubscribe:u.runOutsideAngular(()=>Mt.onAuthStateChanged(tn=>Ut.next(tn),tn=>Ut.error(tn),()=>Ut.complete()))})))),Bt=ke.pipe(dr(Mt=>new on.y(Ut=>({unsubscribe:u.runOutsideAngular(()=>Mt.onIdTokenChanged(tn=>Ut.next(tn),tn=>Ut.error(tn),()=>Ut.complete()))}))));this.authState=Lt.pipe(ZS(Vt),(0,bT.R)(d.outsideAngular),(0,ZI.Q)(d.insideAngular)),this.user=Lt.pipe(ZS(Bt),(0,bT.R)(d.outsideAngular),(0,ZI.Q)(d.insideAngular)),this.idToken=this.user.pipe(dr(Mt=>Mt?(0,gn.D)(Mt.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(dr(Mt=>Mt?(0,gn.D)(Mt.getIdTokenResult()):ut(null))),this.credential=(0,VR.T)(Lt,ge,this.authState.pipe(Vs(Mt=>!Mt))).pipe((0,wt.U)(Mt=>(null==Mt?void 0:Mt.user)?Mt:null),(0,bT.R)(d.outsideAngular),(0,ZI.Q)(d.insideAngular))}return(0,js.pX)(this,ke,u,{spy:{apply:(et,Lt,Vt)=>{(et.startsWith("signIn")||et.startsWith("createUser"))&&Vt.then(Bt=>ge.next(Bt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(js.Dh),f.LFG(js.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ni.HU),f.LFG(_M,8),f.LFG(vM,8),f.LFG(EM,8),f.LFG(wM,8),f.LFG(IM,8),f.LFG(bM,8),f.LFG(BT,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function CM(n,e){return function VN(n,e=IE.z){return new on.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function HT(n,e){return CM(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function rb(n,e){return HT(n,e).pipe(Ll(void 0),r_(),(0,wt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(R=>R.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(R=>R.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function TM(n,e,t){return rb(n,t).pipe(lo((r,o)=>function BN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function jN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return GT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return GT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return GT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Hb(n,e=qa.y){return n=null!=n?n:Gb,(0,mi.e)((t,r)=>{let o,u=!0;t.subscribe((0,Pn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,wt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function GT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function AM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class SM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=rb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Ll(void 0),r_(),Vs(([r,o])=>o.length>0||!r),(0,wt.U)(([r,o])=>o),ni.iC)}auditTrail(e){return this.stateChanges(e).pipe(lo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AM(e);return TM(this.query,t,this.afs.schedulers.outsideAngular).pipe(ni.iC)}valueChanges(e={}){return HT(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ni.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(ni.iC)}add(e){return this.ref.add(e)}doc(e){return new MM(this.ref.doc(e),this.afs)}}class MM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=xM(r,t);return new SM(o,u,this.afs)}snapshotChanges(){return function UN(n,e){return CM(n,e).pipe(Ll(void 0),r_(),(0,wt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ni.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(ni.iC)}}class $N{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?rb(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Vs(t=>t.length>0),ni.iC):rb(this.query,this.afs.schedulers.outsideAngular).pipe(ni.iC)}auditTrail(e){return this.stateChanges(e).pipe(lo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=AM(e);return TM(this.query,t,this.afs.schedulers.outsideAngular).pipe(ni.iC)}valueChanges(e={}){return HT(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ni.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(ni.iC)}}const HN=new f.OlP("angularfire2.enableFirestorePersistence"),GN=new f.OlP("angularfire2.firestore.persistenceSettings"),qN=new f.OlP("angularfire2.firestore.settings"),zN=new f.OlP("angularfire2.firestore.use-emulator");function xM(n,e=(t=>t)){return{query:e(n),ref:n}}let RM=(()=>{class n{constructor(t,r,o,u,d,m,w,C,R,N,W,ee,ge,ke,et,Lt,Vt){this.schedulers=w;const Bt=(0,js.on)(t,m,r),Mt=R;N&&DM(Bt,m,W,ge,ke,et,ee,Lt),[this.firestore,this.persistenceEnabled$]=(0,js.cc)(`${Bt.name}.firestore`,"AngularFirestore",Bt.name,()=>{const Ut=m.runOutsideAngular(()=>Bt.firestore());if(u&&Ut.settings(u),Mt&&Ut.useEmulator(...Mt),o&&!xo(d)){const tn=()=>{try{return(0,gn.D)(Ut.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Yi){return"undefined"!=typeof console&&console.warn(Yi),ut(!1)}};return[Ut,m.runOutsideAngular(tn)]}return[Ut,ut(!1)]},[u,Mt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=xM(o,r),m=this.schedulers.ngZone.run(()=>u);return new SM(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new $N(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new MM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(js.Dh),f.LFG(js.xv,8),f.LFG(HN,8),f.LFG(qN,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(ni.HU),f.LFG(GN,8),f.LFG(zN,8),f.LFG($T,8),f.LFG(_M,8),f.LFG(vM,8),f.LFG(EM,8),f.LFG(wM,8),f.LFG(IM,8),f.LFG(bM,8),f.LFG(BT,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qT=(()=>{class n{constructor(t){this.afs=t,this.items=[]}getItems(){return this.items=[],this.afs.collection("Items").get().subscribe(t=>{t.docs.forEach(r=>{this.items.push(new n_(r.data().name,r.data().price,r.data().image))})}),this.items}addItem(t){var r=this;return(0,me.Z)(function*(){r.afs.collection("Items").doc(t.name).get().subscribe(function(){var o=(0,me.Z)(function*(u){return u.exists?void alert("This product already exists!"):(alert("Product added successfully!"),yield r.afs.collection("Items").doc(t.name).set(t))});return function(u){return o.apply(this,arguments)}}())})()}updateItem(t){var r=this;return(0,me.Z)(function*(){r.afs.collection("Items").doc(t.name).get().subscribe(function(){var o=(0,me.Z)(function*(u){if(u.exists)return alert("Product updated successfully!"),yield r.afs.collection("Items").doc(t.name).set(t);alert("The product with this name doesn't exist")});return function(u){return o.apply(this,arguments)}}())})()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(RM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function WN(n,e){1&n&&(f.TgZ(0,"span",23),f._uU(1,"Invalid name!"),f.qZA())}function ZN(n,e){1&n&&(f.TgZ(0,"span",23),f._uU(1,"Invalid price!"),f.qZA())}function KN(n,e){1&n&&(f.TgZ(0,"span",23),f._uU(1,"Invalid image url!"),f.qZA())}let YN=(()=>{class n{constructor(t,r){this.router=t,this.itemService=r}ngOnInit(){this.updateItemForm=new Ls({name:new $i(null,[Or.required]),price:new $i(null,[Or.required]),image:new $i(null,[Or.required])})}onFormSubmit(){!this.updateItemForm.valid||this.itemService.updateItem(this.updateItemForm.value).then(()=>{this.router.navigate(["/home"])})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(kn),f.Y36(qT))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-update-item"]],decls:40,vars:4,consts:[[1,"navbar","navbar-expand-sm","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand"],["type","button",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","/add",1,"nav-link"],["routerLink","/update",1,"nav-link"],["routerLink","/cart",1,"nav-link"],[1,"update-item-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"text-dark"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["class","help-block error",4,"ngIf"],["for","price"],["type","number","id","price","formControlName","price",1,"form-control"],["for","image"],["type","text","id","image","formControlName","image",1,"form-control"],["type","submit",1,"btn","btn-primary","col-md-12"],[1,"help-block","error"]],template:function(t,r){if(1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"Webshop"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"New Product"),f.qZA()(),f.TgZ(11,"li",7)(12,"a",9),f._uU(13,"Update Product"),f.qZA()(),f.TgZ(14,"li",7)(15,"a",10),f._uU(16,"Cart"),f.qZA()()()()()(),f.TgZ(17,"div",11)(18,"form",12),f.NdJ("ngSubmit",function(){return r.onFormSubmit()}),f.TgZ(19,"div",13)(20,"h2",14),f._uU(21,"Update Product"),f.qZA()(),f.TgZ(22,"div",13)(23,"label",15),f._uU(24,"Name"),f.qZA(),f._UZ(25,"input",16),f.qZA(),f.YNc(26,WN,2,0,"span",17),f.TgZ(27,"div",13)(28,"label",18),f._uU(29,"Price"),f.qZA(),f._UZ(30,"input",19),f.YNc(31,ZN,2,0,"span",17),f.qZA(),f.TgZ(32,"div",13)(33,"label",20),f._uU(34,"ImageURL"),f.qZA(),f._UZ(35,"input",21),f.qZA(),f.YNc(36,KN,2,0,"span",17),f.TgZ(37,"div",13)(38,"button",22),f._uU(39,"Update"),f.qZA()()()()),2&t){let o,u,d;f.xp6(18),f.Q6J("formGroup",r.updateItemForm),f.xp6(8),f.Q6J("ngIf",!(null!=(o=r.updateItemForm.get("name"))&&o.valid)&&(null==(o=r.updateItemForm.get("name"))?null:o.touched)),f.xp6(5),f.Q6J("ngIf",!(null!=(u=r.updateItemForm.get("price"))&&u.valid)&&(null==(u=r.updateItemForm.get("price"))?null:u.touched)),f.xp6(5),f.Q6J("ngIf",!(null!=(d=r.updateItemForm.get("image"))&&d.valid)&&(null==(d=r.updateItemForm.get("image"))?null:d.touched))}},directives:[Xa,Nu,hi,Yo,ci,Ui,Fr,Dn,nd],styles:[".update-item-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;margin:auto;align-content:center}.error[_ngcontent-%COMP%]{color:red}"]}),n})();function QN(n,e){1&n&&(f.TgZ(0,"span",23),f._uU(1,"Invalid name!"),f.qZA())}function JN(n,e){1&n&&(f.TgZ(0,"span",23),f._uU(1,"Invalid price!"),f.qZA())}function XN(n,e){1&n&&(f.TgZ(0,"span",23),f._uU(1,"Invalid image url!"),f.qZA())}let e1=(()=>{class n{constructor(t,r){this.router=t,this.itemService=r}ngOnInit(){this.addItemForm=new Ls({name:new $i(null,[Or.required]),price:new $i(null,[Or.required]),image:new $i(null,[Or.required])})}onFormSubmit(){!this.addItemForm.valid||this.itemService.addItem(this.addItemForm.value).then(()=>{this.router.navigate(["/home"])})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(kn),f.Y36(qT))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-add-item"]],decls:40,vars:4,consts:[[1,"navbar","navbar-expand-sm","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand"],["type","button",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","/add",1,"nav-link"],["routerLink","/update",1,"nav-link"],["routerLink","/cart",1,"nav-link"],[1,"add-item-container"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"text-dark"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],["class","help-block error",4,"ngIf"],["for","price"],["type","number","id","price","formControlName","price",1,"form-control"],["for","image"],["type","text","id","image","formControlName","image",1,"form-control"],["type","submit",1,"btn","btn-primary","col-md-12"],[1,"help-block","error"]],template:function(t,r){if(1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"Webshop"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"New Product"),f.qZA()(),f.TgZ(11,"li",7)(12,"a",9),f._uU(13,"Update Product"),f.qZA()(),f.TgZ(14,"li",7)(15,"a",10),f._uU(16,"Cart"),f.qZA()()()()()(),f.TgZ(17,"div",11)(18,"form",12),f.NdJ("ngSubmit",function(){return r.onFormSubmit()}),f.TgZ(19,"div",13)(20,"h2",14),f._uU(21,"New Product"),f.qZA()(),f.TgZ(22,"div",13)(23,"label",15),f._uU(24,"Name"),f.qZA(),f._UZ(25,"input",16),f.qZA(),f.YNc(26,QN,2,0,"span",17),f.TgZ(27,"div",13)(28,"label",18),f._uU(29,"Price"),f.qZA(),f._UZ(30,"input",19),f.YNc(31,JN,2,0,"span",17),f.qZA(),f.TgZ(32,"div",13)(33,"label",20),f._uU(34,"ImageURL"),f.qZA(),f._UZ(35,"input",21),f.qZA(),f.YNc(36,XN,2,0,"span",17),f.TgZ(37,"div",13)(38,"button",22),f._uU(39,"Add"),f.qZA()()()()),2&t){let o,u,d;f.xp6(18),f.Q6J("formGroup",r.addItemForm),f.xp6(8),f.Q6J("ngIf",!(null!=(o=r.addItemForm.get("name"))&&o.valid)&&(null==(o=r.addItemForm.get("name"))?null:o.touched)),f.xp6(5),f.Q6J("ngIf",!(null!=(u=r.addItemForm.get("price"))&&u.valid)&&(null==(u=r.addItemForm.get("price"))?null:u.touched)),f.xp6(5),f.Q6J("ngIf",!(null!=(d=r.addItemForm.get("image"))&&d.valid)&&(null==(d=r.addItemForm.get("image"))?null:d.touched))}},directives:[Xa,Nu,hi,Yo,ci,Ui,Fr,Dn,nd],styles:[".add-item-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;margin:auto;align-content:center}.error[_ngcontent-%COMP%]{color:red}"]}),n})(),NM=(()=>{class n{constructor(t){this.afs=t,this.cartItems=[]}getCartItems(){return this.cartItems}addToCart(t){this.cartItems.push(t)}orderProducts(t){var r=this;return(0,me.Z)(function*(){let o="";r.cartItems.forEach(d=>{o+=d.name+";"});const u={uid:localStorage.getItem("user"),products:o,totalCost:t};return yield r.afs.collection("Orders").add(u)})()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(RM))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function t1(n,e){if(1&n&&(f.TgZ(0,"tr")(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._UZ(6,"img",15),f.qZA()()),2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.name),f.xp6(2),f.hij("$",t.price,""),f.xp6(2),f.s9C("src",t.image,f.LSH)}}let n1=(()=>{class n{constructor(t,r){this.router=t,this.cartService=r,this.items=[],this.totalCost=0}ngOnInit(){this.items=this.cartService.getCartItems(),this.items.forEach(t=>{this.totalCost+=t.price})}orderProducts(){this.cartService.orderProducts(this.totalCost).then(()=>{alert("Thank you for your order!"),this.router.navigate(["/home"])})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(kn),f.Y36(NM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-cart"]],decls:37,vars:2,consts:[[1,"navbar","navbar-expand-sm","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand"],["type","button",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","/add",1,"nav-link"],["routerLink","/update",1,"nav-link"],["routerLink","/cart",1,"nav-link"],[1,"cart-container"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["alt","assets/altImg.jpg",3,"src"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"Webshop"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"New Product"),f.qZA()(),f.TgZ(11,"li",7)(12,"a",9),f._uU(13,"Update Product"),f.qZA()(),f.TgZ(14,"li",7)(15,"a",10),f._uU(16,"Cart"),f.qZA()()()()()(),f.TgZ(17,"div",11)(18,"h2"),f._uU(19,"Your Cart"),f.qZA(),f.TgZ(20,"table",12)(21,"thead")(22,"tr")(23,"th"),f._uU(24,"Product Name"),f.qZA(),f.TgZ(25,"th"),f._uU(26,"Price"),f.qZA(),f.TgZ(27,"th"),f._uU(28,"Image"),f.qZA()()(),f.TgZ(29,"tbody"),f.YNc(30,t1,7,3,"tr",13),f.qZA()(),f.TgZ(31,"div")(32,"h3"),f._uU(33),f.qZA()(),f.TgZ(34,"div")(35,"button",14),f.NdJ("click",function(){return r.orderProducts()}),f._uU(36,"Order Products"),f.qZA()()()),2&t&&(f.xp6(30),f.Q6J("ngForOf",r.items),f.xp6(3),f.hij("Total Cost: $",r.totalCost,""))},directives:[Xa,On],styles:[".cart-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}"]}),n})(),r1=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-notfound"]],decls:10,vars:0,consts:[[1,"page-wrap","d-flex","flex-row","align-items-center"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-12","text-center"],[1,"display-1","d-block"],[1,"mb-4","lead"],["routerLink","/home",1,"btn","btn-link"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),f._uU(5,"404"),f.qZA(),f.TgZ(6,"div",5),f._uU(7,"The page you are looking for was not found."),f.qZA(),f.TgZ(8,"a",6),f._uU(9,"Back to Home"),f.qZA()()()()())},directives:[Xa],styles:["body[_ngcontent-%COMP%]{background:#dedede}.page-wrap[_ngcontent-%COMP%]{min-height:100vh}"]}),n})(),ib=(()=>{class n{constructor(t,r){this.router=t,this.auth=r}login(t){return this.auth.signInWithEmailAndPassword(t.email,t.password)}logout(){return localStorage.clear(),this.auth.signOut()}generateToken(t){localStorage.setItem("user",t.user.uid),this.router.navigate(["/home"])}getLoggedInToken(){return!!localStorage.getItem("user")}signUp(t){return this.auth.createUserWithEmailAndPassword(t.email,t.password)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(kn),f.LFG($T))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),i1=(()=>{class n{constructor(t){this.cartService=t}ngOnInit(){}buyItem(){this.cartService.addToCart(new n_(this.name,this.price,this.image))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(NM))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-item"]],inputs:{name:"name",price:"price",image:"image"},decls:8,vars:3,consts:[[1,"item","border","border-3","bg-dark","bg-gradient"],["alt","assets/altImg.jpg",3,"src"],[1,"item-name","text-light"],["id","purchaseItem","type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"img",1),f.TgZ(2,"span",2),f._uU(3),f.qZA(),f.TgZ(4,"span",2),f._uU(5),f.qZA(),f.TgZ(6,"button",3),f.NdJ("click",function(){return r.buyItem()}),f._uU(7,"Buy"),f.qZA()()),2&t&&(f.xp6(1),f.Q6J("src",r.image,f.LSH),f.xp6(2),f.Oqu(r.name),f.xp6(2),f.hij("$",r.price,""))},styles:[".item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.item-name[_ngcontent-%COMP%]{align-self:center;color:azure}"]}),n})();function s1(n,e){if(1&n&&(f.TgZ(0,"div",13),f._UZ(1,"app-item",14),f.qZA()),2&n){const t=e.$implicit;f.xp6(1),f.Q6J("name",t.name)("price",t.price)("image",t.image)}}let o1=(()=>{class n{constructor(t,r,o){this.loginService=t,this.itemService=r,this.router=o,this.items=[]}ngOnInit(){this.items=this.itemService.getItems()}logout(){this.loginService.logout().then(()=>{this.router.navigate(["/login"])})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ib),f.Y36(qT),f.Y36(kn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-homepage"]],decls:20,vars:1,consts:[[1,"navbar","navbar-expand-sm","navbar-dark","bg-dark"],[1,"container-fluid"],["routerLink","/home",1,"navbar-brand"],["type","button",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto"],[1,"nav-item"],["routerLink","/add",1,"nav-link"],["routerLink","/update",1,"nav-link"],["routerLink","/cart",1,"nav-link"],["type","button",1,"btn","btn-primary",3,"click"],["class","shopping-list",4,"ngFor","ngForOf"],[1,"shopping-list"],[3,"name","price","image"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"Webshop"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"New Product"),f.qZA()(),f.TgZ(11,"li",7)(12,"a",9),f._uU(13,"Update Product"),f.qZA()(),f.TgZ(14,"li",7)(15,"a",10),f._uU(16,"Cart"),f.qZA()()(),f.TgZ(17,"button",11),f.NdJ("click",function(){return r.logout()}),f._uU(18," Logout "),f.qZA()()()(),f.YNc(19,s1,2,3,"div",12)),2&t&&(f.xp6(19),f.Q6J("ngForOf",r.items))},directives:[Xa,On,i1],styles:[".shopping-list[_ngcontent-%COMP%]{display:inline-flex;gap:10px;flex-direction:row;flex-wrap:wrap}"]}),n})();function a1(n,e){1&n&&(f.TgZ(0,"div",18)(1,"h1"),f._uU(2,"Error: Wrong login credentials"),f.qZA()())}function u1(n,e){1&n&&(f.TgZ(0,"span",19),f._uU(1,"Invalid email!"),f.qZA())}function l1(n,e){1&n&&(f.TgZ(0,"span",19),f._uU(1,"Invalid password!"),f.qZA())}let c1=(()=>{class n{constructor(t,r){this.loginService=t,this.router=r,this.token="",this.error=!1}ngOnInit(){localStorage.clear(),this.signInForm=new Ls({email:new $i(null,[Or.required,Or.email]),password:new $i(null,[Or.required,Or.minLength(6)])})}onFormSubmit(){!this.signInForm.valid||this.loginService.login(this.signInForm.value).then(t=>{this.loginService.generateToken(t)}).catch(t=>{this.error=!0})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ib),f.Y36(kn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:30,vars:4,consts:[[1,"container-fluid","px-0"],[1,"row","mx-auto"],[1,"col-md-6","p-0"],["src","https://www.gadgetcrutches.com/wp-content/uploads/2021/12/Elden-Ring-logo.jpg","alt","Welcome",1,"img-fluid"],[1,"col-md-6","mx-auto","d-flex","justify-content-center","align-items-center"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"text-dark"],[1,"text-muted"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["class","help-block error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-success","col-md-12"],[1,"form-group","text-muted","signUp"],["routerLink","/signup",1,"link-dark"],[1,"alert","alert-danger"],[1,"help-block","error"]],template:function(t,r){if(1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2),f._UZ(3,"img",3),f.qZA(),f.TgZ(4,"div",4)(5,"div"),f.YNc(6,a1,3,0,"div",5),f.TgZ(7,"form",6),f.NdJ("ngSubmit",function(){return r.onFormSubmit()}),f.TgZ(8,"div",7)(9,"h2",8),f._uU(10,"Welcome"),f.qZA(),f.TgZ(11,"h5",9),f._uU(12,"Welcome, please log in."),f.qZA()(),f.TgZ(13,"div",7)(14,"label",10),f._uU(15,"Email"),f.qZA(),f._UZ(16,"input",11),f.YNc(17,u1,2,0,"span",12),f.qZA(),f.TgZ(18,"div",7)(19,"label",13),f._uU(20,"Password"),f.qZA(),f._UZ(21,"input",14),f.YNc(22,l1,2,0,"span",12),f.qZA(),f.TgZ(23,"div",7)(24,"button",15),f._uU(25," Sign in "),f.qZA(),f.TgZ(26,"div",16),f._uU(27," Don't have an account? "),f.TgZ(28,"a",17),f._uU(29,"Sign up"),f.qZA()()()()()()()()),2&t){let o,u;f.xp6(6),f.Q6J("ngIf",r.error),f.xp6(1),f.Q6J("formGroup",r.signInForm),f.xp6(10),f.Q6J("ngIf",!(null!=(o=r.signInForm.get("email"))&&o.valid)&&(null==(o=r.signInForm.get("email"))?null:o.touched)),f.xp6(5),f.Q6J("ngIf",!(null!=(u=r.signInForm.get("password"))&&u.valid)&&(null==(u=r.signInForm.get("password"))?null:u.touched))}},directives:[Dn,Nu,hi,Yo,ci,Ui,Fr,Xa],styles:[".error[_ngcontent-%COMP%]{color:red}.col-md-6[_ngcontent-%COMP%]{max-width:100%;height:100vh}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.form-group[_ngcontent-%COMP%]{margin:30px}.signUp[_ngcontent-%COMP%]{margin:100px}.btn[_ngcontent-%COMP%]{margin-top:30px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none}@media only screen and (max-width: 600px){.row[_ngcontent-%COMP%]{flex-direction:column}}"]}),n})(),sb=(()=>{class n{constructor(t,r){this.loginService=t,this.router=r}canActivate(t,r){return this.loginService.getLoggedInToken()||this.router.navigate(["/login"]),this.loginService.getLoggedInToken()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ib),f.LFG(kn))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function d1(n,e){1&n&&(f.TgZ(0,"div",15)(1,"h1"),f._uU(2,"Error"),f.qZA()())}function h1(n,e){1&n&&(f.TgZ(0,"span",16),f._uU(1,"Invalid email!"),f.qZA())}function f1(n,e){1&n&&(f.TgZ(0,"span",16),f._uU(1,"Invalid password!"),f.qZA())}const p1=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"login",component:c1},{path:"signup",component:(()=>{class n{constructor(t,r){this.loginService=t,this.router=r,this.token="",this.error=!1}ngOnInit(){this.signUpForm=new Ls({email:new $i(null,[Or.required,Or.email]),password:new $i(null,[Or.required,Or.minLength(6)])})}onFormSubmit(){!this.signUpForm.valid||this.loginService.signUp(this.signUpForm.value).then(()=>{this.router.navigate(["/login"])}).catch(()=>{this.error=!0})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ib),f.Y36(kn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-signup"]],decls:24,vars:4,consts:[[1,"container-fluid","px-0"],[1,"row","mx-auto"],[1,"col-md-6","p-0"],["src","https://www.gadgetcrutches.com/wp-content/uploads/2021/12/Elden-Ring-logo.jpg","alt","Welcome",1,"img-fluid"],[1,"col-md-6","mx-auto","d-flex","justify-content-center","align-items-center"],["class","alert alert-danger",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"text-dark"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["class","help-block error",4,"ngIf"],["for","password"],["type","text","id","password","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-success","col-md-12"],[1,"alert","alert-danger"],[1,"help-block","error"]],template:function(t,r){if(1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2),f._UZ(3,"img",3),f.qZA(),f.TgZ(4,"div",4)(5,"div"),f.YNc(6,d1,3,0,"div",5),f.TgZ(7,"form",6),f.NdJ("ngSubmit",function(){return r.onFormSubmit()}),f.TgZ(8,"div",7)(9,"h2",8),f._uU(10,"Sign Up Here"),f.qZA()(),f.TgZ(11,"div",7)(12,"label",9),f._uU(13,"Email"),f.qZA(),f._UZ(14,"input",10),f.YNc(15,h1,2,0,"span",11),f.qZA(),f.TgZ(16,"div",7)(17,"label",12),f._uU(18,"Password"),f.qZA(),f._UZ(19,"input",13),f.YNc(20,f1,2,0,"span",11),f.qZA(),f.TgZ(21,"div",7)(22,"button",14),f._uU(23," Sign up "),f.qZA()()()()()()()),2&t){let o,u;f.xp6(6),f.Q6J("ngIf",r.error),f.xp6(1),f.Q6J("formGroup",r.signUpForm),f.xp6(8),f.Q6J("ngIf",!(null!=(o=r.signUpForm.get("email"))&&o.valid)&&(null==(o=r.signUpForm.get("email"))?null:o.touched)),f.xp6(5),f.Q6J("ngIf",!(null!=(u=r.signUpForm.get("password"))&&u.valid)&&(null==(u=r.signUpForm.get("password"))?null:u.touched))}},directives:[Dn,Nu,hi,Yo,ci,Ui,Fr],styles:[".error[_ngcontent-%COMP%]{color:red}.col-md-6[_ngcontent-%COMP%]{max-width:100%;height:100vh}img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.form-group[_ngcontent-%COMP%]{margin:30px}.signUp[_ngcontent-%COMP%]{margin:100px}.btn[_ngcontent-%COMP%]{margin-top:30px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:700}a[_ngcontent-%COMP%]{font-weight:700;text-decoration:none}@media only screen and (max-width: 600px){.row[_ngcontent-%COMP%]{flex-direction:column}}"]}),n})()},{path:"home",component:o1,canActivate:[sb]},{path:"cart",component:n1,canActivate:[sb]},{path:"add",component:e1,canActivate:[sb]},{path:"update",component:YN,canActivate:[sb]},{path:"**",component:r1}];let g1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[_E.forRoot(p1)],_E]}),n})(),m1=(()=>{class n{constructor(){this.title="prf-project-szm"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[cf],styles:[""]}),n})(),y1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[m1]}),n.\u0275inj=f.cJS({providers:[],imports:[[Aa,g1,Wh,js.hO.initializeApp(jp_firebaseConfig)]]}),n})();(0,f.G48)(),Iu().bootstrapModule(y1).catch(n=>console.error(n))},5867:(Ke,ve,O)=>{O.d(ve,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=O(9681);(0,f.registerVersion)("firebase","9.8.0","app")},127:(Ke,ve,O)=>{O.d(ve,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.8.0","app-compat")},7139:(Ke,ve,O)=>{O.r(ve);var f=O(5861),J=O(3942),P=O(2090),ue=O(9681),re=O(655),pe=O(1877),le=O(4859);const xe=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),He=new pe.Yd("@firebase/auth");function We(y,...h){He.logLevel<=pe.in.ERROR&&He.error(`Auth (${ue.SDK_VERSION}): ${y}`,...h)}function be(y,...h){throw Ve(y,...h)}function _e(y,...h){return Ve(y,...h)}function Ee(y,h,p){const v=Object.assign(Object.assign({},Le()),{[h]:p});return new P.LL("auth","Firebase",v).create(h,{appName:y.name})}function Ue(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&be(y,"argument-error"),Ee(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(y,...h){if("string"!=typeof y){const p=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(p,...v)}return he.create(y,...h)}function j(y,h,...p){if(!y)throw Ve(h,...p)}function V(y){const h="INTERNAL ASSERTION FAILED: "+y;throw We(h),new Error(h)}function Z(y,h){y||V(h)}const oe=new Map;function te(y){Z(y instanceof Function,"Expected a class definition");let h=oe.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,oe.set(y,h),h)}function at(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function Dt(){return"http:"===wn()||"https:"===wn()}function wn(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class hn{constructor(h,p){this.shortDelay=h,this.longDelay=p,Z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Je(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Dt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jt(y,h){Z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Wn{static initialize(h,p,v){this.fetchImpl=h,p&&(this.headersImpl=p),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void V("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void V("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void V("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Hr=new hn(3e4,6e4);function Gt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function xt(y,h,p,v){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,f.Z)(function*(y,h,p,v,T={}){return Gr(y,T,(0,f.Z)(function*(){let x={},z={};v&&("GET"===h?z=v:x={body:JSON.stringify(v)});const fe=(0,P.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Pe=yield y._getAdditionalHeaders();return Pe["Content-Type"]="application/json",y.languageCode&&(Pe["X-Firebase-Locale"]=y.languageCode),Wn.fetch()(Es(y,y.config.apiHost,p,fe),Object.assign({method:h,headers:Pe,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Gr(y,h,p){return nr.apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(y,h,p){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Kt),h);try{const T=new qr(y),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const z=yield x.json();if("needConfirmation"in z)throw bi(y,"account-exists-with-different-credential",z);if(x.ok&&!("errorMessage"in z))return z;{const fe=x.ok?z.errorMessage:z.error.message,[Pe,ze]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw bi(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Pe)throw bi(y,"email-already-in-use",z);const ct=v[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(ze)throw Ee(y,ct,ze);be(y,ct)}}catch(T){if(T instanceof P.ZR)throw T;be(y,"network-request-failed")}})).apply(this,arguments)}function gr(y,h,p,v){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,f.Z)(function*(y,h,p,v,T={}){const x=yield xt(y,h,p,v,T);return"mfaPendingCredential"in x&&be(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Es(y,h,p,v){const T=`${h}${p}?${v}`;return y.config.emulator?jt(y.config,T):`${y.config.apiScheme}://${T}`}class qr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),Hr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bi(y,h,p){const v={appName:y.name};p.email&&(v.email=p.email),p.phoneNumber&&(v.phoneNumber=p.phoneNumber);const T=_e(y,h,v);return T.customData._tokenResponse=p,T}function zr(){return(zr=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function fn(y,h){return mn.apply(this,arguments)}function mn(){return(mn=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function zs(y,h){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Un(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Co(){return(Co=(0,f.Z)(function*(y,h=!1){const p=(0,P.m9)(y),v=yield p.getIdToken(h),T=tt(v);j(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,z=null==x?void 0:x.sign_in_provider;return{claims:T,token:v,authTime:Un(Ft(T.auth_time)),issuedAtTime:Un(Ft(T.iat)),expirationTime:Un(Ft(T.exp)),signInProvider:z||null,signInSecondFactor:(null==x?void 0:x.sign_in_second_factor)||null}})).apply(this,arguments)}function Ft(y){return 1e3*Number(y)}function tt(y){const[h,p,v]=y.split(".");if(void 0===h||void 0===p||void 0===v)return We("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(p);return T?JSON.parse(T):(We("Failed to decode base64 JWT payload"),null)}catch(T){return We("Caught error parsing JWT payload as JSON",T),null}}function rr(y,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,f.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&Rt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Rt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Ws{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield p.iteration()}),v)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p.code&&h.schedule(!0))}h.schedule()})()}}class ir{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Un(this.lastLoginAt),this.creationTime=Un(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sr(y){return L.apply(this,arguments)}function L(){return(L=(0,f.Z)(function*(y){var h;const p=y.auth,v=yield y.getIdToken(),T=yield rr(y,zs(p,{idToken:v}));j(null==T?void 0:T.users.length,p,"internal-error");const x=T.users[0];y._notifyReloadListener(x);const z=(null===(h=x.providerUserInfo)||void 0===h?void 0:h.length)?H(x.providerUserInfo):[],fe=we(y.providerData,z),ct=!!y.isAnonymous&&!(y.email&&x.passwordHash||(null==fe?void 0:fe.length)),rt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:fe,metadata:new ir(x.createdAt,x.lastLoginAt),isAnonymous:ct};Object.assign(y,rt)})).apply(this,arguments)}function q(){return(q=(0,f.Z)(function*(y){const h=(0,P.m9)(y);yield sr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function we(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function H(y){return y.map(h=>{var{providerId:p}=h,v=(0,re._T)(h,["providerId"]);return{providerId:p,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function Me(){return(Me=(0,f.Z)(function*(y,h){const p=yield Gr(y,{},(0,f.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:x}=y.config,z=Es(y,T,"/v1/token",`key=${x}`),fe=yield y._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",Wn.fetch()(z,{method:"POST",headers:fe,body:v})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Ze{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){j(h.idToken,"internal-error"),j(void 0!==h.idToken,"internal-error"),j(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function ft(y){const h=tt(y);return j(h,"internal-error"),j(void 0!==h.exp,"internal-error"),j(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var v=this;return(0,f.Z)(function*(){return j(!v.accessToken||v.refreshToken,h,"user-token-expired"),p||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var v=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:z}=yield function Q(y,h){return Me.apply(this,arguments)}(h,p);v.updateTokensAndExpiration(T,x,Number(z))})()}updateTokensAndExpiration(h,p,v){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,p){const{refreshToken:v,accessToken:T,expirationTime:x}=p,z=new Ze;return v&&(j("string"==typeof v,"internal-error",{appName:h}),z.refreshToken=v),T&&(j("string"==typeof T,"internal-error",{appName:h}),z.accessToken=T),x&&(j("number"==typeof x,"internal-error",{appName:h}),z.expirationTime=x),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Ze,this.toJSON())}_performRefresh(){return V("not implemented")}}function it(y,h){j("string"==typeof y||void 0===y,"internal-error",{appName:h})}class yt{constructor(h){var{uid:p,auth:v,stsTokenManager:T}=h,x=(0,re._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ws(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new ir(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,f.Z)(function*(){const v=yield rr(p,p.stsTokenManager.getToken(p.auth,h));return j(v,p.auth,"internal-error"),p.accessToken!==v&&(p.accessToken=v,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),v})()}getIdTokenResult(h){return function si(y){return Co.apply(this,arguments)}(this,h)}reload(){return function G(y){return q.apply(this,arguments)}(this)}_assign(h){this!==h&&(j(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new yt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var v=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield sr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,f.Z)(function*(){const p=yield h.getIdToken();return yield rr(h,function lt(y,h){return zr.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var v,T,x,z,fe,Pe,ze,ct;const rt=null!==(v=p.displayName)&&void 0!==v?v:void 0,An=null!==(T=p.email)&&void 0!==T?T:void 0,yi=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,Vu=null!==(z=p.photoURL)&&void 0!==z?z:void 0,dg=null!==(fe=p.tenantId)&&void 0!==fe?fe:void 0,Jo=null!==(Pe=p._redirectEventId)&&void 0!==Pe?Pe:void 0,ud=null!==(ze=p.createdAt)&&void 0!==ze?ze:void 0,Xh=null!==(ct=p.lastLoginAt)&&void 0!==ct?ct:void 0,{uid:ef,emailVerified:Vl,isAnonymous:At,providerData:tf,stsTokenManager:Wa}=p;j(ef&&Wa,h,"internal-error");const hg=Ze.fromJSON(this.name,Wa);j("string"==typeof ef,h,"internal-error"),it(rt,h.name),it(An,h.name),j("boolean"==typeof Vl,h,"internal-error"),j("boolean"==typeof At,h,"internal-error"),it(yi,h.name),it(Vu,h.name),it(dg,h.name),it(Jo,h.name),it(ud,h.name),it(Xh,h.name);const Ul=new yt({uid:ef,auth:h,email:An,emailVerified:Vl,displayName:rt,isAnonymous:At,photoURL:Vu,phoneNumber:yi,tenantId:dg,stsTokenManager:hg,createdAt:ud,lastLoginAt:Xh});return tf&&Array.isArray(tf)&&(Ul.providerData=tf.map(my=>Object.assign({},my))),Jo&&(Ul._redirectEventId=Jo),Ul}static _fromIdTokenResponse(h,p,v=!1){return(0,f.Z)(function*(){const T=new Ze;T.updateFromServerResponse(p);const x=new yt({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield sr(x),x})()}}const pt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(p,v){var T=this;return(0,f.Z)(function*(){T.storage[p]=v})()}_get(p){var v=this;return(0,f.Z)(function*(){const T=v.storage[p];return void 0===T?null:T})()}_remove(p){var v=this;return(0,f.Z)(function*(){delete v.storage[p]})()}_addListener(p,v){}_removeListener(p,v){}}return y.type="NONE",y})();function xn(y,h,p){return`firebase:${y}:${h}:${p}`}class mr{constructor(h,p,v){this.persistence=h,this.auth=p,this.userKey=v;const{config:T,name:x}=this.auth;this.fullUserKey=xn(this.userKey,T.apiKey,x),this.fullPersistenceKey=xn("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?yt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,f.Z)(function*(){if(p.persistence===h)return;const v=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,v?p.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,v="authUser"){return(0,f.Z)(function*(){if(!p.length)return new mr(te(pt),h,v);const T=(yield Promise.all(p.map(function(){var ze=(0,f.Z)(function*(ct){if(yield ct._isAvailable())return ct});return function(ct){return ze.apply(this,arguments)}}()))).filter(ze=>ze);let x=T[0]||te(pt);const z=xn(v,h.config.apiKey,h.name);let fe=null;for(const ze of p)try{const ct=yield ze._get(z);if(ct){const rt=yt._fromJSON(h,ct);ze!==x&&(fe=rt),x=ze;break}}catch(ct){}const Pe=T.filter(ze=>ze._shouldAllowMigration);return x._shouldAllowMigration&&Pe.length?(x=Pe[0],fe&&(yield x._set(z,fe.toJSON())),yield Promise.all(p.map(function(){var ze=(0,f.Z)(function*(ct){if(ct!==x)try{yield ct._remove(z)}catch(rt){}});return function(ct){return ze.apply(this,arguments)}}())),new mr(x,h,v)):new mr(x,h,v)})()}}function du(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Rn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ha(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ji(h))return"Blackberry";if(Nn(h))return"Webos";if(hu(h))return"Safari";if((h.includes("chrome/")||fa(h))&&!h.includes("edge/"))return"Chrome";if(yr(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ha(y=(0,P.z$)()){return/firefox\//i.test(y)}function hu(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function fa(y=(0,P.z$)()){return/crios\//i.test(y)}function Rn(y=(0,P.z$)()){return/iemobile/i.test(y)}function yr(y=(0,P.z$)()){return/android/i.test(y)}function Ji(y=(0,P.z$)()){return/blackberry/i.test(y)}function Nn(y=(0,P.z$)()){return/webos/i.test(y)}function Mr(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function ws(y=(0,P.z$)()){return Mr(y)||yr(y)||Nn(y)||Ji(y)||/windows phone/i.test(y)||Rn(y)}function To(y,h=[]){let p;switch(y){case"Browser":p=du((0,P.z$)());break;case"Worker":p=`${du((0,P.z$)())}-${y}`;break;default:p=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ue.SDK_VERSION}/${v}`}class xr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const v=x=>new Promise((z,fe)=>{try{z(h(x))}catch(Pe){fe(Pe)}});v.onAbort=p,this.queue.push(v);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,f.Z)(function*(){if(p.auth.currentUser===h)return;const v=[];try{for(const T of p.queue)yield T(h),T.onAbort&&v.push(T.onAbort)}catch(T){v.reverse();for(const x of v)try{x()}catch(z){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T.message})}})()}}class Ge{constructor(h,p,v){this.app=h,this.heartbeatServiceProvider=p,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zt(this),this.idTokenSubscription=new Zt(this),this.beforeStateQueue=new xr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,p){var v=this;return p&&(this._popupRedirectResolver=te(p)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,x;if(!v._deleted&&(v.persistenceManager=yield mr.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(z){}yield v.initializeCurrentUser(p),v.lastNotifiedUid=(null===(x=v.currentUser)||void 0===x?void 0:x.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,f.Z)(function*(){var v;const T=yield p.assertedPersistence.getCurrentUser();let x=T,z=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const fe=null===(v=p.redirectUser)||void 0===v?void 0:v._redirectEventId,Pe=null==x?void 0:x._redirectEventId,ze=yield p.tryRedirectSignIn(h);(!fe||fe===Pe)&&(null==ze?void 0:ze.user)&&(x=ze.user,z=!0)}if(!x)return p.directlySetCurrentUser(null);if(!x._redirectEventId){if(z)try{yield p.beforeStateQueue.runMiddleware(x)}catch(fe){x=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(fe))}return x?p.reloadAndSetCurrentUserOrClear(x):p.directlySetCurrentUser(null)}return j(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===x._redirectEventId?p.directlySetCurrentUser(x):p.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(h){var p=this;return(0,f.Z)(function*(){let v=null;try{v=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(T){yield p._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,f.Z)(function*(){try{yield sr(h)}catch(v){if("auth/network-request-failed"!==v.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function mt(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,f.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&j(v.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(v&&v._clone(p))})()}_updateCurrentUser(h,p=!1){var v=this;return(0,f.Z)(function*(){if(!v._deleted)return h&&j(v.tenantId===h.tenantId,v,"tenant-id-mismatch"),p||(yield v.beforeStateQueue.runMiddleware(h)),v.queue((0,f.Z)(function*(){yield v.directlySetCurrentUser(h),v.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,f.Z)(function*(){yield p.assertedPersistence.setPersistence(te(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,p,v){return this.registerStateListener(this.authStateSubscription,h,p,v)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,v){return this.registerStateListener(this.idTokenSubscription,h,p,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var v=this;return(0,f.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,f.Z)(function*(){if(!p.redirectPersistenceManager){const v=h&&te(h)||p._popupRedirectResolver;j(v,p,"argument-error"),p.redirectPersistenceManager=yield mr.create(p,[te(v._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,f.Z)(function*(){var v,T;return p._isInitialized&&(yield p.queue((0,f.Z)(function*(){}))),(null===(v=p._currentUser)||void 0===v?void 0:v._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,f.Z)(function*(){if(h===p.currentUser)return p.queue((0,f.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,v,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),z=this._isInitialized?Promise.resolve():this._initializationPromise;return j(z,this,"internal-error"),z.then(()=>x(this.currentUser)),"function"==typeof p?h.addObserver(p,v,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,f.Z)(function*(){p.currentUser&&p.currentUser!==h&&(p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh()),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=To(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var p;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function nt(y){return(0,P.m9)(y)}class Zt{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(p=>this.observer=p)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Di(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Ci(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class oi{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return V("not implemented")}_getIdTokenResponse(h){return V("not implemented")}_linkToIdToken(h,p){return V("not implemented")}_getReauthenticationResolver(h){return V("not implemented")}}function yn(y,h){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:resetPassword",Gt(y,h))})).apply(this,arguments)}function ga(y,h){return Is.apply(this,arguments)}function Is(){return(Is=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function fu(y,h){return bs.apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",Gt(y,h))})).apply(this,arguments)}function Ks(){return(Ks=(0,f.Z)(function*(y,h){return gr(y,"POST","/v1/accounts:signInWithPassword",Gt(y,h))})).apply(this,arguments)}function Ds(y,h){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:sendOobCode",Gt(y,h))})).apply(this,arguments)}function Yt(y,h){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function ma(y,h){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function Ti(y,h){return gu.apply(this,arguments)}function gu(){return(gu=(0,f.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function Cc(y,h){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,f.Z)(function*(y,h){return Ds(y,h)})).apply(this,arguments)}function al(){return(al=(0,f.Z)(function*(y,h){return gr(y,"POST","/v1/accounts:signInWithEmailLink",Gt(y,h))})).apply(this,arguments)}function Tc(){return(Tc=(0,f.Z)(function*(y,h){return gr(y,"POST","/v1/accounts:signInWithEmailLink",Gt(y,h))})).apply(this,arguments)}class or extends oi{constructor(h,p,v,T=null){super("password",v),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new or(h,p,"password")}static _fromEmailAndCode(h,p,v=null){return new or(h,p,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,f.Z)(function*(){switch(p.signInMethod){case"password":return function On(y,h){return Ks.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Si(y,h){return al.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:be(h,"internal-error")}})()}_linkToIdToken(h,p){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return ga(h,{idToken:p,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function Rp(y,h){return Tc.apply(this,arguments)}(h,{idToken:p,email:v._email,oobCode:v._password});default:be(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Cs(y,h){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(y,h){return gr(y,"POST","/v1/accounts:signInWithIdp",Gt(y,h))})).apply(this,arguments)}class Xi extends oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Xi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):be("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=p,x=(0,re._T)(p,["providerId","signInMethod"]);if(!v||!T)return null;const z=new Xi(v,T);return z.idToken=x.idToken||void 0,z.accessToken=x.accessToken||void 0,z.secret=x.secret,z.nonce=x.nonce,z.pendingToken=x.pendingToken||null,z}_getIdTokenResponse(h){return Cs(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Cs(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Cs(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,P.xO)(p)}return h}}function Op(y,h){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:sendVerificationCode",Gt(y,h))})).apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(y,h){return gr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,h))})).apply(this,arguments)}function Mc(){return(Mc=(0,f.Z)(function*(y,h){const p=yield gr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,h));if(p.temporaryProof)throw bi(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const kp={USER_NOT_FOUND:"user-not-found"};function xc(){return(xc=(0,f.Z)(function*(y,h){return gr(y,"POST","/v1/accounts:signInWithPhoneNumber",Gt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),kp)})).apply(this,arguments)}class Ao extends oi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Ao({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Ao({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function ul(y,h){return Ts.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function Pp(y,h){return Mc.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Fp(y,h){return xc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:v,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:x}=h;return v||p||T||x?new Ao({verificationId:p,verificationCode:v,phoneNumber:T,temporaryProof:x}):null}}class mu{constructor(h){var p,v,T,x,z,fe;const Pe=(0,P.zd)((0,P.pd)(h)),ze=null!==(p=Pe.apiKey)&&void 0!==p?p:null,ct=null!==(v=Pe.oobCode)&&void 0!==v?v:null,rt=function mh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Pe.mode)&&void 0!==T?T:null);j(ze&&ct&&rt,"argument-error"),this.apiKey=ze,this.operation=rt,this.code=ct,this.continueUrl=null!==(x=Pe.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(z=Pe.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(fe=Pe.tenantId)&&void 0!==fe?fe:null}static parseLink(h){const p=function ya(y){const h=(0,P.zd)((0,P.pd)(y)).link,p=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||p||h||y}(h);try{return new mu(p)}catch(v){return null}}}let Nc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,v){return or._fromEmailAndPassword(p,v)}static credentialWithLink(p,v){const T=mu.parseLink(v);return j(T,"argument-error"),or._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ar{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Ys extends ar{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Mi extends Ys{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return j("providerId"in p&&"signInMethod"in p,"argument-error"),Xi._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return j(h.idToken||h.accessToken,"argument-error"),Xi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Mi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Mi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:x,nonce:z,providerId:fe}=h;if(!v&&!T&&!p&&!x||!fe)return null;try{return new Mi(fe)._credential({idToken:p,accessToken:v,nonce:z,pendingToken:x})}catch(Pe){return null}}}let So=(()=>{class y extends Ys{constructor(){super("facebook.com")}static credential(p){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Oc=(()=>{class y extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(p,v){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:v,oauthAccessToken:T}=p;if(!v&&!T)return null;try{return y.credential(v,T)}catch(x){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),yh=(()=>{class y extends Ys{constructor(){super("github.com")}static credential(p){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Qs extends oi{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Cs(h,this.buildRequest())}_linkToIdToken(h,p){const v=this.buildRequest();return v.idToken=p,Cs(h,v)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Cs(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:x}=p;return v&&T&&x&&v===T?new Qs(v,x):null}static _create(h,p){return new Qs(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _r extends ar{constructor(h){j(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return _r.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return _r.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Qs.fromJSON(h);return j(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:v}=h;if(!p||!v)return null;try{return Qs._create(v,p)}catch(T){return null}}}let kc=(()=>{class y extends Ys{constructor(){super("twitter.com")}static credential(p,v){return Xi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:v})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=p;if(!v||!T)return null;try{return y.credential(v,T)}catch(x){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function vr(y,h){return xo.apply(this,arguments)}function xo(){return(xo=(0,f.Z)(function*(y,h){return gr(y,"POST","/v1/accounts:signUp",Gt(y,h))})).apply(this,arguments)}class Kr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,v,T=!1){return(0,f.Z)(function*(){const x=yield yt._fromIdTokenResponse(h,v,T),z=ll(v);return new Kr({user:x,providerId:z,_tokenResponse:v,operationType:p})})()}static _forOperation(h,p,v){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=ll(v);return new Kr({user:h,providerId:T,_tokenResponse:v,operationType:p})})()}}function ll(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function cl(){return(cl=(0,f.Z)(function*(y){var h;const p=nt(y);if(yield p._initializationPromise,null===(h=p.currentUser)||void 0===h?void 0:h.isAnonymous)return new Kr({user:p.currentUser,providerId:null,operationType:"signIn"});const v=yield vr(p,{returnSecureToken:!0}),T=yield Kr._fromIdTokenResponse(p,"signIn",v,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ro extends P.ZR{constructor(h,p,v,T){var x;super(p.code,p.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Ro.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,p,v,T){return new Ro(h,p,v,T)}}function dl(y,h,p,v){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?Ro._fromErrorAndOperation(y,x,h,v):x})}function xi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Qt(){return(Qt=(0,f.Z)(function*(y,h){const p=(0,P.m9)(y);yield qt(!0,p,h);const{providerUserInfo:v}=yield fn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=xi(v||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function _a(y,h){return Js.apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(y,h,p=!1){const v=yield rr(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Kr._forOperation(y,"link",v)})).apply(this,arguments)}function qt(y,h,p){return va.apply(this,arguments)}function va(){return(va=(0,f.Z)(function*(y,h,p){yield sr(h);const T=!1===y?"provider-already-linked":"no-such-provider";j(xi(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function yu(y,h){return As.apply(this,arguments)}function As(){return(As=(0,f.Z)(function*(y,h,p=!1){const{auth:v}=y,T="reauthenticate";try{const x=yield rr(y,dl(v,T,h,y),p);j(x.idToken,v,"internal-error");const z=tt(x.idToken);j(z,v,"internal-error");const{sub:fe}=z;return j(y.uid===fe,v,"user-mismatch"),Kr._forOperation(y,T,x)}catch(x){throw"auth/user-not-found"===(null==x?void 0:x.code)&&be(v,"user-mismatch"),x}})).apply(this,arguments)}function Kn(y,h){return hl.apply(this,arguments)}function hl(){return(hl=(0,f.Z)(function*(y,h,p=!1){const v="signIn",T=yield dl(y,v,h),x=yield Kr._fromIdTokenResponse(y,v,T);return p||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function un(y,h){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,f.Z)(function*(y,h){return Kn(nt(y),h)})).apply(this,arguments)}function Yn(y,h){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,f.Z)(function*(y,h){const p=(0,P.m9)(y);return yield qt(!1,p,h.providerId),_a(p,h)})).apply(this,arguments)}function es(y,h){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,f.Z)(function*(y,h){return yu((0,P.m9)(y),h)})).apply(this,arguments)}function ai(y,h){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(y,h){return gr(y,"POST","/v1/accounts:signInWithCustomToken",Gt(y,h))})).apply(this,arguments)}function st(){return(st=(0,f.Z)(function*(y,h){const p=nt(y),v=yield ai(p,{token:h,returnSecureToken:!0}),T=yield Kr._fromIdTokenResponse(p,"signIn",v);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class Oo{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?_u._fromServerResponse(h,p):be(h,"internal-error")}}class _u extends Oo{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new _u(p)}}function wa(y,h,p){var v;j((null===(v=p.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),j(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(j(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(j(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function Ia(){return(Ia=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y),T={requestType:"PASSWORD_RESET",email:h};p&&wa(v,T,p),yield ma(v,T)})).apply(this,arguments)}function gl(){return(gl=(0,f.Z)(function*(y,h,p){yield yn((0,P.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function Tt(){return(Tt=(0,f.Z)(function*(y,h){yield fu((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function ml(y,h){return sn.apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*(y,h){const p=(0,P.m9)(y),v=yield yn(p,{oobCode:h}),T=v.requestType;switch(j(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(v.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(v.mfaInfo,p,"internal-error");default:j(v.email,p,"internal-error")}let x=null;return v.mfaInfo&&(x=Oo._fromServerResponse(nt(p),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function eo(){return(eo=(0,f.Z)(function*(y,h){const{data:p}=yield ml((0,P.m9)(y),h);return p.email})).apply(this,arguments)}function ba(){return(ba=(0,f.Z)(function*(y,h,p){const v=nt(y),T=yield vr(v,{returnSecureToken:!0,email:h,password:p}),x=yield Kr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(x.user),x})).apply(this,arguments)}function vu(){return(vu=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};j(p.handleCodeInApp,v,"argument-error"),p&&wa(v,T,p),yield Ti(v,T)})).apply(this,arguments)}function _n(){return(_n=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y),T=Nc.credentialWithLink(h,p||at());return j(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),un(v,T)})).apply(this,arguments)}function ts(y,h){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:createAuthUri",Gt(y,h))})).apply(this,arguments)}function ui(){return(ui=(0,f.Z)(function*(y,h){const v={identifier:h,continueUri:Dt()?at():"http://localhost"},{signinMethods:T}=yield ts((0,P.m9)(y),v);return T||[]})).apply(this,arguments)}function wu(){return(wu=(0,f.Z)(function*(y,h){const p=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&wa(p.auth,T,h);const{email:x}=yield Yt(p.auth,T);x!==y.email&&(yield y.reload())})).apply(this,arguments)}function Iu(){return(Iu=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&wa(v.auth,x,p);const{email:z}=yield Cc(v.auth,x);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Ta(y,h){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,f.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Sa(){return(Sa=(0,f.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const v=(0,P.m9)(y),x={idToken:yield v.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},z=yield rr(v,Ta(v.auth,x));v.displayName=z.displayName||null,v.photoURL=z.photoUrl||null;const fe=v.providerData.find(({providerId:Pe})=>"password"===Pe);fe&&(fe.displayName=v.displayName,fe.photoURL=v.photoURL),yield v._updateTokensIfNecessary(z)})).apply(this,arguments)}function ko(y,h,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,f.Z)(function*(y,h,p){const{auth:v}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(x.email=h),p&&(x.password=p);const z=yield rr(y,ga(v,x));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class Fo{constructor(h,p,v={}){this.isNewUser=h,this.providerId=p,this.profile=v}}class Vc extends Fo{constructor(h,p,v,T){super(h,p,v),this.username=T}}class Lo extends Fo{constructor(h,p){super(h,"facebook.com",p)}}class Oi extends Vc{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class vh extends Fo{constructor(h,p){super(h,"google.com",p)}}class Bn extends Vc{constructor(h,p,v){super(h,"twitter.com",p,v)}}function Pi(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Lc(y){var h,p;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const z=null===(p=null===(h=tt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(z)return new Fo(x,"anonymous"!==z&&"custom"!==z?z:null)}if(!v)return null;switch(v){case"facebook.com":return new Lo(x,T);case"github.com":return new Oi(x,T);case"google.com":return new vh(x,T);case"twitter.com":return new Bn(x,T,y.screenName||null);case"custom":case"anonymous":return new Fo(x,null);default:return new Fo(x,v,T)}}(p)}class ns{constructor(h,p){this.type=h,this.credential=p}static _fromIdtoken(h){return new ns("enroll",h)}static _fromMfaPendingCredential(h){return new ns("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,v;if(null==h?void 0:h.multiFactorSession){if(null===(p=h.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ns._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return ns._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Vo{constructor(h,p,v){this.session=h,this.hints=p,this.signInResolver=v}static _fromError(h,p){const v=nt(h),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(fe=>Oo._fromServerResponse(v,fe));j(T.mfaPendingCredential,v,"internal-error");const z=ns._fromMfaPendingCredential(T.mfaPendingCredential);return new Vo(z,x,function(){var fe=(0,f.Z)(function*(Pe){const ze=yield Pe._process(v,z);delete T.mfaInfo,delete T.mfaPendingCredential;const ct=Object.assign(Object.assign({},T),{idToken:ze.idToken,refreshToken:ze.refreshToken});switch(p.operationType){case"signIn":const rt=yield Kr._fromIdTokenResponse(v,p.operationType,ct);return yield v._updateCurrentUser(rt.user),rt;case"reauthenticate":return j(p.user,v,"internal-error"),Kr._forOperation(p.user,p.operationType,ct);default:be(v,"internal-error")}});return function(Pe){return fe.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,f.Z)(function*(){return p.signInResolver(h)})()}}function wh(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:start",Gt(y,h))}class jc{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(v=>Oo._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new jc(h)}getSession(){var h=this;return(0,f.Z)(function*(){return ns._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,p){var v=this;return(0,f.Z)(function*(){const T=h,x=yield v.getSession(),z=yield rr(v.user,T._process(v.user.auth,x,p));return yield v.user._updateTokensIfNecessary(z),v.user.reload()})()}unenroll(h){var p=this;return(0,f.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield p.user.getIdToken(),x=yield rr(p.user,function bu(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Gt(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:v}));p.enrolledFactors=p.enrolledFactors.filter(({uid:z})=>z!==v),yield p.user._updateTokensIfNecessary(x);try{yield p.user.reload()}catch(z){if("auth/user-token-expired"!==z.code)throw z}})()}}const Du=new WeakMap,no="__sak";class $c{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(no,"1"),this.storage.removeItem(no),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ra=(()=>{class y extends $c{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,v)=>this.onStorageEvent(p,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Bp(){const y=(0,P.z$)();return hu(y)||Mr(y)}()&&function Zn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ws(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),x=this.localCache[v];T!==x&&p(v,x,T)}}onStorageEvent(p,v=!1){if(!p.key)return void this.forAllChangedKeys((fe,Pe,ze)=>{this.notifyListeners(fe,ze)});const T=p.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(T);if(p.newValue!==fe)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!v)return}const x=()=>{const fe=this.storage.getItem(T);!v&&this.localCache[T]===fe||this.notifyListeners(T,fe)},z=this.storage.getItem(T);!function pa(){return(0,P.w1)()&&10===document.documentMode}()||z===p.newValue||p.newValue===p.oldValue?x():setTimeout(x,10)}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,v){var T=()=>super._set,x=this;return(0,f.Z)(function*(){yield T().call(x,p,v),x.localCache[p]=JSON.stringify(v)})()}_get(p){var v=()=>super._get,T=this;return(0,f.Z)(function*(){const x=yield v().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var v=()=>super._remove,T=this;return(0,f.Z)(function*(){yield v().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),li=(()=>{class y extends $c{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,v){}_removeListener(p,v){}}return y.type="SESSION",y})();let bl=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const v=this.receivers.find(x=>x.isListeningto(p));if(v)return v;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var v=this;return(0,f.Z)(function*(){const T=p,{eventId:x,eventType:z,data:fe}=T.data,Pe=v.handlersMap[z];if(!(null==Pe?void 0:Pe.size))return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:z});const ze=Array.from(Pe).map(function(){var rt=(0,f.Z)(function*(An){return An(T.origin,fe)});return function(An){return rt.apply(this,arguments)}}()),ct=yield function Il(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(v){return{fulfilled:!1,reason:v}}});return function(p){return h.apply(this,arguments)}}()))}(ze);T.ports[0].postMessage({status:"done",eventId:x,eventType:z,response:ct})})()}_subscribe(p,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(v)}_unsubscribe(p,v){this.handlersMap[p]&&v&&this.handlersMap[p].delete(v),(!v||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ki(y="",h=10){let p="";for(let v=0;v<h;v++)p+=Math.floor(10*Math.random());return y+p}class Uo{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,v=50){var T=this;return(0,f.Z)(function*(){const x="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let z,fe;return new Promise((Pe,ze)=>{const ct=ki("",20);x.port1.start();const rt=setTimeout(()=>{ze(new Error("unsupported_event"))},v);fe={messageChannel:x,onMessage(An){const yi=An;if(yi.data.eventId===ct)switch(yi.data.status){case"ack":clearTimeout(rt),z=setTimeout(()=>{ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Pe(yi.data.response);break;default:clearTimeout(rt),clearTimeout(z),ze(new Error("invalid_response"))}}},T.handlers.add(fe),x.port1.addEventListener("message",fe.onMessage),T.target.postMessage({eventType:h,eventId:ct,data:p},[x.port2])}).finally(()=>{fe&&T.removeMessageHandler(fe)})})()}}function zt(){return window}function wt(){return void 0!==zt().WorkerGlobalScope&&"function"==typeof zt().importScripts}function Tu(){return(Tu=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const zc="firebaseLocalStorageDb",Qr="firebaseLocalStorage",ur="fbase_key";class xs{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Qn(y,h){return y.transaction([Qr],h?"readwrite":"readonly").objectStore(Qr)}function Na(){const y=indexedDB.open(zc,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Qr,{keyPath:ur})}catch(T){p(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Qr)?h(v):(v.close(),yield function Wc(){const y=indexedDB.deleteDatabase(zc);return new xs(y).toPromise()}(),h(yield Na()))}))})}function Bo(y,h,p){return ci.apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(y,h,p){const v=Qn(y,!0).put({[ur]:h,value:p});return new xs(v).toPromise()})).apply(this,arguments)}function Rs(){return(Rs=(0,f.Z)(function*(y,h){const p=Qn(y,!1).get(h),v=yield new xs(p).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Cn(y,h){const p=Qn(y,!0).delete(h);return new xs(p).toPromise()}const Ns=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,f.Z)(function*(){return p.db||(p.db=yield Na()),p.db})()}_withRetries(p){var v=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const x=yield v._openDb();return yield p(x)}catch(x){if(T++>3)throw x;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,f.Z)(function*(){return wt()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,f.Z)(function*(){p.receiver=bl._getInstance(function qc(){return wt()?self:null}()),p.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return v.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return v.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,f.Z)(function*(){var v,T;if(p.activeServiceWorker=yield function Gc(){return Tu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Uo(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);!x||(null===(v=x[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=x[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Dl(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:p},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Na();return yield Bo(p,no,"1"),yield Cn(p,no),!0}catch(p){}return!1})()}_withPendingWrite(p){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield p()}finally{v.pendingWrites--}})()}_set(p,v){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(x=>Bo(x,p,v)),T.localCache[p]=v,T.notifyServiceWorker(p)}))})()}_get(p){var v=this;return(0,f.Z)(function*(){const T=yield v._withRetries(x=>function Fi(y,h){return Rs.apply(this,arguments)}(x,p));return v.localCache[p]=T,T})()}_remove(p){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(T=>Cn(T,p)),delete v.localCache[p],v.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,f.Z)(function*(){const v=yield p._withRetries(z=>{const fe=Qn(z,!1).getAll();return new xs(fe).toPromise()});if(!v)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:z,value:fe}of v)x.add(z),JSON.stringify(p.localCache[z])!==JSON.stringify(fe)&&(p.notifyListeners(z,fe),T.push(z));for(const z of Object.keys(p.localCache))p.localCache[z]&&!x.has(z)&&(p.notifyListeners(z,null),T.push(z));return T})()}notifyListeners(p,v){this.localCache[p]=v;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(v)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(v)}_removeListener(p,v){this.listeners[p]&&(this.listeners[p].delete(v),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Pa(y,h){return xt(y,"POST","/v2/accounts/mfaSignIn:start",Gt(y,h))}function jo(){return(jo=(0,f.Z)(function*(y){return(yield xt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Os(y){return new Promise((h,p)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const x=_e("internal-error");x.customData=T,p(x)},v.type="text/javascript",v.charset="UTF-8",function $o(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function Vi(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ho=1e12;class io{constructor(h){this.auth=h,this.counter=Ho,this._widgets=new Map}render(h,p){const v=this.counter;return this._widgets.set(v,new Ih(h,this.auth.name,p||{})),this.counter++,v}reset(h){var p;const v=h||Ho;null===(p=this._widgets.get(v))||void 0===p||p.delete(),this._widgets.delete(v)}getResponse(h){var p;return(null===(p=this._widgets.get(h||Ho))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,f.Z)(function*(){var v;return null===(v=p._widgets.get(h||Ho))||void 0===v||v.execute(),""})()}}class Ih{constructor(h,p,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;j(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Cl(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const an=Vi("rcb"),bh=new hn(3e4,6e4);class $p{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!zt().grecaptcha}load(h,p=""){return j(function Zc(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(zt().grecaptcha):new Promise((v,T)=>{const x=zt().setTimeout(()=>{T(_e(h,"network-request-failed"))},bh.get());zt()[an]=()=>{zt().clearTimeout(x),delete zt()[an];const fe=zt().grecaptcha;if(!fe)return void T(_e(h,"internal-error"));const Pe=fe.render;fe.render=(ze,ct)=>{const rt=Pe(ze,ct);return this.counter++,rt},this.hostLanguage=p,v(fe)},Os(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:an,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(_e(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!zt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Kc{load(h){return(0,f.Z)(function*(){return new io(h)})()}clearedOneInstance(){}}const Tl="recaptcha",Ch={theme:"light",type:"image"};class so{constructor(h,p=Object.assign({},Ch),v){this.parameters=p,this.type=Tl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nt(v),this.isInvisible="invisible"===this.parameters.size,j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;j(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Kc:new $p,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(p)||new Promise(x=>{const z=fe=>{!fe||(h.tokenChangeListeners.delete(z),x(fe))};h.tokenChangeListeners.add(z),h.isInvisible&&v.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(v=>v(p)),"function"==typeof h)h(p);else if("string"==typeof h){const v=zt()[h];"function"==typeof v&&v(p)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const v=document.createElement("div");p.appendChild(v),p=v}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){j(Dt()&&!wt(),h.auth,"internal-error"),yield function Al(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function ka(y){return jo.apply(this,arguments)}(h.auth);j(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ln{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Ao._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Ps(){return(Ps=(0,f.Z)(function*(y,h,p){const v=nt(y),T=yield Su(v,h,(0,P.m9)(p));return new ln(T,x=>un(v,x))})).apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y);yield qt(!1,v,"phone");const T=yield Su(v.auth,h,(0,P.m9)(p));return new ln(T,x=>Yn(v,x))})).apply(this,arguments)}function di(){return(di=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y),T=yield Su(v.auth,h,(0,P.m9)(p));return new ln(T,x=>es(v,x))})).apply(this,arguments)}function Su(y,h,p){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,f.Z)(function*(y,h,p){var v;const T=yield p.verify();try{let x;if(j("string"==typeof T,y,"argument-error"),j(p.type===Tl,y,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const z=x.session;if("phoneNumber"in x)return j("enroll"===z.type,y,"internal-error"),(yield wh(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{j("signin"===z.type,y,"internal-error");const fe=(null===(v=x.multiFactorHint)||void 0===v?void 0:v.uid)||x.multiFactorUid;return j(fe,y,"missing-multi-factor-info"),(yield Pa(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield Op(y,{phoneNumber:x.phoneNumber,recaptchaToken:T});return z}}finally{p._reset()}})).apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(y,h){yield _a((0,P.m9)(y),h)})).apply(this,arguments)}let Bi=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=nt(p)}verifyPhoneNumber(p,v){return Su(this.auth,p,(0,P.m9)(v))}static credential(p,v){return Ao._fromVerification(p,v)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:v,temporaryProof:T}=p;return v&&T?Ao._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function is(y,h){return h?te(h):(j(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class qo extends oi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Cs(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Cs(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Cs(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Yc(y){return Kn(y.auth,new qo(y),y.bypassAuthState)}function Sl(y){const{auth:h,user:p}=y;return j(p,h,"internal-error"),yu(p,new qo(y),y.bypassAuthState)}function fi(y){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,f.Z)(function*(y){const{auth:h,user:p}=y;return j(p,h,"internal-error"),_a(p,new qo(y),y.bypassAuthState)})).apply(this,arguments)}class La{constructor(h,p,v,T,x=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,f.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(v,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:x,tenantId:z,error:fe,type:Pe}=h;if(fe)return void p.reject(fe);const ze={auth:p.auth,requestUri:v,sessionId:T,tenantId:z||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Pe)(ze))}catch(ct){p.reject(ct)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Yc;case"linkViaPopup":case"linkViaRedirect":return fi;case"reauthViaPopup":case"reauthViaRedirect":return Sl;default:be(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ny=new hn(2e3,1e4);function Fs(){return(Fs=(0,f.Z)(function*(y,h,p){const v=nt(y);Ue(y,h,ar);const T=is(v,p);return new oo(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function Rl(){return(Rl=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y);Ue(v.auth,h,ar);const T=is(v.auth,p);return new oo(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function ss(){return(ss=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y);Ue(v.auth,h,ar);const T=is(v.auth,p);return new oo(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let oo=(()=>{class y extends La{constructor(p,v,T,x,z){super(p,v,x,z),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,f.Z)(function*(){const v=yield p.execute();return j(v,p.auth,"internal-error"),v})()}onExecution(){var p=this;return(0,f.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const v=ki();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],v),p.authWindow.associatedEvent=v,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(_e(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,ny.get())};p()}}return y.currentPopupAction=null,y})();const ji=new Map;class Qc extends La{constructor(h,p,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,f.Z)(function*(){let v=ji.get(p.auth._key());if(!v){try{const x=(yield function zo(y,h){return ao.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;v=()=>Promise.resolve(x)}catch(T){v=()=>Promise.reject(T)}ji.set(p.auth._key(),v)}return p.bypassAuthState||ji.set(p.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,p().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ao(){return(ao=(0,f.Z)(function*(y,h){const p=F(h),v=M(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(p));return yield v._remove(p),T})).apply(this,arguments)}function os(y,h){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,f.Z)(function*(y,h){return M(y)._set(F(h),"true")})).apply(this,arguments)}function D(y,h){ji.set(y._key(),h)}function M(y){return te(y._redirectPersistence)}function F(y){return xn("pendingRedirect",y.config.apiKey,y.name)}function Re(){return(Re=(0,f.Z)(function*(y,h,p){const v=nt(y);Ue(y,h,ar);const T=is(v,p);return yield os(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function dt(){return(dt=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y);Ue(v.auth,h,ar);const T=is(v.auth,p);yield os(T,v.auth);const x=yield Jr(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*(y,h,p){const v=(0,P.m9)(y);Ue(v.auth,h,ar);const T=is(v.auth,p);yield qt(!1,v,h.providerId),yield os(T,v.auth);const x=yield Jr(v);return T._openRedirect(v.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function Va(){return(Va=(0,f.Z)(function*(y,h){return yield nt(y)._initializationPromise,pi(y,h,!1)})).apply(this,arguments)}function pi(y,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,f.Z)(function*(y,h,p=!1){const v=nt(y),T=is(v,h),z=yield new Qc(v,T,p).execute();return z&&!p&&(delete z.user._redirectEventId,yield v._persistUserIfCurrent(z.user),yield v._setRedirectUser(null,h)),z})).apply(this,arguments)}function Jr(y){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(y){const h=ki(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Sh{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(p=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Xc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xu(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var v;if(h.error&&!xu(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";p.onError(_e(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const v=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mu(h))}saveEventToCache(h){this.cachedEventUids.add(Mu(h)),this.lastProcessedEventTime=Date.now()}}function Mu(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function xu({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Mh(y){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,f.Z)(function*(y,h={}){return xt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Ua=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ba=/^https?/;function xh(){return(xh=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Mh(y);for(const p of h)try{if(Rh(p))return}catch(v){}be(y,"unauthorized-domain")})).apply(this,arguments)}function Rh(y){const h=at(),{protocol:p,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===v?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&z.hostname===v}if(!Ba.test(p))return!1;if(Ua.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Hp=new hn(3e4,6e4);function Nh(){const y=zt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Ls=null;function iy(y){return Ls=Ls||function $i(y){return new Promise((h,p)=>{var v,T,x;function z(){Nh(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Nh(),p(_e(y,"network-request-failed"))},timeout:Hp.get()})}if(null===(T=null===(v=zt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(x=zt().gapi)||void 0===x?void 0:x.load)){const fe=Vi("iframefcb");return zt()[fe]=()=>{gapi.load?z():p(_e(y,"network-request-failed"))},Os(`https://apis.google.com/js/api.js?onload=${fe}`).catch(Pe=>p(Pe))}z()}}).catch(h=>{throw Ls=null,h})}(y),Ls}const ed=new hn(5e3,15e3),Gp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ob(y){const h=y.config;j(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?jt(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:ue.SDK_VERSION},T=w0.get(y.config.apiHost);T&&(v.eid=T);const x=y._getFrameworks();return x.length&&(v.fw=x.join(",")),`${p}?${(0,P.xO)(v).slice(1)}`}function td(){return td=(0,f.Z)(function*(y){const h=yield iy(y),p=zt().gapi;return j(p,y,"internal-error"),h.open({where:document.body,url:ob(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gp,dontclear:!0},v=>new Promise(function(){var T=(0,f.Z)(function*(x,z){yield v.restyle({setHideOnLeave:!1});const fe=_e(y,"network-request-failed"),Pe=zt().setTimeout(()=>{z(fe)},ed.get());function ze(){zt().clearTimeout(Pe),x(v)}v.ping(ze).then(ze,()=>{z(fe)})});return function(x,z){return T.apply(this,arguments)}}()))}),td.apply(this,arguments)}const qp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Nu{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Ko(y,h,p,v,T,x){j(y.config.authDomain,y,"auth-domain-config-required"),j(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:v,v:ue.SDK_VERSION,eventId:T};if(h instanceof ar){h.setDefaultLanguage(y.languageCode),z.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Pe,ze]of Object.entries(x||{}))z[Pe]=ze}if(h instanceof Ys){const Pe=h.getScopes().filter(ze=>""!==ze);Pe.length>0&&(z.scopes=Pe.join(","))}y.tenantId&&(z.tid=y.tenantId);const fe=z;for(const Pe of Object.keys(fe))void 0===fe[Pe]&&delete fe[Pe];return`${function ay({config:y}){return y.emulator?jt(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(fe).slice(1)}`}const Fh="webStorageSupport";class Yp extends class Kp{constructor(h){this.factorId=h}_process(h,p,v){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,v);case"signin":return this._finalizeSignIn(h,p.credential);default:return V("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Yp(h)}_finalizeEnroll(h,p,v){return function to(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Gt(y,h))}(h,{idToken:p,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function ro(y,h){return xt(y,"POST","/v2/accounts/mfaSignIn:finalize",Gt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Lh=(()=>{class y{constructor(){}static assertion(p){return Yp._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Qp="@firebase/auth";class uy{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,f.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function as(){return window}function Ha(){return(Ha=(0,f.Z)(function*(y,h,p){var v;const{BuildInfo:T}=as();Z(h.sessionId,"AuthEvent did not contain a session ID");const x=yield Bh(h.sessionId),z={};return Mr()?z.ibi=T.packageName:yr()?z.apn=T.packageName:be(y,"operation-not-supported-in-this-environment"),T.displayName&&(z.appDisplayName=T.displayName),z.sessionId=x,Ko(y,p,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,z)})).apply(this,arguments)}function rd(){return(rd=(0,f.Z)(function*(y){const{BuildInfo:h}=as(),p={};Mr()?p.iosBundleId=h.packageName:yr()?p.androidPackageName=h.packageName:be(y,"operation-not-supported-in-this-environment"),yield Mh(y,p)})).apply(this,arguments)}function eg(){return(eg=(0,f.Z)(function*(y,h,p){const{cordova:v}=as();let T=()=>{};try{yield new Promise((x,z)=>{let fe=null;function Pe(){var rt;x();const An=null===(rt=v.plugins.browsertab)||void 0===rt?void 0:rt.close;"function"==typeof An&&An(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function ze(){fe||(fe=window.setTimeout(()=>{z(_e(y,"redirect-cancelled-by-user"))},2e3))}function ct(){"visible"===(null==document?void 0:document.visibilityState)&&ze()}h.addPassiveListener(Pe),document.addEventListener("resume",ze,!1),yr()&&document.addEventListener("visibilitychange",ct,!1),T=()=>{h.removePassiveListener(Pe),document.removeEventListener("resume",ze,!1),document.removeEventListener("visibilitychange",ct,!1),fe&&window.clearTimeout(fe)}})}finally{T()}})).apply(this,arguments)}function Bh(y){return sd.apply(this,arguments)}function sd(){return(sd=(0,f.Z)(function*(y){const h=Nl(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Nl(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let v=0;v<y.length;v++)p[v]=y.charCodeAt(v);return p}!function b0(y){(0,ue._registerComponent)(new le.wA("auth",(h,{options:p})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:x,authDomain:z}=v.options;return((fe,Pe)=>{j(x&&!x.includes(":"),"invalid-api-key",{appName:fe.name}),j(!(null==z?void 0:z.includes(":")),"argument-error",{appName:fe.name});const ze={apiKey:x,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:To(y)},ct=new Ge(fe,Pe,ze);return function ne(y,h){const p=(null==h?void 0:h.persistence)||[],v=(Array.isArray(p)?p:[p]).map(te);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(ct,p),ct})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,v)=>{h.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new le.wA("auth-internal",h=>{const p=nt(h.getProvider("auth").getImmediate());return new uy(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Qp,"0.20.0",function Vh(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(Qp,"0.20.0","esm2017")}("Browser");class cy extends Sh{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function Qo(y){return jh.apply(this,arguments)}function jh(){return(jh=(0,f.Z)(function*(y){const h=yield Ga()._get($h(y));return h&&(yield Ga()._remove($h(y))),h})).apply(this,arguments)}function ig(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Ga(){return te(Ra)}function $h(y){return xn("authEvent",y.config.apiKey,y.name)}function cn(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...p]=y.split("?");return(0,P.zd)(p.join("?"))}function od(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function zh(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function T0(y=(0,P.z$)()){return!("file:"!==zh()&&"ionic:"!==zh()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function ug(){try{const y=self.localStorage,h=ki();if(y)return y.setItem(h,"1"),y.removeItem(h),!function py(y=(0,P.z$)()){return function Xr(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Wh(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return cr()&&(0,P.hl)()}return!1}function cr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ut(){return(function ab(){return"http:"===zh()||"https:"===zh()}()||(0,P.ru)()||T0())&&!function Ol(){return(0,P.b$)()||(0,P.UG)()}()&&ug()&&!cr()}function us(){return T0()&&"undefined"!=typeof document}function qa(){return(qa=(0,f.Z)(function*(){return!!us()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const gi={LOCAL:"local",NONE:"none",SESSION:"session"},Ou=j,Zh="persistence";function Pu(y){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Pl(),p=xn(Zh,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function Pl(){var y;try{return(null===(y=function lg(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const gy=j;class Hi{constructor(){this.browserResolver=te(class I0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=li,this._completeRedirectFn=pi,this._overrideRedirectResult=D}_openPopup(h,p,v,T){var x=this;return(0,f.Z)(function*(){var z;Z(null===(z=x.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const fe=Ko(h,p,v,at(),T);return function sy(y,h,p,v=500,T=600){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),z=Math.max((window.screen.availWidth-v)/2,0).toString();let fe="";const Pe=Object.assign(Object.assign({},qp),{width:v.toString(),height:T.toString(),top:x,left:z}),ze=(0,P.z$)().toLowerCase();p&&(fe=fa(ze)?"_blank":p),ha(ze)&&(h=h||"http://localhost",Pe.scrollbars="yes");const ct=Object.entries(Pe).reduce((An,[yi,Vu])=>`${An}${yi}=${Vu},`,"");if(function Zs(y=(0,P.z$)()){var h;return Mr(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(ze)&&"_self"!==fe)return function nd(y,h){const p=document.createElement("a");p.href=y,p.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(v)}(h||"",fe),new Nu(null);const rt=window.open(h||"",fe,ct);j(rt,y,"popup-blocked");try{rt.focus()}catch(An){}return new Nu(rt)}(h,fe,ki())})()}_openRedirect(h,p,v,T){var x=this;return(0,f.Z)(function*(){return yield x._originValidation(h),function Pn(y){zt().location.href=y}(Ko(h,p,v,at(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(Z(x,"If manager is not set, promise should be"),x)}const v=this.initAndGetManager(h);return this.eventManagers[p]={promise:v},v.catch(()=>{delete this.eventManagers[p]}),v}initAndGetManager(h){var p=this;return(0,f.Z)(function*(){const v=yield function Oh(y){return td.apply(this,arguments)}(h),T=new Sh(h);return v.register("authEvent",x=>(j(null==x?void 0:x.authEvent,h,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Fh,{type:Fh},T=>{var x;const z=null===(x=null==T?void 0:T[0])||void 0===x?void 0:x[Fh];void 0!==z&&p(!!z),be(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function ry(y){return xh.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return ws()||hu()||Mr()}}),this.cordovaResolver=te(class sg{constructor(){this._redirectPersistence=li,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=pi,this._overrideRedirectResult=D}_initialize(h){var p=this;return(0,f.Z)(function*(){const v=h._key();let T=p.eventManagers.get(v);return T||(T=new cy(h),p.eventManagers.set(v,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){be(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,v,T){var x=this;return(0,f.Z)(function*(){!function ly(y){var h,p,v,T,x,z,fe,Pe,ze,ct;const rt=as();j("function"==typeof(null===(h=null==rt?void 0:rt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(void 0!==(null===(p=null==rt?void 0:rt.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j("function"==typeof(null===(x=null===(T=null===(v=null==rt?void 0:rt.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(Pe=null===(fe=null===(z=null==rt?void 0:rt.cordova)||void 0===z?void 0:z.plugins)||void 0===fe?void 0:fe.browsertab)||void 0===Pe?void 0:Pe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j("function"==typeof(null===(ct=null===(ze=null==rt?void 0:rt.cordova)||void 0===ze?void 0:ze.InAppBrowser)||void 0===ct?void 0:ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield x._initialize(h);yield z.initialized(),z.resetRedirect(),function b(){ji.clear()}(),yield x._originValidation(h);const fe=function tg(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:ig(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(h,v,T);yield function ng(y,h){return Ga()._set($h(y),h)}(h,fe);const Pe=yield function Fr(y,h,p){return Ha.apply(this,arguments)}(h,fe,p),ze=yield function id(y){const{cordova:h}=as();return new Promise(p=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function Dc(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Pe);return function D0(y,h,p){return eg.apply(this,arguments)}(h,z,ze)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Uh(y){return rd.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:v,handleOpenURL:T,BuildInfo:x}=as(),z=setTimeout((0,f.Z)(function*(){yield Qo(h),p.onEvent(od())}),500),fe=function(){var ct=(0,f.Z)(function*(rt){clearTimeout(z);const An=yield Qo(h);let yi=null;An&&(null==rt?void 0:rt.url)&&(yi=function rg(y,h){var p,v;const T=function Gh(y){const h=cn(y),p=h.link?decodeURIComponent(h.link):void 0,v=cn(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return cn(T).link||T||v||p||y}(h);if(T.includes("/__/auth/callback")){const x=cn(T),z=x.firebaseError?function Hh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(x.firebaseError)):null,fe=null===(v=null===(p=null==z?void 0:z.code)||void 0===p?void 0:p.split("auth/"))||void 0===v?void 0:v[1],Pe=fe?_e(fe):null;return Pe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(An,rt.url)),p.onEvent(yi||od())});return function(An){return ct.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,fe);const Pe=T,ze=`${x.packageName.toLowerCase()}://`;as().handleOpenURL=function(){var ct=(0,f.Z)(function*(rt){if(rt.toLowerCase().startsWith(ze)&&fe({url:rt}),"function"==typeof Pe)try{Pe(rt)}catch(An){console.error(An)}});return function(rt){return ct.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=li,this._completeRedirectFn=pi,this._overrideRedirectResult=D}_initialize(h){var p=this;return(0,f.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,v,T){var x=this;return(0,f.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,p,v,T)})()}_openRedirect(h,p,v,T){var x=this;return(0,f.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,p,v,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return us()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return gy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const p=yield function ls(){return qa.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Yh(y){return y.unwrap()}function kl(y){return Qh(y)}function Qh(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Bi.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let v;switch(p){case"google.com":v=Oc;break;case"facebook.com":v=So;break;case"github.com":v=yh;break;case"twitter.com":v=kc;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:z,pendingToken:fe,nonce:Pe}=h;return x||z||T||fe?fe?p.startsWith("saml.")?Qs._create(p,fe):Xi._fromParams({providerId:p,signInMethod:p,pendingToken:fe,idToken:T,accessToken:x}):new Mi(p).credential({idToken:T,accessToken:x,rawNonce:Pe}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function ei(y,h){return h.catch(p=>{throw p instanceof P.ZR&&function mi(y,h){var p;const v=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new Ll(y,function jn(y,h){var p;const v=(0,P.m9)(y),T=h;return j(h.customData.operationType,v,"argument-error"),j(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,v,"argument-error"),Vo._fromError(v,T)}(y,h));else if(v){const T=Qh(h),x=h;T&&(x.credential=T,x.tenantId=v.tenantId||void 0,x.email=v.email||void 0,x.phoneNumber=v.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:kl(p),additionalUserInfo:Pi(p),user:uo.getOrCreate(T)}})}function dr(y,h){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,f.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:v=>ei(y,p.confirm(v))}})).apply(this,arguments)}class Ll{constructor(h,p){this.resolver=p,this.auth=function Fu(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ei(Yh(this.auth),this.resolver.resolveSignIn(h))}}class uo{constructor(h){this._delegate=h,this.multiFactor=function Cu(y){const h=(0,P.m9)(y);return Du.has(h)||Du.set(h,jc._fromUser(h)),Du.get(h)}(h)}static getOrCreate(h){return uo.USER_MAP.has(h)||uo.USER_MAP.set(h,new uo(h)),uo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,f.Z)(function*(){return ei(p.auth,Yn(p._delegate,h))})()}linkWithPhoneNumber(h,p){var v=this;return(0,f.Z)(function*(){return dr(v.auth,function Go(y,h,p){return $n.apply(this,arguments)}(v._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,f.Z)(function*(){return ei(p.auth,function Ah(y,h,p){return ss.apply(this,arguments)}(p._delegate,h,Hi))})()}linkWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield Pu(nt(p.auth)),function Ot(y,h,p){return function gt(y,h,p){return Jn.apply(this,arguments)}(y,h,p)}(p._delegate,h,Hi)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,f.Z)(function*(){return ei(p.auth,es(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return dr(this.auth,function Pr(y,h,p){return di.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ei(this.auth,function xl(y,h,p){return Rl.apply(this,arguments)}(this._delegate,h,Hi))}reauthenticateWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield Pu(nt(p.auth)),function Fe(y,h,p){return function vt(y,h,p){return dt.apply(this,arguments)}(y,h,p)}(p._delegate,h,Hi)})()}sendEmailVerification(h){return function _l(y,h){return wu.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,f.Z)(function*(){return yield function _h(y,h){return Qt.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Vp(y,h){return ko((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function wl(y,h){return ko((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function hi(y,h){return ks.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function El(y,h){return Sa.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function vl(y,h,p){return Iu.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}uo.USER_MAP=new WeakMap;const lo=j;let Vs=(()=>{class y{constructor(p,v){if(this.app=p,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;lo(T,"invalid-api-key",{appName:p.name}),lo(T,"invalid-api-key",{appName:p.name});const x="undefined"!=typeof window?Hi:void 0;this._delegate=v.initialize({options:{persistence:Er(T,p.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?uo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,v){!function Rr(y,h,p){const v=nt(y);j(v._canInitEmulator,v,"emulator-config-failed"),j(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==p?void 0:p.disableWarnings),x=Di(h),{host:z,port:fe}=function bn(y){const h=Di(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const v=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const x=T[1];return{host:x,port:Ci(v.substr(x.length+1))}}{const[x,z]=v.split(":");return{host:x,port:Ci(z)}}}(h);v.config.emulator={url:`${x}//${z}${null===fe?"":`:${fe}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:z,port:fe,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function rn(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,v)}applyActionCode(p){return function De(y,h){return Tt.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ml(this._delegate,p)}confirmPasswordReset(p,v){return function pl(y,h,p){return gl.apply(this,arguments)}(this._delegate,p,v)}createUserWithEmailAndPassword(p,v){var T=this;return(0,f.Z)(function*(){return ei(T._delegate,function Yr(y,h,p){return ba.apply(this,arguments)}(T._delegate,p,v))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Ss(y,h){return ui.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Da(y,h){const p=mu.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,f.Z)(function*(){lo(ut(),p._delegate,"operation-not-supported-in-this-environment");const v=yield function Tn(y,h){return Va.apply(this,arguments)}(p._delegate,Hi);return v?ei(p._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function hy(y,h){nt(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,v,T){const{next:x,error:z,complete:fe}=co(p,v,T);return this._delegate.onAuthStateChanged(x,z,fe)}onIdTokenChanged(p,v,T){const{next:x,error:z,complete:fe}=co(p,v,T);return this._delegate.onIdTokenChanged(x,z,fe)}sendSignInLinkToEmail(p,v){return function Lp(y,h,p){return vu.apply(this,arguments)}(this._delegate,p,v)}sendPasswordResetEmail(p,v){return function fl(y,h,p){return Ia.apply(this,arguments)}(this._delegate,p,v||void 0)}setPersistence(p){var v=this;return(0,f.Z)(function*(){let T;switch(function ad(y,h){Ou(Object.values(gi).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?Ou(h!==gi.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?Ou(h===gi.NONE,y,"unsupported-persistence-type"):cr()?Ou(h===gi.NONE||h===gi.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):Ou(h===gi.NONE||ug(),y,"unsupported-persistence-type")}(v._delegate,p),p){case gi.SESSION:T=li;break;case gi.LOCAL:T=(yield te(Ns)._isAvailable())?Ns:Ra;break;case gi.NONE:T=pt;break;default:return be("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ei(this._delegate,function Fc(y){return cl.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ei(this._delegate,un(this._delegate,p))}signInWithCustomToken(p){return ei(this._delegate,function No(y,h){return st.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,v){return ei(this._delegate,function yl(y,h,p){return un((0,P.m9)(y),Nc.credential(h,p))}(this._delegate,p,v))}signInWithEmailLink(p,v){return ei(this._delegate,function Eu(y,h,p){return _n.apply(this,arguments)}(this._delegate,p,v))}signInWithPhoneNumber(p,v){return dr(this._delegate,function Au(y,h,p){return Ps.apply(this,arguments)}(this._delegate,p,v))}signInWithPopup(p){var v=this;return(0,f.Z)(function*(){return lo(ut(),v._delegate,"operation-not-supported-in-this-environment"),ei(v._delegate,function Th(y,h,p){return Fs.apply(this,arguments)}(v._delegate,p,Hi))})()}signInWithRedirect(p){var v=this;return(0,f.Z)(function*(){return lo(ut(),v._delegate,"operation-not-supported-in-this-environment"),yield Pu(v._delegate),function K(y,h,p){return function ie(y,h,p){return Re.apply(this,arguments)}(y,h,p)}(v._delegate,p,Hi)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Po(y,h){return eo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=gi,y})();function co(y,h,p){let v=y;"function"!=typeof y&&({next:v,error:h,complete:p}=y);const T=v;return{next:z=>T(z&&uo.getOrCreate(z)),error:h,complete:p}}function Er(y,h){const p=function ku(y,h){const p=Pl();if(!p)return[];const v=xn(Zh,y,h);switch(p.getItem(v)){case gi.NONE:return[pt];case gi.LOCAL:return[Ns,li];case gi.SESSION:return[li];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(Ns)&&p.push(Ns),"undefined"!=typeof window)for(const v of[Ra,li])p.includes(v)||p.push(v);return p.includes(pt)||p.push(pt),p}class za{constructor(){this.providerId="phone",this._delegate=new Bi(Yh(J.Z.auth()))}static credential(h,p){return Bi.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}za.PHONE_SIGN_IN_METHOD=Bi.PHONE_SIGN_IN_METHOD,za.PROVIDER_ID=Bi.PROVIDER_ID;const Jh=j;class cg{constructor(h,p,v=J.Z.app()){var T;Jh(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new so(h,p,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function cs(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Vs(p,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Nc,FacebookAuthProvider:So,GithubAuthProvider:yh,GoogleAuthProvider:Oc,OAuthProvider:Mi,SAMLAuthProvider:_r,PhoneAuthProvider:za,PhoneMultiFactorGenerator:Lh,RecaptchaVerifier:cg,TwitterAuthProvider:kc,Auth:Vs,AuthCredential:oi,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.13")}(J.Z)},8306:(Ke,ve,O)=>{O.d(ve,{y:()=>$});var f=O(2961),J=O(727),P=O(8822),ue=O(4671);var le=O(2416),se=O(576),ce=O(2806);let $=(()=>{class Te{constructor(Le){Le&&(this._subscribe=Le)}lift(Le){const he=new Te;return he.source=this,he.operator=Le,he}subscribe(Le,he,Ie){const He=function $e(Te){return Te&&Te instanceof f.Lv||function X(Te){return Te&&(0,se.m)(Te.next)&&(0,se.m)(Te.error)&&(0,se.m)(Te.complete)}(Te)&&(0,J.Nn)(Te)}(Le)?Le:new f.Hp(Le,he,Ie);return(0,ce.x)(()=>{const{operator:We,source:be}=this;He.add(We?We.call(He,be):be?this._subscribe(He):this._trySubscribe(He))}),He}_trySubscribe(Le){try{return this._subscribe(Le)}catch(he){Le.error(he)}}forEach(Le,he){return new(he=B(he))((Ie,He)=>{const We=new f.Hp({next:be=>{try{Le(be)}catch(_e){He(_e),We.unsubscribe()}},error:He,complete:Ie});this.subscribe(We)})}_subscribe(Le){var he;return null===(he=this.source)||void 0===he?void 0:he.subscribe(Le)}[P.L](){return this}pipe(...Le){return function pe(Te){return 0===Te.length?ue.y:1===Te.length?Te[0]:function(Le){return Te.reduce((he,Ie)=>Ie(he),Le)}}(Le)(this)}toPromise(Le){return new(Le=B(Le))((he,Ie)=>{let He;this.subscribe(We=>He=We,We=>Ie(We),()=>he(He))})}}return Te.create=xe=>new Te(xe),Te})();function B(Te){var xe;return null!==(xe=null!=Te?Te:le.v.Promise)&&void 0!==xe?xe:Promise}},7579:(Ke,ve,O)=>{O.d(ve,{x:()=>le});var f=O(8306),J=O(727);const ue=(0,O(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=O(8737),pe=O(2806);let le=(()=>{class ce extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const X=new se(this,this);return X.operator=B,X}_throwIfClosed(){if(this.closed)throw new ue}next(B){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(B)}})}error(B){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:X}=this;for(;X.length;)X.shift().error(B)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:X,isStopped:$e,observers:Te}=this;return X||$e?J.Lc:(this.currentObservers=null,Te.push(B),new J.w0(()=>{this.currentObservers=null,(0,re.P)(Te,B)}))}_checkFinalizedStatuses(B){const{hasError:X,thrownError:$e,isStopped:Te}=this;X?B.error($e):Te&&B.complete()}asObservable(){const B=new f.y;return B.source=this,B}}return ce.create=($,B)=>new se($,B),ce})();class se extends le{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,X;null===(X=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===X||X.call(B,$)}error($){var B,X;null===(X=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===X||X.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,X;return null!==(X=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==X?X:J.Lc}}},2961:(Ke,ve,O)=>{O.d(ve,{Hp:()=>Le,Lv:()=>X});var f=O(576),J=O(727),P=O(2416),ue=O(7849);function re(){}const pe=ce("C",void 0,void 0);function ce(be,_e,Ee){return{kind:be,value:_e,error:Ee}}var $=O(3410),B=O(2806);class X extends J.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,J.Nn)(_e)&&_e.add(this)):this.destination=We}static create(_e,Ee,Ue){return new Le(_e,Ee,Ue)}next(_e){this.isStopped?He(function se(be){return ce("N",be,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?He(function le(be){return ce("E",void 0,be)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?He(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Te(be,_e){return $e.call(be,_e)}class xe{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:Ee}=this;if(Ee.next)try{Ee.next(_e)}catch(Ue){he(Ue)}}error(_e){const{partialObserver:Ee}=this;if(Ee.error)try{Ee.error(_e)}catch(Ue){he(Ue)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(Ee){he(Ee)}}}class Le extends X{constructor(_e,Ee,Ue){let Ve;if(super(),(0,f.m)(_e)||!_e)Ve={next:null!=_e?_e:void 0,error:null!=Ee?Ee:void 0,complete:null!=Ue?Ue:void 0};else{let j;this&&P.v.useDeprecatedNextContext?(j=Object.create(_e),j.unsubscribe=()=>this.unsubscribe(),Ve={next:_e.next&&Te(_e.next,j),error:_e.error&&Te(_e.error,j),complete:_e.complete&&Te(_e.complete,j)}):Ve=_e}this.destination=new xe(Ve)}}function he(be){P.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(be):(0,ue.h)(be)}function He(be,_e){const{onStoppedNotification:Ee}=P.v;Ee&&$.z.setTimeout(()=>Ee(be,_e))}const We={closed:!0,next:re,error:function Ie(be){throw be},complete:re}},727:(Ke,ve,O)=>{O.d(ve,{Lc:()=>pe,w0:()=>re,Nn:()=>le});var f=O(576);const P=(0,O(3888).d)(ce=>function(B){ce(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((X,$e)=>`${$e+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ue=O(8737);class re{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Te of B)Te.remove(this);else B.remove(this);const{initialTeardown:X}=this;if((0,f.m)(X))try{X()}catch(Te){$=Te instanceof P?Te.errors:[Te]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Te of $e)try{se(Te)}catch(xe){$=null!=$?$:[],xe instanceof P?$=[...$,...xe.errors]:$.push(xe)}}if($)throw new P($)}}add($){var B;if($&&$!==this)if(this.closed)se($);else{if($ instanceof re){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ue.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ue.P)(B,$),$ instanceof re&&$._removeParent(this)}}re.EMPTY=(()=>{const ce=new re;return ce.closed=!0,ce})();const pe=re.EMPTY;function le(ce){return ce instanceof re||ce&&"closed"in ce&&(0,f.m)(ce.remove)&&(0,f.m)(ce.add)&&(0,f.m)(ce.unsubscribe)}function se(ce){(0,f.m)(ce)?ce():ce.unsubscribe()}},2416:(Ke,ve,O)=>{O.d(ve,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ke,ve,O)=>{O.d(ve,{E:()=>J});const J=new(O(8306).y)(re=>re.complete())},8996:(Ke,ve,O)=>{O.d(ve,{D:()=>_e});var f=O(8421),J=O(5363),P=O(9468),pe=O(8306),se=O(2202),ce=O(576),$=O(9672);function X(Ee,Ue){if(!Ee)throw new Error("Iterable cannot be null");return new pe.y(Ve=>{(0,$.f)(Ve,Ue,()=>{const j=Ee[Symbol.asyncIterator]();(0,$.f)(Ve,Ue,()=>{j.next().then(V=>{V.done?Ve.complete():Ve.next(V.value)})},0,!0)})})}var $e=O(3670),Te=O(8239),xe=O(1144),Le=O(6495),he=O(2206),Ie=O(4532),He=O(3260);function _e(Ee,Ue){return Ue?function be(Ee,Ue){if(null!=Ee){if((0,$e.c)(Ee))return function ue(Ee,Ue){return(0,f.Xf)(Ee).pipe((0,P.R)(Ue),(0,J.Q)(Ue))}(Ee,Ue);if((0,xe.z)(Ee))return function le(Ee,Ue){return new pe.y(Ve=>{let j=0;return Ue.schedule(function(){j===Ee.length?Ve.complete():(Ve.next(Ee[j++]),Ve.closed||this.schedule())})})}(Ee,Ue);if((0,Te.t)(Ee))return function re(Ee,Ue){return(0,f.Xf)(Ee).pipe((0,P.R)(Ue),(0,J.Q)(Ue))}(Ee,Ue);if((0,he.D)(Ee))return X(Ee,Ue);if((0,Le.T)(Ee))return function B(Ee,Ue){return new pe.y(Ve=>{let j;return(0,$.f)(Ve,Ue,()=>{j=Ee[se.h](),(0,$.f)(Ve,Ue,()=>{let V,Z;try{({value:V,done:Z}=j.next())}catch(oe){return void Ve.error(oe)}Z?Ve.complete():Ve.next(V)},0,!0)}),()=>(0,ce.m)(null==j?void 0:j.return)&&j.return()})}(Ee,Ue);if((0,He.L)(Ee))return function We(Ee,Ue){return X((0,He.Q)(Ee),Ue)}(Ee,Ue)}throw(0,Ie.z)(Ee)}(Ee,Ue):(0,f.Xf)(Ee)}},8421:(Ke,ve,O)=>{O.d(ve,{Xf:()=>$e});var f=O(655),J=O(1144),P=O(8239),ue=O(8306),re=O(3670),pe=O(2206),le=O(4532),se=O(6495),ce=O(3260),$=O(576),B=O(7849),X=O(8822);function $e(be){if(be instanceof ue.y)return be;if(null!=be){if((0,re.c)(be))return function Te(be){return new ue.y(_e=>{const Ee=be[X.L]();if((0,$.m)(Ee.subscribe))return Ee.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(be);if((0,J.z)(be))return function xe(be){return new ue.y(_e=>{for(let Ee=0;Ee<be.length&&!_e.closed;Ee++)_e.next(be[Ee]);_e.complete()})}(be);if((0,P.t)(be))return function Le(be){return new ue.y(_e=>{be.then(Ee=>{_e.closed||(_e.next(Ee),_e.complete())},Ee=>_e.error(Ee)).then(null,B.h)})}(be);if((0,pe.D)(be))return Ie(be);if((0,se.T)(be))return function he(be){return new ue.y(_e=>{for(const Ee of be)if(_e.next(Ee),_e.closed)return;_e.complete()})}(be);if((0,ce.L)(be))return function He(be){return Ie((0,ce.Q)(be))}(be)}throw(0,le.z)(be)}function Ie(be){return new ue.y(_e=>{(function We(be,_e){var Ee,Ue,Ve,j;return(0,f.mG)(this,void 0,void 0,function*(){try{for(Ee=(0,f.KL)(be);!(Ue=yield Ee.next()).done;)if(_e.next(Ue.value),_e.closed)return}catch(V){Ve={error:V}}finally{try{Ue&&!Ue.done&&(j=Ee.return)&&(yield j.call(Ee))}finally{if(Ve)throw Ve.error}}_e.complete()})})(be,_e).catch(Ee=>_e.error(Ee))})}},6451:(Ke,ve,O)=>{O.d(ve,{T:()=>pe});var f=O(8189),J=O(8421),P=O(515),ue=O(7669),re=O(8996);function pe(...le){const se=(0,ue.yG)(le),ce=(0,ue._6)(le,1/0),$=le;return $.length?1===$.length?(0,J.Xf)($[0]):(0,f.J)(ce)((0,re.D)($,se)):P.E}},5403:(Ke,ve,O)=>{O.d(ve,{x:()=>J});var f=O(2961);function J(ue,re,pe,le,se){return new P(ue,re,pe,le,se)}class P extends f.Lv{constructor(re,pe,le,se,ce,$){super(re),this.onFinalize=ce,this.shouldUnsubscribe=$,this._next=pe?function(B){try{pe(B)}catch(X){re.error(X)}}:super._next,this._error=se?function(B){try{se(B)}catch(X){re.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(B){re.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Ke,ve,O)=>{O.d(ve,{U:()=>P});var f=O(4482),J=O(5403);function P(ue,re){return(0,f.e)((pe,le)=>{let se=0;pe.subscribe((0,J.x)(le,ce=>{le.next(ue.call(re,ce,se++))}))})}},8189:(Ke,ve,O)=>{O.d(ve,{J:()=>P});var f=O(5577),J=O(4671);function P(ue=1/0){return(0,f.z)(J.y,ue)}},5577:(Ke,ve,O)=>{O.d(ve,{z:()=>se});var f=O(4004),J=O(8421),P=O(4482),ue=O(9672),re=O(5403),le=O(576);function se(ce,$,B=1/0){return(0,le.m)($)?se((X,$e)=>(0,f.U)((Te,xe)=>$(X,Te,$e,xe))((0,J.Xf)(ce(X,$e))),B):("number"==typeof $&&(B=$),(0,P.e)((X,$e)=>function pe(ce,$,B,X,$e,Te,xe,Le){const he=[];let Ie=0,He=0,We=!1;const be=()=>{We&&!he.length&&!Ie&&$.complete()},_e=Ue=>Ie<X?Ee(Ue):he.push(Ue),Ee=Ue=>{Te&&$.next(Ue),Ie++;let Ve=!1;(0,J.Xf)(B(Ue,He++)).subscribe((0,re.x)($,j=>{null==$e||$e(j),Te?_e(j):$.next(j)},()=>{Ve=!0},void 0,()=>{if(Ve)try{for(Ie--;he.length&&Ie<X;){const j=he.shift();xe?(0,ue.f)($,xe,()=>Ee(j)):Ee(j)}be()}catch(j){$.error(j)}}))};return ce.subscribe((0,re.x)($,_e,()=>{We=!0,be()})),()=>{null==Le||Le()}}(X,$e,ce,B)))}},5363:(Ke,ve,O)=>{O.d(ve,{Q:()=>ue});var f=O(9672),J=O(4482),P=O(5403);function ue(re,pe=0){return(0,J.e)((le,se)=>{le.subscribe((0,P.x)(se,ce=>(0,f.f)(se,re,()=>se.next(ce),pe),()=>(0,f.f)(se,re,()=>se.complete(),pe),ce=>(0,f.f)(se,re,()=>se.error(ce),pe)))})}},3099:(Ke,ve,O)=>{O.d(ve,{B:()=>pe});var f=O(8996),J=O(5698),P=O(7579),ue=O(2961),re=O(4482);function pe(se={}){const{connector:ce=(()=>new P.x),resetOnError:$=!0,resetOnComplete:B=!0,resetOnRefCountZero:X=!0}=se;return $e=>{let Te=null,xe=null,Le=null,he=0,Ie=!1,He=!1;const We=()=>{null==xe||xe.unsubscribe(),xe=null},be=()=>{We(),Te=Le=null,Ie=He=!1},_e=()=>{const Ee=Te;be(),null==Ee||Ee.unsubscribe()};return(0,re.e)((Ee,Ue)=>{he++,!He&&!Ie&&We();const Ve=Le=null!=Le?Le:ce();Ue.add(()=>{he--,0===he&&!He&&!Ie&&(xe=le(_e,X))}),Ve.subscribe(Ue),Te||(Te=new ue.Hp({next:j=>Ve.next(j),error:j=>{He=!0,We(),xe=le(be,$,j),Ve.error(j)},complete:()=>{Ie=!0,We(),xe=le(be,B),Ve.complete()}}),(0,f.D)(Ee).subscribe(Te))})($e)}}function le(se,ce,...$){return!0===ce?(se(),null):!1===ce?null:ce(...$).pipe((0,J.q)(1)).subscribe(()=>se())}},9468:(Ke,ve,O)=>{O.d(ve,{R:()=>J});var f=O(4482);function J(P,ue=0){return(0,f.e)((re,pe)=>{pe.add(P.schedule(()=>re.subscribe(pe),ue))})}},5698:(Ke,ve,O)=>{O.d(ve,{q:()=>ue});var f=O(515),J=O(4482),P=O(5403);function ue(re){return re<=0?()=>f.E:(0,J.e)((pe,le)=>{let se=0;pe.subscribe((0,P.x)(le,ce=>{++se<=re&&(le.next(ce),re<=se&&le.complete())}))})}},8505:(Ke,ve,O)=>{O.d(ve,{b:()=>re});var f=O(576),J=O(4482),P=O(5403),ue=O(4671);function re(pe,le,se){const ce=(0,f.m)(pe)||le||se?{next:pe,error:le,complete:se}:pe;return ce?(0,J.e)(($,B)=>{var X;null===(X=ce.subscribe)||void 0===X||X.call(ce);let $e=!0;$.subscribe((0,P.x)(B,Te=>{var xe;null===(xe=ce.next)||void 0===xe||xe.call(ce,Te),B.next(Te)},()=>{var Te;$e=!1,null===(Te=ce.complete)||void 0===Te||Te.call(ce),B.complete()},Te=>{var xe;$e=!1,null===(xe=ce.error)||void 0===xe||xe.call(ce,Te),B.error(Te)},()=>{var Te,xe;$e&&(null===(Te=ce.unsubscribe)||void 0===Te||Te.call(ce)),null===(xe=ce.finalize)||void 0===xe||xe.call(ce)}))}):ue.y}},4408:(Ke,ve,O)=>{O.d(ve,{o:()=>re});var f=O(727);class J extends f.w0{constructor(le,se){super()}schedule(le,se=0){return this}}const P={setInterval(pe,le,...se){const{delegate:ce}=P;return(null==ce?void 0:ce.setInterval)?ce.setInterval(pe,le,...se):setInterval(pe,le,...se)},clearInterval(pe){const{delegate:le}=P;return((null==le?void 0:le.clearInterval)||clearInterval)(pe)},delegate:void 0};var ue=O(8737);class re extends J{constructor(le,se){super(le,se),this.scheduler=le,this.work=se,this.pending=!1}schedule(le,se=0){if(this.closed)return this;this.state=le;const ce=this.id,$=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId($,ce,se)),this.pending=!0,this.delay=se,this.id=this.id||this.requestAsyncId($,this.id,se),this}requestAsyncId(le,se,ce=0){return P.setInterval(le.flush.bind(le,this),ce)}recycleAsyncId(le,se,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return se;P.clearInterval(se)}execute(le,se){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(le,se);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,se){let $,ce=!1;try{this.work(le)}catch(B){ce=!0,$=B||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:le,scheduler:se}=this,{actions:ce}=se;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(ce,this),null!=le&&(this.id=this.recycleAsyncId(se,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ke,ve,O)=>{O.d(ve,{v:()=>P});var f=O(6063);class J{constructor(re,pe=J.now){this.schedulerActionCtor=re,this.now=pe}schedule(re,pe=0,le){return new this.schedulerActionCtor(this,re).schedule(le,pe)}}J.now=f.l.now;class P extends J{constructor(re,pe=J.now){super(re,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:pe}=this;if(this._active)return void pe.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=pe.shift());if(this._active=!1,le){for(;re=pe.shift();)re.unsubscribe();throw le}}}},4986:(Ke,ve,O)=>{O.d(ve,{z:()=>P});var f=O(4408);const P=new(O(7565).v)(f.o)},6063:(Ke,ve,O)=>{O.d(ve,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Ke,ve,O)=>{O.d(ve,{z:()=>f});const f={setTimeout(J,P,...ue){const{delegate:re}=f;return(null==re?void 0:re.setTimeout)?re.setTimeout(J,P,...ue):setTimeout(J,P,...ue)},clearTimeout(J){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(Ke,ve,O)=>{O.d(ve,{h:()=>J});const J=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ke,ve,O)=>{O.d(ve,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Ke,ve,O)=>{O.d(ve,{_6:()=>pe,jO:()=>ue,yG:()=>re});var f=O(576);function P(le){return le[le.length-1]}function ue(le){return(0,f.m)(P(le))?le.pop():void 0}function re(le){return function J(le){return le&&(0,f.m)(le.schedule)}(P(le))?le.pop():void 0}function pe(le,se){return"number"==typeof P(le)?le.pop():se}},8737:(Ke,ve,O)=>{function f(J,P){if(J){const ue=J.indexOf(P);0<=ue&&J.splice(ue,1)}}O.d(ve,{P:()=>f})},3888:(Ke,ve,O)=>{function f(J){const ue=J(re=>{Error.call(re),re.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}O.d(ve,{d:()=>f})},2806:(Ke,ve,O)=>{O.d(ve,{O:()=>ue,x:()=>P});var f=O(2416);let J=null;function P(re){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!J;if(pe&&(J={errorThrown:!1,error:null}),re(),pe){const{errorThrown:le,error:se}=J;if(J=null,le)throw se}}else re()}function ue(re){f.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=re)}},9672:(Ke,ve,O)=>{function f(J,P,ue,re=0,pe=!1){const le=P.schedule(function(){ue(),pe?J.add(this.schedule(null,re)):this.unsubscribe()},re);if(J.add(le),!pe)return le}O.d(ve,{f:()=>f})},4671:(Ke,ve,O)=>{function f(J){return J}O.d(ve,{y:()=>f})},1144:(Ke,ve,O)=>{O.d(ve,{z:()=>f});const f=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Ke,ve,O)=>{O.d(ve,{D:()=>J});var f=O(576);function J(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Ke,ve,O)=>{function f(J){return"function"==typeof J}O.d(ve,{m:()=>f})},3670:(Ke,ve,O)=>{O.d(ve,{c:()=>P});var f=O(8822),J=O(576);function P(ue){return(0,J.m)(ue[f.L])}},6495:(Ke,ve,O)=>{O.d(ve,{T:()=>P});var f=O(2202),J=O(576);function P(ue){return(0,J.m)(null==ue?void 0:ue[f.h])}},8239:(Ke,ve,O)=>{O.d(ve,{t:()=>J});var f=O(576);function J(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(Ke,ve,O)=>{O.d(ve,{L:()=>ue,Q:()=>P});var f=O(655),J=O(576);function P(re){return(0,f.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:se,done:ce}=yield(0,f.qq)(le.read());if(ce)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(se)}}finally{le.releaseLock()}})}function ue(re){return(0,J.m)(null==re?void 0:re.getReader)}},4482:(Ke,ve,O)=>{O.d(ve,{A:()=>J,e:()=>P});var f=O(576);function J(ue){return(0,f.m)(null==ue?void 0:ue.lift)}function P(ue){return re=>{if(J(re))return re.lift(function(pe){try{return ue(pe,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Ke,ve,O)=>{O.d(ve,{h:()=>P});var f=O(2416),J=O(3410);function P(ue){J.z.setTimeout(()=>{const{onUnhandledError:re}=f.v;if(!re)throw ue;re(ue)})}},4532:(Ke,ve,O)=>{function f(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(ve,{z:()=>f})},655:(Ke,ve,O)=>{function ue(V,Z){var oe={};for(var te in V)Object.prototype.hasOwnProperty.call(V,te)&&Z.indexOf(te)<0&&(oe[te]=V[te]);if(null!=V&&"function"==typeof Object.getOwnPropertySymbols){var Ae=0;for(te=Object.getOwnPropertySymbols(V);Ae<te.length;Ae++)Z.indexOf(te[Ae])<0&&Object.prototype.propertyIsEnumerable.call(V,te[Ae])&&(oe[te[Ae]]=V[te[Ae]])}return oe}function se(V,Z,oe,te){return new(oe||(oe=Promise))(function(ne,at){function Dt(mt){try{Je(te.next(mt))}catch(hn){at(hn)}}function wn(mt){try{Je(te.throw(mt))}catch(hn){at(hn)}}function Je(mt){mt.done?ne(mt.value):function Ae(ne){return ne instanceof oe?ne:new oe(function(at){at(ne)})}(mt.value).then(Dt,wn)}Je((te=te.apply(V,Z||[])).next())})}function he(V){return this instanceof he?(this.v=V,this):new he(V)}function Ie(V,Z,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,te=oe.apply(V,Z||[]),ne=[];return Ae={},at("next"),at("throw"),at("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae;function at(jt){te[jt]&&(Ae[jt]=function(Wn){return new Promise(function(Kt,Hr){ne.push([jt,Wn,Kt,Hr])>1||Dt(jt,Wn)})})}function Dt(jt,Wn){try{!function wn(jt){jt.value instanceof he?Promise.resolve(jt.value.v).then(Je,mt):hn(ne[0][2],jt)}(te[jt](Wn))}catch(Kt){hn(ne[0][3],Kt)}}function Je(jt){Dt("next",jt)}function mt(jt){Dt("throw",jt)}function hn(jt,Wn){jt(Wn),ne.shift(),ne.length&&Dt(ne[0][0],ne[0][1])}}function We(V){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,Z=V[Symbol.asyncIterator];return Z?Z.call(V):(V=function X(V){var Z="function"==typeof Symbol&&Symbol.iterator,oe=Z&&V[Z],te=0;if(oe)return oe.call(V);if(V&&"number"==typeof V.length)return{next:function(){return V&&te>=V.length&&(V=void 0),{value:V&&V[te++],done:!V}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(V),oe={},te("next"),te("throw"),te("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function te(ne){oe[ne]=V[ne]&&function(at){return new Promise(function(Dt,wn){!function Ae(ne,at,Dt,wn){Promise.resolve(wn).then(function(Je){ne({value:Je,done:Dt})},at)}(Dt,wn,(at=V[ne](at)).done,at.value)})}}}O.d(ve,{FC:()=>Ie,KL:()=>We,_T:()=>ue,mG:()=>se,qq:()=>he})},5e3:(Ke,ve,O)=>{O.d(ve,{$8M:()=>$o,$Z:()=>$E,AFp:()=>kv,AaK:()=>se,CRH:()=>_v,CZH:()=>Pv,CqO:()=>w_,EJc:()=>hc,F4k:()=>If,FYo:()=>xw,FiY:()=>lr,G48:()=>EI,GfV:()=>ov,Gpc:()=>B,JOm:()=>T,LFG:()=>Fe,LSH:()=>qh,Lbi:()=>pp,NdJ:()=>bf,OlP:()=>an,Oqu:()=>Rf,PXZ:()=>zD,Q6J:()=>v_,QGY:()=>Kl,Qsj:()=>Yf,R0b:()=>qs,RDi:()=>dl,Rgc:()=>np,SBq:()=>Kf,Sil:()=>Lv,Suo:()=>up,TTD:()=>Mi,TgZ:()=>Xg,VLi:()=>mI,X6Q:()=>Zi,XFs:()=>lt,Xpm:()=>it,Y36:()=>zu,YKP:()=>uv,YNc:()=>kE,Yjl:()=>fa,Yz7:()=>Kt,ZZ4:()=>jm,_Bn:()=>iv,_UZ:()=>em,_Vd:()=>en,_c5:()=>Xv,_uU:()=>V_,aQg:()=>$m,c2e:()=>th,cJS:()=>Gt,cg1:()=>fm,dDg:()=>jv,deG:()=>bh,dqk:()=>Rt,eFA:()=>rh,ekj:()=>Xl,g9A:()=>de,h0i:()=>Wi,hGG:()=>Hm,hij:()=>um,iGM:()=>Qd,ifc:()=>Ft,ip1:()=>Ov,kL8:()=>W_,lG2:()=>hu,n5z:()=>ka,oAB:()=>mr,q4F:()=>Tr,qLn:()=>kl,qOj:()=>bd,qZA:()=>na,s9C:()=>D_,sBO:()=>rl,sIi:()=>hr,s_b:()=>ip,soG:()=>Fv,tBr:()=>pi,tb:()=>Gs,tp0:()=>Hn,uIk:()=>o_,vHH:()=>xe,vpe:()=>ps,wAp:()=>ht,xp6:()=>Ay,z2F:()=>Gv,zSh:()=>xg,zs3:()=>Bs});var f=O(7579),J=O(727),P=O(8306),ue=O(6451),re=O(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function se(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(se).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=pe({__forward_ref__:pe});function B(i){return i.__forward_ref__=B,i.toString=function(){return se(this())},i}function X(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===B}class xe extends Error{constructor(s,a){super(function Le(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function he(i){return"string"==typeof i?i:null==i?"":String(i)}function Ie(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():he(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new xe(-201,`No provider for ${Ie(i)} found${a}`)}function Je(i,s){null==i&&function mt(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Gt(i){return{providers:i.providers||[],imports:i.imports||[]}}function xt(i){return Qi(i,Ii)||Qi(i,qr)}function Qi(i,s){return i.hasOwnProperty(s)?i[s]:null}function gr(i){return i&&(i.hasOwnProperty(Es)||i.hasOwnProperty(bi))?i[Es]:null}const Ii=pe({\u0275prov:pe}),Es=pe({\u0275inj:pe}),qr=pe({ngInjectableDef:pe}),bi=pe({ngInjectorDef:pe});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let zr;function mn(i){const s=zr;return zr=i,s}function zs(i,s,a){const l=xt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&lt.Optional?null:void 0!==s?s:void _e(se(i),"Injector")}function Un(i){return{toString:i}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),Ft=(()=>{return(i=Ft||(Ft={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ft;var i})();const tt="undefined"!=typeof globalThis&&globalThis,ft="undefined"!=typeof window&&window,rr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Rt=tt||"undefined"!=typeof global&&global||ft||rr,sr={},L=[],G=pe({\u0275cmp:pe}),q=pe({\u0275dir:pe}),we=pe({\u0275pipe:pe}),H=pe({\u0275mod:pe}),Q=pe({\u0275fac:pe}),Me=pe({__NG_ELEMENT_ID__:pe});let Ze=0;function it(i){return Un(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||L,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ft.Emulated,id:"c",styles:i.styles||L,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,g=i.features,_=i.pipes;return l.id+=Ze++,l.inputs=ha(i.inputs,a),l.outputs=ha(i.outputs),g&&g.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(nn):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(pt):null,l})}function nn(i){return Rn(i)||function yr(i){return i[q]||null}(i)}function pt(i){return function Ji(i){return i[we]||null}(i)}const xn={};function mr(i){return Un(()=>{const s={type:i.type,bootstrap:i.bootstrap||L,declarations:i.declarations||L,imports:i.imports||L,exports:i.exports||L,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(xn[i.id]=i.type),s})}function ha(i,s){if(null==i)return sr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],g=c;Array.isArray(c)&&(g=c[1],c=c[0]),a[c]=l,s&&(s[c]=g)}return a}const hu=it;function fa(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Rn(i){return i[G]||null}function Nn(i,s){const a=i[H]||null;if(!a&&!0===s)throw new Error(`Type ${se(i)} does not have '\u0275mod' property.`);return a}function Nr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Ti(i){return Array.isArray(i)&&!0===i[1]}function gu(i){return 0!=(8&i.flags)}function Cc(i){return 2==(2&i.flags)}function Ai(i){return 1==(1&i.flags)}function Si(i){return null!==i.template}function al(i){return 0!=(512&i[2])}function ar(i,s){return i.hasOwnProperty(Q)?i[Q]:null}class Ys{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Mi(){return So}function So(i){return i.type.prototype.ngOnChanges&&(i.setInput=yh),Oc}function Oc(){const i=Qs(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===sr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function yh(i,s,a,l){const c=Qs(i)||function Mo(i,s){return i[Pc]=s}(i,{previous:sr,current:null}),g=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];g[E]=new Ys(I&&I.currentValue,s,_===sr),i[l]=s}Mi.ngInherit=!0;const Pc="__ngSimpleChanges__";function Qs(i){return i[Pc]||null}let Ro;function dl(i){Ro=i}function Qt(i){return!!i.listen}const _a={createRenderer:(i,s)=>function xi(){return void 0!==Ro?Ro:"undefined"!=typeof document?document:void 0}()};function qt(i){for(;Array.isArray(i);)i=i[0];return i}function As(i,s){return qt(s[i])}function Kn(i,s){return qt(s[i.index])}function un(i,s){return i.data[s]}function Yn(i,s){const a=s[i];return Nr(a)?a:a[0]}function Xs(i){return 4==(4&i[2])}function es(i){return 128==(128&i[2])}function ai(i,s){return null==s?null:i[s]}function Ni(i){i[18]=0}function No(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const st={lFrame:Lc(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ia(){return st.bindingsEnabled}function De(){return st.lFrame.lView}function Tt(){return st.lFrame.tView}function sn(){let i=Po();for(;null!==i&&64===i.type;)i=i.parent;return i}function Po(){return st.lFrame.currentTNode}function Yr(i,s){const a=st.lFrame;a.currentTNode=i,a.isParent=s}function ba(){return st.lFrame.isParent}function Da(){return st.isInCheckNoChangesMode}function Eu(i){st.isInCheckNoChangesMode=i}function Ss(){return st.lFrame.bindingIndex++}function vl(i,s){const a=st.lFrame;a.bindingIndex=a.bindingRootIndex=i,Ta(s)}function Ta(i){st.lFrame.currentDirectiveIndex=i}function El(){return st.lFrame.currentQueryIndex}function Sa(i){st.lFrame.currentQueryIndex=i}function Vp(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function wl(i,s,a){if(a&lt.SkipSelf){let c=s,g=i;for(;!(c=c.parent,null!==c||a&lt.Host||(c=Vp(g),null===c||(g=g[15],10&c.type))););if(null===c)return!1;s=c,i=g}const l=st.lFrame=Ma();return l.currentTNode=s,l.lView=i,!0}function ko(i){const s=Ma(),a=i[1];st.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ma(){const i=st.lFrame,s=null===i?null:i.child;return null===s?Lc(i):s}function Lc(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Fo(){const i=st.lFrame;return st.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Vc=Fo;function Lo(){const i=Fo();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Bn(){return st.lFrame.selectedIndex}function Pi(i){st.lFrame.selectedIndex=i}function pn(){const i=st.lFrame;return un(i.tView,i.selectedIndex)}function Bc(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=g;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function xa(i,s,a){jn(i,s,3,a)}function ns(i,s,a,l){(3&i[2])===a&&jn(i,s,a,l)}function Vo(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function jn(i,s,a,l){const g=null!=l?l:-1,_=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<g||-1==g)&&(wh(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function wh(i,s,a,l){const c=a[l]<0,g=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class bu{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function on(i,s,a){const l=Qt(i);let c=0;for(;c<a.length;){const g=a[c];if("number"==typeof g){if(0!==g)break;c++;const _=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=g,E=a[++c];Hc(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Ra(i){return 3===i||4===i||6===i}function Hc(i){return 64===i.charCodeAt(0)}function li(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||Il(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function Il(i,s,a,l,c){let g=0,_=i.length;if(-1===s)_=-1;else for(;g<i.length;){const E=i[g++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=g-1;break}}}for(;g<i.length;){const E=i[g];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[g+1]=c));if(l===i[g+1])return void(i[g+2]=c)}g++,null!==l&&g++,null!==c&&g++}-1!==_&&(i.splice(_,0,s),g=_+1),i.splice(g++,0,a),null!==l&&i.splice(g++,0,l),null!==c&&i.splice(g++,0,c)}function bl(i){return-1!==i}function ki(i){return 32767&i}function zt(i,s){let a=function Uo(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let Pn=!0;function wt(i){const s=Pn;return Pn=i,s}let qc=0;function Ms(i,s){const a=ur(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Qr(l.data,i),Qr(s,null),Qr(l.blueprint,null));const c=xs(i,s),g=i.injectorIndex;if(bl(c)){const _=ki(c),E=zt(c,s),I=E[1].data;for(let A=0;A<8;A++)s[g+A]=E[_+A]|I[_+A]}return s[g+8]=c,g}function Qr(i,s){i.push(0,0,0,0,0,0,0,0,s)}function ur(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function xs(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const g=c[1],_=g.type;if(l=2===_?g.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Qn(i,s,a){!function zc(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Me)&&(l=a[Me]),null==l&&(l=a[Me]=qc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Na(i,s,a){if(a&lt.Optional)return i;_e(s,"NodeInjector")}function Bo(i,s,a,l){if(a&lt.Optional&&void 0===l&&(l=null),0==(a&(lt.Self|lt.Host))){const c=i[9],g=mn(void 0);try{return c?c.get(s,l,a&lt.Optional):zs(s,l,a&lt.Optional)}finally{mn(g)}}return Na(l,s,a)}function ci(i,s,a,l=lt.Default,c){if(null!==i){const g=function Or(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Me)?i[Me]:void 0;return"number"==typeof s?s>=0?255&s:Rs:s}(a);if("function"==typeof g){if(!wl(s,i,l))return l&lt.Host?Na(c,a,l):Bo(s,a,l,c);try{const _=g(l);if(null!=_||l&lt.Optional)return _;_e(a)}finally{Vc()}}else if("number"==typeof g){let _=null,E=ur(i,s),I=-1,A=l&lt.Host?s[16][6]:null;for((-1===E||l&lt.SkipSelf)&&(I=-1===E?xs(i,s):s[E+8],-1!==I&&Pa(l,!1)?(_=s[1],E=ki(I),s=zt(I,s)):E=-1);-1!==E;){const S=s[1];if(Ns(g,E,S.data)){const k=Cn(E,s,a,_,l,A);if(k!==Fi)return k}I=s[E+8],-1!==I&&Pa(l,s[1].data[E+8]===A)&&Ns(g,E,s)?(_=S,E=ki(I),s=zt(I,s)):E=-1}}}return Bo(s,a,l,c)}const Fi={};function Rs(){return new ro(sn(),De())}function Cn(i,s,a,l,c,g){const _=s[1],E=_.data[i+8],S=Li(E,_,a,null==l?Cc(E)&&Pn:l!=_&&0!=(3&E.type),c&lt.Host&&g===E);return null!==S?Oa(s,_,S,E):Fi}function Li(i,s,a,l,c){const g=i.providerIndexes,_=s.data,E=1048575&g,I=i.directiveStart,S=g>>20,U=c?E+S:i.directiveEnd;for(let Y=l?E:E+S;Y<U;Y++){const ye=_[Y];if(Y<I&&a===ye||Y>=I&&ye.type===a)return Y}if(c){const Y=_[I];if(Y&&Si(Y)&&Y.type===a)return I}return null}function Oa(i,s,a,l){let c=i[a];const g=s.data;if(function jc(i){return i instanceof bu}(c)){const _=c;_.resolving&&function He(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(Ie(g[a]));const E=wt(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?mn(_.injectImpl):null;wl(i,l,lt.Default);try{c=i[a]=_.factory(void 0,g,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Up(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:g}=s.type.prototype;if(l){const _=So(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],s)}finally{null!==I&&mn(I),wt(E),_.resolving=!1,Vc()}}return c}function Ns(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Pa(i,s){return!(i&lt.Self||i&lt.Host&&s)}class ro{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return ci(this._tNode,this._lView,s,l,a)}}function ka(i){return Un(()=>{const s=i.prototype.constructor,a=s[Q]||jo(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const g=c[Q]||jo(c);if(g&&g!==a)return g;c=Object.getPrototypeOf(c)}return g=>new g})}function jo(i){return $e(i)?()=>{const s=jo(X(i));return s&&s()}:ar(i)}function $o(i){return function Wc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const g=a[c];if(Ra(g))break;if(0===g)c+=2;else if("number"==typeof g)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(g===s)return a[c+1];c+=2}}}return null}(sn(),i)}const Vi="__parameters__";function io(i,s,a){return Un(()=>{const l=function Ho(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...g){if(this instanceof c)return l.apply(this,g),this;const _=new c(...g);return E.annotation=_,E;function E(I,A,S){const k=I.hasOwnProperty(Vi)?I[Vi]:Object.defineProperty(I,Vi,{value:[]})[Vi];for(;k.length<=S;)k.push(null);return(k[S]=k[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class an{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const bh=new an("AnalyzeForEntryComponents");function Pr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Pr(l,s)):s!==i&&s.push(l)}return s}function di(i,s){i.forEach(a=>Array.isArray(a)?di(a,s):s(a))}function Su(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ui(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function fi(i,s,a){let l=La(i,s);return l>=0?i[1|l]=a:(l=~l,function is(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Ml(i,s){const a=La(i,s);if(a>=0)return i[1|a]}function La(i,s){return function Th(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const g=l+(c-l>>1),_=i[g<<a];if(s===_)return g<<a;_>s?c=g:l=g+1}return~(c<<a)}(i,s,1)}const zo={},ao="__NG_DI_FLAG__",os="ngTempTokenPath",b=/\n/gm,M="__source",F=pe({provide:String,useValue:pe});let K;function ie(i){const s=K;return K=i,s}function Re(i,s=lt.Default){if(void 0===K)throw new xe(203,"");return null===K?zs(i,void 0,s):K.get(i,s&lt.Optional?null:void 0,s)}function Fe(i,s=lt.Default){return(function fn(){return zr}()||Re)(X(i),s)}const dt=Fe;function Ot(i){const s=[];for(let a=0;a<i.length;a++){const l=X(i[a]);if(Array.isArray(l)){if(0===l.length)throw new xe(900,"");let c,g=lt.Default;for(let _=0;_<l.length;_++){const E=l[_],I=Jn(E);"number"==typeof I?-1===I?c=E.token:g|=I:c=E}s.push(Fe(c,g))}else s.push(Fe(l))}return s}function gt(i,s){return i[ao]=s,i.prototype[ao]=s,i}function Jn(i){return i[ao]}const pi=gt(io("Inject",i=>({token:i})),-1),lr=gt(io("Optional"),8),Hn=gt(io("SkipSelf"),4);class kh{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function $a(i){return i instanceof kh?i.changingThisBreaksApplicationSecurity:i}const Vh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Jp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var cn=(()=>((cn=cn||{})[cn.NONE=0]="NONE",cn[cn.HTML=1]="HTML",cn[cn.STYLE=2]="STYLE",cn[cn.SCRIPT=3]="SCRIPT",cn[cn.URL=4]="URL",cn[cn.RESOURCE_URL=5]="RESOURCE_URL",cn))();function qh(i){const s=function Ol(){const i=De();return i&&i[12]}();return s?s.sanitize(cn.URL,i)||"":function Ko(i,s){const a=function ay(i){return i instanceof kh&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?$a(i):function as(i){return(i=String(i)).match(Vh)||i.match(Jp)?i:"unsafe:"+i}(he(i))}const ug="__ngContext__";function cr(i,s){i[ug]=s}function us(i){const s=function ut(i){return i[ug]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Hi(i){return i.ngOriginalError}function Fu(i,...s){i.error(...s)}class kl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Yh(i){return i&&i.ngErrorLogger||Fu}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Hi(s);for(;a&&Hi(a);)a=Hi(a);return a||null}}const Er=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function cs(i){return i instanceof Function?i():i}var T=(()=>((T=T||{})[T.Important=1]="Important",T[T.DashCase=2]="DashCase",T))();function z(i,s){return undefined(i,s)}function ze(i){const s=i[3];return Ti(s)?s[3]:s}function An(i){return Vu(i[13])}function yi(i){return Vu(i[4])}function Vu(i){for(;null!==i&&!Ti(i);)i=i[4];return i}function Jo(i,s,a,l,c){if(null!=l){let g,_=!1;Ti(l)?g=l:Nr(l)&&(_=!0,l=l[0]);const E=qt(l);0===i&&null!==a?null==c?x0(s,a,E):ti(s,a,E,c||null,!0):1===i&&null!==a?ti(s,a,E,c||null,!0):2===i?function Uu(i,s,a){const l=nf(i,s);l&&function N0(i,s,a,l){Qt(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=g&&function gg(i,s,a,l,c){const g=a[7];g!==qt(a)&&Jo(s,i,l,g,c);for(let E=10;E<a.length;E++){const I=a[E];cd(I[1],I,i,s,l,g)}}(s,i,g,a,c)}}function Vl(i,s,a){if(Qt(i))return i.createElement(s,a);{const l=null!==a?function cl(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function A0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,No(c,-1)),a.splice(l,1)}function yy(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&A0(c,l),s>0&&(i[a-1][4]=l[4]);const g=Ui(i,10+s);!function At(i,s){cd(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=g[19];null!==_&&_.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function ho(i,s){if(!(256&s[2])){const a=s[11];Qt(a)&&a.destroyNode&&cd(i,s,a,3,null,null),function hg(i){let s=i[13];if(!s)return fg(i[1],i);for(;s;){let a=null;if(Nr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Nr(s)&&fg(s[1],s),s=s[3];null===s&&(s=i),Nr(s)&&fg(s[1],s),a=s&&s[4]}s=a}}(s)}}function fg(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function M0(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof bu)){const g=a[l+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const E=c[g[_]],I=g[_+1];try{I.call(E)}finally{}}else try{g.call(c)}finally{}}}}(i,s),function S0(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const _=a[g+1],E="function"==typeof _?_(s):qt(s[_]),I=l[c=a[g+2]],A=a[g+3];"boolean"==typeof A?E.removeEventListener(a[g],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),g+=2}else{const _=l[c=a[g+1]];a[g].call(_)}if(null!==l){for(let g=c+1;g<l.length;g++)l[g]();s[7]=null}}(i,s),1===s[1].type&&Qt(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Ti(s[3])){a!==s[3]&&A0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function ub(i,s,a){return function wr(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Ft.None||c===Ft.Emulated)return null}return Kn(l,a)}(i,s.parent,a)}function ti(i,s,a,l,c){Qt(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function x0(i,s,a){Qt(i)?i.appendChild(s,a):s.appendChild(a)}function R0(i,s,a,l,c){null!==l?ti(i,s,a,l,c):x0(i,s,a)}function nf(i,s){return Qt(i)?i.parentNode(s):s.parentNode}let vy=function O0(i,s,a){return 40&i.type?Kn(i,a):null};function Xo(i,s,a,l){const c=ub(i,l,s),g=s[11],E=function _y(i,s,a){return vy(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)R0(g,c,a[I],E,!1);else R0(g,c,a,E,!1)}function Nt(i,s){if(null!==s){const a=s.type;if(3&a)return Kn(s,i);if(4&a)return Ey(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Nt(i,l);{const c=i[s.index];return Ti(c)?Ey(-1,c):qt(c)}}if(32&a)return z(s,i)()||qt(i[s.index]);{const l=ld(i,s);return null!==l?Array.isArray(l)?l[0]:Nt(ze(i[16]),l):Nt(i,s.next)}}return null}function ld(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Ey(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Nt(l,c)}return s[7]}function wy(i,s,a,l,c,g,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===s&&(E&&cr(qt(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)wy(i,s,a.child,l,c,g,!1),Jo(s,i,c,E,g);else if(32&I){const A=z(a,l);let S;for(;S=A();)Jo(s,i,c,S,g);Jo(s,i,c,E,g)}else 16&I?k0(i,s,l,a,c,g):Jo(s,i,c,E,g);a=_?a.projectionNext:a.next}}function cd(i,s,a,l,c,g){wy(a,l,i.firstChild,s,c,g,!1)}function k0(i,s,a,l,c,g){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)Jo(s,i,c,I[A],g);else wy(i,s,I,_[3],c,g,!0)}function Iy(i,s,a){Qt(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function dd(i,s,a){Qt(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function F0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const g=s.length;if(c+g===l||i.charCodeAt(c+g)<=32)return c}a=c+1}}const of="ng-template";function V0(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==F0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function by(i){return 4===i.type&&i.value!==of}function cb(i,s,a){return s===(4!==i.type||a?i.value:of)}function db(i,s,a){let l=4;const c=i.attrs||[],g=function fb(i){for(let s=0;s<i.length;s++)if(Ra(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!cb(i,I,a)||""===I&&1===s.length){if(fo(l))return!1;_=!0}}else{const A=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!V0(i.attrs,A,a)){if(fo(l))return!1;_=!0}continue}const k=mg(8&l?"class":I,c,by(i),a);if(-1===k){if(fo(l))return!1;_=!0;continue}if(""!==A){let U;U=k>g?"":c[k+1].toLowerCase();const Y=8&l?U:null;if(Y&&-1!==F0(Y,A,0)||2&l&&A!==U){if(fo(l))return!1;_=!0}}}}else{if(!_&&!fo(l)&&!fo(I))return!1;if(_&&fo(I))continue;_=!1,l=I|1&l}}return fo(l)||_}function fo(i){return 0==(1&i)}function mg(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let g=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)g=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=g?1:2}return-1}return function pb(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function U0(i,s,a=!1){for(let l=0;l<s.length;l++)if(db(i,s[l],a))return!0;return!1}function Dy(i,s){return i?":not("+s.trim()+")":s}function Cy(i){let s=i[0],a=1,l=2,c="",g=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!fo(_)&&(s+=Dy(g,c),c=""),l=_,g=g||!fo(l);a++}return""!==c&&(s+=Dy(g,c)),s}const Et={};function Ay(i){Sy(Tt(),De(),Bn()+i,Da())}function Sy(i,s,a,l){if(!l)if(3==(3&s[2])){const g=i.preOrderCheckHooks;null!==g&&xa(s,g,a)}else{const g=i.preOrderHooks;null!==g&&ns(s,g,0,a)}Pi(a)}function Ka(i,s){return i<<17|s<<2}function Us(i){return i>>17&32767}function _g(i){return 2|i}function po(i){return(131068&i)>>2}function vg(i,s){return-131069&i|s<<2}function af(i){return 1|i}function ds(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],g=a[l+1];if(-1!==g){const _=i.data[g];Sa(c),_.contentQueries(2,s[g],g)}}}function ju(i,s,a,l,c,g,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ni(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=g,S[16]=2==s.type?i[16]:S,S}function Qa(i,s,a,l,c){let g=i.data[s];if(null===g)g=function Fy(i,s,a,l,c){const g=Po(),_=ba(),I=i.data[s]=function Uy(i,s,a,l,c,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==g&&(_?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(i,s,a,l,c),function _l(){return st.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=c;const _=function eo(){const i=st.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Yr(g,!0),g}function yd(i,s,a,l){if(0===a)return-1;const c=s.length;for(let g=0;g<a;g++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function df(i,s,a){ko(s);try{const l=i.viewQuery;null!==l&&Ky(1,l,a);const c=i.template;null!==c&&Ly(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&ds(i,s),i.staticViewQueries&&Ky(2,i.viewQuery,a);const g=i.components;null!==g&&function Z0(i,s){for(let a=0;a<s.length;a++)Ob(i,s[a])}(s,g)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Lo()}}function _d(i,s,a,l){const c=s[2];if(256==(256&c))return;ko(s);const g=Da();try{Ni(s),function Ca(i){return st.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Ly(i,s,a,2,l);const _=3==(3&c);if(!g)if(_){const A=i.preOrderCheckHooks;null!==A&&xa(s,A,null)}else{const A=i.preOrderHooks;null!==A&&ns(s,A,0,null),Vo(s,0)}if(function lE(i){for(let s=An(i);null!==s;s=yi(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],g=c[3];0==(1024&c[2])&&No(g,1),c[2]|=1024}}}(s),function uE(i){for(let s=An(i);null!==s;s=yi(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];es(l)&&_d(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&ds(i,s),!g)if(_){const A=i.contentCheckHooks;null!==A&&xa(s,A)}else{const A=i.contentHooks;null!==A&&ns(s,A,1),Vo(s,1)}!function ky(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Pi(~c);else{const g=c,_=a[++l],E=a[++l];vl(_,g),E(2,s[g])}}}finally{Pi(-1)}}(i,s);const E=i.components;null!==E&&function W0(i,s){for(let a=0;a<s.length;a++)Nb(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Ky(2,I,l),!g)if(_){const A=i.viewCheckHooks;null!==A&&xa(s,A)}else{const A=i.viewHooks;null!==A&&ns(s,A,2),Vo(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),g||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,No(s[3],-1))}finally{Lo()}}function Cg(i,s,a,l){const c=s[10],g=!Da(),_=Xs(s);try{g&&!_&&c.begin&&c.begin(),_&&df(i,s,l),_d(i,s,a,l)}finally{g&&!_&&c.end&&c.end()}}function Ly(i,s,a,l,c){const g=Bn(),_=2&l;try{Pi(-1),_&&s.length>20&&Sy(i,s,20,Da()),a(l,c)}finally{Pi(g)}}function vd(i,s,a){!Ia()||(function Tb(i,s,a,l){const c=a.directiveStart,g=a.directiveEnd;i.firstCreatePass||Ms(a,s),cr(l,s);const _=a.initialInputs;for(let E=c;E<g;E++){const I=i.data[E],A=Si(I);A&&xb(s,a,I);const S=Oa(s,i,E,a);cr(S,s),null!==_&&aE(0,E-c,S,I,0,_),A&&(Yn(a.index,s)[8]=S)}}(i,s,a,Kn(a,s)),128==(128&a.flags)&&function Ab(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function Iu(){return st.lFrame.currentDirectiveIndex}();try{Pi(_);for(let I=l;I<c;I++){const A=i.data[I],S=s[I];Ta(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&nE(A,S)}}finally{Pi(-1),Ta(E)}}(i,s,a))}function Tg(i,s,a=Kn){const l=s.localNames;if(null!==l){let c=s.index+1;for(let g=0;g<l.length;g+=2){const _=l[g+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function Ed(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=hf(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function hf(i,s,a,l,c,g,_,E,I,A){const S=20+l,k=S+c,U=function bb(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Et);return a}(S,k),Y="function"==typeof A?A():A;return U[1]={type:i,blueprint:U,template:a,queries:null,viewQuery:E,declTNode:s,data:U.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function Q0(i,s,a,l){const c=hE(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&Yy(i).push(l,c.length-1))}function J0(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function hs(i,s,a,l,c,g,_,E){const I=Kn(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(kn(i,a,S,l,c),Cc(s)&&function Db(i,s){const a=Yn(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Ag(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,Qt(g)?g.setProperty(I,l,c):Hc(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}function By(i,s,a,l){let c=!1;if(Ia()){const g=function Sb(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let g=0;g<l.length;g++){const _=l[g];U0(a,_.selectors,!1)&&(c||(c=[]),Qn(Ms(a,s),i,_.type),Si(_)?(rE(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==g){c=!0,sE(a,i.data.length,g.length);for(let S=0;S<g.length;S++){const k=g[S];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,A=yd(i,s,g.length,null);for(let S=0;S<g.length;S++){const k=g[S];a.mergedAttrs=li(a.mergedAttrs,k.hostAttrs),oE(i,a,s,A,k),iE(A,k,_),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const U=k.type.prototype;!E&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(U.ngOnChanges||U.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function X0(i,s){const l=s.directiveEnd,c=i.data,g=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],k=S.inputs,U=null===g||by(s)?null:iA(k,g);_.push(U),E=J0(k,A,E),I=J0(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function Mb(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const g=a[s[c+1]];if(null==g)throw new xe(-301,!1);l.push(s[c],g)}}}(a,l,_)}return a.mergedAttrs=li(a.mergedAttrs,a.attrs),c}function tE(i,s,a,l,c,g){const _=g.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Cb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,_)}}function nE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function rE(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function iE(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Si(s)&&(a[""]=i)}}function sE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function oE(i,s,a,l,c){i.data[l]=c;const g=c.factory||(c.factory=ar(c.type)),_=new bu(g,Si(c),null);i.blueprint[l]=_,a[l]=_,tE(i,s,0,l,yd(i,a,c.hostVars,Et),c)}function xb(i,s,a){const l=Kn(s,i),c=Ed(a),g=i[10],_=pf(i,ju(i,c,null,a.onPush?64:16,l,s,g,g.createRenderer(l,a),null,null));i[s.index]=_}function ea(i,s,a,l,c,g){const _=Kn(i,s);!function jy(i,s,a,l,c,g,_){if(null==g)Qt(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?he(g):_(g,l||"",c);Qt(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,g,i.value,a,l,c)}function aE(i,s,a,l,c,g){const _=g[s];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],k=_[I++];null!==E?l.setInput(a,k,A,S):a[S]=k}}}function iA(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function $y(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Nb(i,s){const a=Yn(s,i);if(es(a)){const l=a[1];80&a[2]?_d(l,a,l.template,a[8]):a[5]>0&&Hy(a)}}function Hy(i){for(let l=An(i);null!==l;l=yi(l))for(let c=10;c<l.length;c++){const g=l[c];if(1024&g[2]){const _=g[1];_d(_,g,_.template,g[8])}else g[5]>0&&Hy(g)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Yn(a[l],i);es(c)&&c[5]>0&&Hy(c)}}function Ob(i,s){const a=Yn(s,i),l=a[1];(function Pb(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),df(l,a,a[8])}function pf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Gy(i){for(;i;){i[2]|=64;const s=ze(i);if(al(i)&&!s)return i;i=s}return null}function Wy(i,s,a){const l=s[10];l.begin&&l.begin();try{_d(i,s,i.template,a)}catch(c){throw pE(s,c),c}finally{l.end&&l.end()}}function cE(i){!function zy(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=us(a),c=l[1];Cg(c,l,c.template,a)}}(i[8])}function Ky(i,s,a){Sa(0),s(i,a)}const kb=(()=>Promise.resolve(null))();function hE(i){return i[7]||(i[7]=[])}function Yy(i){return i.cleanup||(i.cleanup=[])}function pE(i,s){const a=i[9],l=a?a.get(kl,null):null;l&&l.handleError(s)}function kn(i,s,a,l,c){for(let g=0;g<a.length;){const _=a[g++],E=a[g++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,E):I[E]=c}}function Ja(i,s,a){const l=As(s,i);!function Xh(i,s,a){Qt(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function gf(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,g=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?g=E:1==g?c=ce(c,E):2==g&&(l=ce(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Jy=new an("INJECTOR",-1);class gE{get(s,a=zo){if(a===zo){const l=new Error(`NullInjectorError: No provider for ${se(s)}!`);throw l.name="NullInjectorError",l}return a}}const xg=new an("Set Injector scope."),yf={},mE={};let Rg;function Ng(){return void 0===Rg&&(Rg=new gE),Rg}function Fb(i,s=null,a=null,l){const c=$u(i,s,a,l);return c._resolveInjectorDefTypes(),c}function $u(i,s=null,a=null,l){return new yE(i,a,s||Ng(),l)}class yE{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];a&&di(a,E=>this.processProvider(E,s,a)),di([s],E=>this.processInjectorType(E,[],g)),this.records.set(Jy,wd(void 0,this));const _=this.records.get(xg);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:se(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=zo,l=lt.Default){this.assertNotDestroyed();const c=ie(this),g=mn(void 0);try{if(!(l&lt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function jb(i){return"function"==typeof i||"object"==typeof i&&i instanceof an}(s)&&xt(s);E=I&&this.injectableDefInScope(I)?wd(Xy(s),yf):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&lt.Self?Ng():this.parent).get(s,a=l&lt.Optional&&a===zo?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[os]=_[os]||[]).unshift(se(s)),c)throw _;return function Tn(i,s,a,l){const c=i[os];throw s[M]&&c.unshift(s[M]),i.message=function Va(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=se(s);if(Array.isArray(s))c=s.map(se).join(" -> ");else if("object"==typeof s){let g=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];g.push(_+":"+("string"==typeof E?JSON.stringify(E):se(E)))}c=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(b,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[os]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{mn(g),ie(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(se(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processInjectorType(s,a,l){if(!(s=X(s)))return!1;let c=gr(s);const g=null==c&&s.ngModule||void 0,_=void 0===g?s:g,E=-1!==l.indexOf(_);if(void 0!==g&&(c=gr(g)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{di(c.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===S&&(S=[]),S.push(k))})}finally{}if(void 0!==S)for(let k=0;k<S.length;k++){const{ngModule:U,providers:Y}=S[k];di(Y,ye=>this.processProvider(ye,U,Y||L))}}this.injectorDefTypes.add(_);const I=ar(_)||(()=>new _);this.records.set(_,wd(I,yf));const A=c.providers;if(null!=A&&!E){const S=s;di(A,k=>this.processProvider(k,S,A))}return void 0!==g&&void 0!==s.providers}processProvider(s,a,l){let c=Id(s=X(s))?s:X(s&&s.provide);const g=function _E(i,s,a){return EE(i)?wd(void 0,i.useValue):wd(vE(i),yf)}(s);if(Id(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=wd(void 0,yf,!0),_.factory=()=>Ot(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,g)}hydrate(s,a){return a.value===yf&&(a.value=mE,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Bb(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=X(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Xy(i){const s=xt(i),a=null!==s?s.factory:ar(i);if(null!==a)return a;if(i instanceof an)throw new xe(204,!1);if(i instanceof Function)return function Lb(i){const s=i.length;if(s>0)throw function hi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new xe(204,!1);const a=function Gr(i){const s=i&&(i[Ii]||i[qr]);if(s){const a=function nr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new xe(204,!1)}function vE(i,s,a){let l;if(Id(i)){const c=X(i);return ar(c)||Xy(c)}if(EE(i))l=()=>X(i.useValue);else if(function Vb(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Ot(i.deps||[]));else if(function wE(i){return!(!i||!i.useExisting)}(i))l=()=>Fe(X(i.useExisting));else{const c=X(i&&(i.useClass||i.provide));if(!function e_(i){return!!i.deps}(i))return ar(c)||Xy(c);l=()=>new c(...Ot(i.deps))}return l}function wd(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function EE(i){return null!==i&&"object"==typeof i&&F in i}function Id(i){return"function"==typeof i}let Bs=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return Fb({name:""},l,a,"");{const g=null!==(c=a.name)&&void 0!==c?c:"";return Fb({name:g},a.parent,a.providers,g)}}}return i.THROW_IF_NOT_FOUND=zo,i.NULL=new gE,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>Fe(Jy)}),i.__NG_ELEMENT_ID__=-1,i})();function qb(i,s){Bc(us(i)[1],sn())}function bd(i){let s=function Ir(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Si(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new xe(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=ta(i.inputs),_.declaredInputs=ta(i.declaredInputs),_.outputs=ta(i.outputs);const E=c.hostBindings;E&&AE(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&zb(i,I),A&&Wb(i,A),le(i.inputs,c.inputs),le(i.declaredInputs,c.declaredInputs),le(i.outputs,c.outputs),Si(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const g=c.features;if(g)for(let _=0;_<g.length;_++){const E=g[_];E&&E.ngInherit&&E(i),E===bd&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Lr(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=li(c.hostAttrs,a=li(a,c.hostAttrs))}}(l)}function ta(i){return i===sr?{}:i===L?[]:i}function zb(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Wb(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,g)=>{s(l,c,g),a(l,c,g)}:s}function AE(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Dd=null;function tu(){if(!Dd){const i=Rt.Symbol;if(i&&i.iterator)Dd=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Dd=l)}}}return Dd}function hr(i){return!!Lg(i)&&(Array.isArray(i)||!(i instanceof Map)&&tu()in i)}function Lg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Vr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function o_(i,s,a,l){const c=De();return Vr(c,Ss(),s)&&(Tt(),ea(pn(),c,i,s,a,l)),o_}function mo(i,s,a,l){return Vr(i,Ss(),a)?s+he(a)+l:Et}function kE(i,s,a,l,c,g,_,E){const I=De(),A=Tt(),S=i+20,k=A.firstCreatePass?function vf(i,s,a,l,c,g,_,E,I){const A=s.consts,S=Qa(s,i,4,_||null,ai(A,E));By(s,a,S,ai(A,I)),Bc(s,S);const k=S.tViews=hf(2,S,l,c,g,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),k.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,l,c,g,_):A.data[S];Yr(k,!1);const U=I[11].createComment("");Xo(A,I,U,k),cr(U,I),pf(I,I[S]=$y(U,I,U,k)),Ai(k)&&vd(A,I,k),null!=_&&Tg(I,k,E)}function zu(i,s=lt.Default){const a=De();return null===a?Fe(i,s):ci(sn(),a,X(i),s)}function $E(){throw new Error("invalid")}function v_(i,s,a){const l=De();return Vr(l,Ss(),s)&&hs(Tt(),pn(),l,i,s,l[11],a,!1),v_}function Wu(i,s,a,l,c){const _=c?"class":"style";kn(i,a,s.inputs[_],_,l)}function Xg(i,s,a,l){const c=De(),g=Tt(),_=20+i,E=c[11],I=c[_]=Vl(E,s,function Uc(){return st.lFrame.currentNamespace}()),A=g.firstCreatePass?function iD(i,s,a,l,c,g,_){const E=s.consts,A=Qa(s,i,2,c,ai(E,g));return By(s,a,A,ai(E,_)),null!==A.attrs&&gf(A,A.attrs,!1),null!==A.mergedAttrs&&gf(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,g,c,0,s,a,l):g.data[_];Yr(A,!0);const S=A.mergedAttrs;null!==S&&on(E,I,S);const k=A.classes;null!==k&&dd(E,I,k);const U=A.styles;return null!==U&&Iy(E,I,U),64!=(64&A.flags)&&Xo(g,c,I,A),0===function _u(){return st.lFrame.elementDepthCount}()&&cr(I,c),function wa(){st.lFrame.elementDepthCount++}(),Ai(A)&&(vd(g,c,A),function Vy(i,s,a){if(gu(s)){const c=s.directiveEnd;for(let g=s.directiveStart;g<c;g++){const _=i.data[g];_.contentQueries&&_.contentQueries(1,a[g],g)}}}(g,A,c)),null!==l&&Tg(c,A),Xg}function na(){let i=sn();ba()?function yl(){st.lFrame.isParent=!1}():(i=i.parent,Yr(i,!1));const s=i;!function fl(){st.lFrame.elementDepthCount--}();const a=Tt();return a.firstCreatePass&&(Bc(a,i),gu(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function $c(i){return 0!=(16&i.flags)}(s)&&Wu(a,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Bp(i){return 0!=(32&i.flags)}(s)&&Wu(a,s,De(),s.stylesWithoutHost,!1),na}function em(i,s,a,l){return Xg(i,s,a,l),na(),em}function Kl(i){return!!i&&"function"==typeof i.then}function If(i){return!!i&&"function"==typeof i.subscribe}const w_=If;function bf(i,s,a,l){const c=De(),g=Tt(),_=sn();return function Ad(i,s,a,l,c,g,_,E){const I=Ai(l),S=i.firstCreatePass&&Yy(i),k=s[8],U=hE(s);let Y=!0;if(3&l.type||E){const Be=Kn(l,s),Qe=E?E(Be):Be,Ce=U.length,ot=E?kt=>E(qt(kt[l.index])):l.index;if(Qt(a)){let kt=null;if(!E&&I&&(kt=function qE(i,s,a,l){const c=i.cleanup;if(null!=c)for(let g=0;g<c.length-1;g+=2){const _=c[g];if(_===a&&c[g+1]===l){const E=s[7],I=c[g+2];return E.length>I?E[I]:null}"string"==typeof _&&(g+=2)}return null}(i,s,c,l.index)),null!==kt)(kt.__ngLastListenerFn__||kt).__ngNextListenerFn__=g,kt.__ngLastListenerFn__=g,Y=!1;else{g=Df(l,s,k,g,!1);const Xt=a.listen(Qe,c,g);U.push(g,Xt),S&&S.push(c,ot,Ce,Ce+1)}}else g=Df(l,s,k,g,!0),Qe.addEventListener(c,g,_),U.push(g),S&&S.push(c,ot,Ce,_)}else g=Df(l,s,k,g,!1);const ye=l.outputs;let Ne;if(Y&&null!==ye&&(Ne=ye[c])){const Be=Ne.length;if(Be)for(let Qe=0;Qe<Be;Qe+=2){const ms=s[Ne[Qe]][Ne[Qe+1]].subscribe(g),il=U.length;U.push(g,ms),S&&S.push(c,l.index,il,-(il+1))}}}(g,c,c[11],_,i,s,!!a,l),bf}function nm(i,s,a,l){try{return!1!==a(l)}catch(c){return pE(i,c),!1}}function Df(i,s,a,l,c){return function g(_){if(_===Function)return l;const E=2&i.flags?Yn(i.index,s):s;0==(32&s[2])&&Gy(E);let I=nm(s,0,l,_),A=g.__ngNextListenerFn__;for(;A;)I=nm(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function D_(i,s,a){return Tf(i,"",s,"",a),D_}function Tf(i,s,a,l,c){const g=De(),_=mo(g,s,a,l);return _!==Et&&hs(Tt(),pn(),g,i,_,g[11],c,!1),Tf}function sm(i,s,a,l,c){const g=i[a+1],_=null===s;let E=l?Us(g):po(g),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];sD(i[E],s)&&(I=!0,i[E+1]=l?af(S):_g(S)),E=l?Us(S):po(S)}I&&(i[a+1]=l?_g(g):af(g))}function sD(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&La(i,s)>=0}function Xl(i,s){return function yo(i,s,a,l){const c=De(),g=Tt(),_=function ui(i){const s=st.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);g.firstUpdatePass&&function Md(i,s,a,l){const c=i.data;if(null===c[a+1]){const g=c[Bn()],_=function YE(i,s){return s>=i.expandoStartIndex}(i,a);(function L_(i,s){return 0!=(i.flags&(s?16:32))})(g,l)&&null===s&&!_&&(s=!1),s=function Ku(i,s,a,l){const c=function Aa(i){const s=st.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let g=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=xf(a=Yu(null,i,s,a,l),s.attrs,l),g=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=Yu(c,i,s,a,l),null===g){let I=function QE(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==po(l))return i[Us(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Yu(null,i,s,I[1],l),I=xf(I,s.attrs,l),function JE(i,s,a,l){i[Us(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else g=function XE(i,s,a){let l;const c=s.directiveEnd;for(let g=1+s.directiveStylingLast;g<c;g++)l=xf(l,i[g].hostAttrs,a);return xf(l,s.attrs,a)}(i,s,l)}return void 0!==g&&(l?s.residualClasses=g:s.residualStyles=g),a}(c,g,s,l),function Sf(i,s,a,l,c,g){let _=g?s.classBindings:s.styleBindings,E=Us(_),I=po(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const k=a;S=k[1],(null===S||La(k,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const U=Us(i[E+1]);i[l+1]=Ka(U,E),0!==U&&(i[U+1]=vg(i[U+1],l)),i[E+1]=function yg(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Ka(E,0),0!==E&&(i[E+1]=vg(i[E+1],l)),E=l;else i[l+1]=Ka(I,0),0===E?E=l:i[I+1]=vg(i[I+1],l),I=l;A&&(i[l+1]=_g(i[l+1])),sm(i,S,l,!0),sm(i,S,l,!1),function Yl(i,s,a,l,c){const g=c?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof s&&La(g,s)>=0&&(a[l+1]=af(a[l+1]))}(s,S,i,l,g),_=Ka(E,I),g?s.classBindings=_:s.styleBindings=_}(c,g,s,a,_,l)}}(g,i,_,l),s!==Et&&Vr(c,_,s)&&function P_(i,s,a,l,c,g,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];xd(function Eg(i){return 1==(1&i)}(A)?k_(I,s,a,c,po(A),_):void 0)||(xd(g)||function j0(i){return 2==(2&i)}(A)&&(g=k_(I,null,a,c,E,_)),function sf(i,s,a,l,c){const g=Qt(i);if(s)c?g?i.addClass(a,l):a.classList.add(l):g?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:T.DashCase;if(null==c)g?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=T.Important),g?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,As(Bn(),a),c,g))}(g,g.data[Bn()],c,c[11],i,c[_+1]=function F_(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=se($a(i)))),i}(s,a),l,_)}(i,s,null,!0),Xl}function Yu(i,s,a,l,c){let g=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(g=s[E],l=xf(l,g.hostAttrs,c),g!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function xf(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let g=0;g<s.length;g++){const _=s[g];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),fi(i,_,!!a||s[++g]))}return void 0===i?null:i}function k_(i,s,a,l,c,g){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,k=null===S;let U=a[c+1];U===Et&&(U=k?L:void 0);let Y=k?Ml(U,l):S===l?U:void 0;if(A&&!xd(Y)&&(Y=Ml(I,l)),xd(Y)&&(E=Y,_))return E;const ye=i[c+1];c=_?Us(ye):po(ye)}if(null!==s){let I=g?s.residualClasses:s.residualStyles;null!=I&&(E=Ml(I,l))}return E}function xd(i){return void 0!==i}function V_(i,s=""){const a=De(),l=Tt(),c=i+20,g=l.firstCreatePass?Qa(l,c,1,s,null):l.data[c],_=a[c]=function ud(i,s){return Qt(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Xo(l,a,_,g),Yr(g,!1)}function Rf(i){return um("",i,""),Rf}function um(i,s,a){const l=De(),c=mo(l,i,s,a);return c!==Et&&Ja(l,Bn(),c),um}const ou=void 0;var lw=["en",[["a","p"],["AM","PM"],ou],[["AM","PM"],ou,ou],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ou,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ou,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ou,"{1} 'at' {0}",ou],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function z_(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let au={};function fm(i){const s=function pm(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Z_(s);if(a)return a;const l=s.split("-")[0];if(a=Z_(l),a)return a;if("en"===l)return lw;throw new Error(`Missing locale data for the locale "${i}".`)}function W_(i){return fm(i)[ht.PluralCase]}function Z_(i){return i in au||(au[i]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[i]),au[i]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const Vf="en-US";let dw=Vf;function Cr(i,s,a,l,c){if(i=X(i),Array.isArray(i))for(let g=0;g<i.length;g++)Cr(i[g],s,a,l,c);else{const g=Tt(),_=De();let E=Id(i)?i:X(i.provide),I=vE(i);const A=sn(),S=1048575&A.providerIndexes,k=A.directiveStart,U=A.providerIndexes>>20;if(Id(i)||!i.multi){const Y=new bu(I,c,zu),ye=Hd(E,s,c?S:S+U,k);-1===ye?(Qn(Ms(A,_),g,E),vm(g,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Y),_.push(Y)):(a[ye]=Y,_[ye]=Y)}else{const Y=Hd(E,s,S+U,k),ye=Hd(E,s,S,S+U),Ne=Y>=0&&a[Y],Be=ye>=0&&a[ye];if(c&&!Be||!c&&!Ne){Qn(Ms(A,_),g,E);const Qe=function Zf(i,s,a,l,c){const g=new bu(i,a,zu);return g.multi=[],g.index=s,g.componentProviders=0,dn(g,c,l&&!a),g}(c?ic:rv,a.length,c,l,I);!c&&Be&&(a[ye].providerFactory=Qe),vm(g,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else vm(g,i,Y>-1?Y:ye,dn(a[c?ye:Y],I,!c&&l));!c&&l&&Be&&a[ye].componentProviders++}}}function vm(i,s,a,l){const c=Id(s),g=function Ub(i){return!!i.useClass}(s);if(c||g){const I=(g?X(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,I]):A[S+1].push(l,I)}else A.push(a,I)}}}function dn(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Hd(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function rv(i,s,a,l){return Gd(this.multi,[])}function ic(i,s,a,l){const c=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Oa(a,a[1],this.providerFactory.index,l);g=E.slice(0,_),Gd(c,g);for(let I=_;I<E.length;I++)g.push(E[I])}else g=[],Gd(c,g);return g}function Gd(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function iv(i,s=[]){return a=>{a.providersResolver=(l,c)=>function Tw(i,s,a){const l=Tt();if(l.firstCreatePass){const c=Si(i);Cr(a,l.data,l.blueprint,c,!0),Cr(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class Hs{}class $r{resolveComponentFactory(s){throw function Aw(i){const s=Error(`No component factory found for ${se(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let en=(()=>{class i{}return i.NULL=new $r,i})();function Sw(){return wo(sn(),De())}function wo(i,s){return new Kf(Kn(i,s))}let Kf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Sw,i})();function Mw(i){return i instanceof Kf?i.nativeElement:i}class xw{}let Yf=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function wm(){const i=De(),a=Yn(sn().index,i);return function Em(i){return i[11]}(Nr(a)?a:i)}(),i})(),Rw=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class ov{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Tr=new ov("13.3.1"),av={};function Im(i,s,a,l,c=!1){for(;null!==a;){const g=s[a.index];if(null!==g&&l.push(qt(g)),Ti(g))for(let E=10;E<g.length;E++){const I=g[E],A=I[1].firstChild;null!==A&&Im(I[1],I,A,l)}const _=a.type;if(8&_)Im(i,s,a.child,l);else if(32&_){const E=z(a,s);let I;for(;I=E();)l.push(I)}else if(16&_){const E=ld(s,a);if(Array.isArray(E))l.push(...E);else{const I=ze(s[16]);Im(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Qf{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Im(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Ti(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(yy(s,l),Ui(a,l))}this._attachedToViewContainer=!1}ho(this._lView[1],this._lView)}onDestroy(s){Q0(this._lView[1],this._lView,null,s)}markForCheck(){Gy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Wy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Zy(i,s,a){Eu(!0);try{Wy(i,s,a)}finally{Eu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Wa(i,s){cd(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new xe(902,"");this._appRef=s}}class Nw extends Qf{constructor(s){super(s),this._view=s}detectChanges(){cE(this._view)}checkNoChanges(){!function dE(i){Eu(!0);try{cE(i)}finally{Eu(!1)}}(this._view)}get context(){return null}}class Ow extends en{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Rn(s);return new oa(a,this.ngModule)}}function Pw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class oa extends Hs{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Ty(i){return i.map(Cy).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Pw(this.componentDef.inputs)}get outputs(){return Pw(this.componentDef.outputs)}create(s,a,l,c){const g=(c=c||this.ngModule)?function MD(i,s){return{get:(a,l,c)=>{const g=i.get(a,av,c);return g!==av||l===av?g:s.get(a,l,c)}}}(s,c.injector):s,_=g.get(xw,_a),E=g.get(Rw,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function Y0(i,s,a){if(Qt(i))return i.selectRootElement(s,a===Ft.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Vl(_.createRenderer(null,this.componentDef),A,function SD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),k=this.componentDef.onPush?576:528,U=function TE(i,s){return{components:[],scheduler:i||Er,clean:kb,playerHandler:s||null,flags:0}}(),Y=hf(0,null,null,1,0,null,null,null,null,null),ye=ju(null,Y,U,k,null,null,_,I,E,g);let Ne,Be;ko(ye);try{const Qe=function CE(i,s,a,l,c,g){const _=a[1];a[20]=i;const I=Qa(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(gf(I,A,!0),null!==i&&(on(c,i,A),null!==I.classes&&dd(c,i,I.classes),null!==I.styles&&Iy(c,i,I.styles)));const S=l.createRenderer(i,s),k=ju(a,Ed(s),null,s.onPush?64:16,a[20],I,l,S,g||null,null);return _.firstCreatePass&&(Qn(Ms(I,a),_,s.type),rE(_,I),sE(I,a.length,1)),pf(a,k),a[20]=k}(S,this.componentDef,ye,_,I);if(S)if(l)on(I,S,["ng-version",Tr.full]);else{const{attrs:Ce,classes:ot}=function Za(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let g=i[l];if("string"==typeof g)2===c?""!==g&&s.push(g,i[++l]):8===c&&a.push(g);else{if(!fo(c))break;c=g}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ce&&on(I,S,Ce),ot&&ot.length>0&&dd(I,S,ot.join(" "))}if(Be=un(Y,20),void 0!==a){const Ce=Be.projection=[];for(let ot=0;ot<this.ngContentSelectors.length;ot++){const kt=a[ot];Ce.push(null!=kt?Array.from(kt):null)}}Ne=function Fg(i,s,a,l,c){const g=a[1],_=function ff(i,s,a){const l=sn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),oE(i,l,s,yd(i,s,1,null),a));const c=Oa(s,i,l.directiveStart,l);cr(c,s);const g=Kn(l,s);return g&&cr(g,s),c}(g,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=sn();s.contentQueries(1,_,I.directiveStart)}const E=sn();return!g.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Pi(E.index),tE(a[1],E,0,E.directiveStart,E.directiveEnd,s),nE(s,_)),_}(Qe,this.componentDef,ye,U,[qb]),df(Y,ye,null)}finally{Lo()}return new kw(this.componentType,Ne,wo(Be,ye),ye,Be)}}class kw extends class AD{}{constructor(s,a,l,c,g){super(),this.location=l,this._rootLView=c,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new Nw(c),this.componentType=s}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Wi{}class uv{}const Io=new Map;class cv extends Wi{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ow(this);const l=Nn(s);this._bootstrapComponents=cs(l.bootstrap),this._r3Injector=$u(s,a,[{provide:Wi,useValue:this},{provide:en,useValue:this.componentFactoryResolver}],se(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Bs.THROW_IF_NOT_FOUND,l=lt.Default){return s===Bs||s===Wi||s===Jy?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class oc extends uv{constructor(s){super(),this.moduleType=s,null!==Nn(s)&&function lv(i){const s=new Set;!function a(l){const c=Nn(l,!0),g=c.id;null!==g&&(function bm(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${se(s)} vs ${se(s.name)}`)}(g,Io.get(g),l),Io.set(g,l));const _=cs(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new cv(this.moduleType,s)}}function Zd(i){return s=>{setTimeout(i,void 0,s)}}const ps=class tr extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,g,_;let E=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const k=s;E=null===(c=k.next)||void 0===c?void 0:c.bind(k),I=null===(g=k.error)||void 0===g?void 0:g.bind(k),A=null===(_=k.complete)||void 0===_?void 0:_.bind(k)}this.__isAsync&&(I=Zd(I),E&&(E=Zd(E)),A&&(A=Zd(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof J.w0&&s.add(S),S}};function ND(){return this._results[tu()]()}class tp{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=tu(),l=tp.prototype;l[a]||(l[a]=ND)}get changes(){return this._changes||(this._changes=new ps)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Pr(s);(this._changesDetected=!function $n(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],g=s[l];if(a&&(c=a(c),g=a(g)),g!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let np=(()=>{class i{}return i.__NG_ELEMENT_ID__=rp,i})();const Zw=np,Kw=class extends Zw{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=ju(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(l[19]=g.createEmbeddedView(a)),df(a,l,s),new Qf(l)}};function rp(){return aa(sn(),De())}function aa(i,s){return 4&i.type?new Kw(s,i,wo(i,s)):null}let ip=(()=>{class i{}return i.__NG_ELEMENT_ID__=Yw,i})();function Yw(){return zn(sn(),De())}const Qw=ip,Kd=class extends Qw{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return wo(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){const s=xs(this._hostTNode,this._hostLView);if(bl(s)){const a=zt(s,this._hostLView),l=ki(s);return new ro(a[1].data[l+8],a)}return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Cm(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,g){const _=s&&!function Ps(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const k=a||{};E=k.index,l=k.injector,c=k.projectableNodes,g=k.ngModuleRef}const I=_?s:new oa(Rn(s)),A=l||this.parentInjector;if(!g&&null==I.ngModule){const U=(_?A:this.parentInjector).get(Wi,null);U&&(g=U)}const S=I.create(A,c,void 0,g);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function Ea(i){return Ti(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const k=l[3],U=new Kd(k,k[6],k[3]);U.detach(U.indexOf(s))}}const g=this._adjustIndex(a),_=this._lContainer;!function Ul(i,s,a,l){const c=10+l,g=a.length;l>0&&(a[c-1][4]=s),l<g-10?(s[4]=a[c],Su(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function my(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,g);const E=Ey(g,_),I=l[11],A=nf(I,_[7]);return null!==A&&function tf(i,s,a,l,c,g){l[0]=c,l[6]=s,cd(i,l,a,1,c,g)}(c,_[6],I,l,A,E),s.attachToViewContainerRef(),Su(gv(_),g,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Cm(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=yy(this._lContainer,a);l&&(Ui(gv(this._lContainer),a),ho(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=yy(this._lContainer,a);return l&&null!=Ui(gv(this._lContainer),a)?new Qf(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function Cm(i){return i[8]}function gv(i){return i[8]||(i[8]=[])}function zn(i,s){let a;const l=s[i.index];if(Ti(l))a=l;else{let c;if(8&i.type)c=qt(l);else{const g=s[11];c=g.createComment("");const _=Kn(i,s);ti(g,nf(g,_),c,function lb(i,s){return Qt(i)?i.nextSibling(s):s.nextSibling}(g,_),!1)}s[i.index]=a=$y(l,s,c,i),pf(s,a)}return new Kd(a,i,s)}class ua{constructor(s){this.queryList=s,this.matches=null}clone(){return new ua(this.queryList)}setDirty(){this.queryList.setDirty()}}class mv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let g=0;g<l;g++){const _=a.getByIndex(g);c.push(this.queries[_.indexInDeclarationView].clone())}return new mv(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ev(s,a).matches&&this.queries[a].setDirty()}}class gs{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class yv{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(s,c);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new yv(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class sp{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new sp(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const g=l[c];this.matchTNodeWithReadOption(s,a,op(a,g)),this.matchTNodeWithReadOption(s,a,Li(a,s,g,!1,!1))}else l===np?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Li(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Kf||c===ip||c===np&&4&a.type)this.addMatch(a.index,-2);else{const g=Li(a,s,c,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function op(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function kD(i,s,a,l){return-1===a?function PD(i,s){return 11&i.type?wo(i,s):4&i.type?aa(i,s):null}(s,i):-2===a?function Jt(i,s,a){return a===Kf?wo(s,i):a===np?aa(s,i):a===ip?zn(s,i):void 0}(i,s,l):Oa(i,i[1],a,s)}function Xw(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const g=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:kD(s,g[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Yd(i,s,a,l){const c=i.queries.getByIndex(a),g=c.matches;if(null!==g){const _=Xw(i,s,c,a);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)l.push(_[E/2]);else{const A=g[E+1],S=s[-I];for(let k=10;k<S.length;k++){const U=S[k];U[17]===U[3]&&Yd(U[1],U,A,l)}if(null!==S[9]){const k=S[9];for(let U=0;U<k.length;U++){const Y=k[U];Yd(Y[1],Y,A,l)}}}}}return l}function Qd(i){const s=De(),a=Tt(),l=El();Sa(l+1);const c=Ev(a,l);if(i.dirty&&Xs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const g=c.crossesNgTemplate?Yd(a,s,l,[]):Xw(a,s,c,l);i.reset(g,Mw),i.notifyOnChanges()}return!0}return!1}function up(i,s,a,l){const c=Tt();if(c.firstCreatePass){const g=sn();(function tI(i,s,a){null===i.queries&&(i.queries=new yv),i.queries.track(new sp(s,a))})(c,new gs(s,a,l),g.index),function nI(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function vv(i,s,a){const l=new tp(4==(4&a));Q0(i,s,l,l.destroy),null===s[19]&&(s[19]=new mv),s[19].queries.push(new ua(l))}(c,De(),a)}function _v(){return function eI(i,s){return i[19].queries[s].queryList}(De(),El())}function Ev(i,s){return i.queries.getByIndex(s)}function Sm(...i){}const Ov=new an("Application Initializer");let Pv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Sm,this.reject=Sm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const g=this.appInits[c]();if(Kl(g))a.push(g);else if(w_(g)){const _=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Fe(Ov,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const kv=new an("AppId",{providedIn:"root",factory:function dI(){return`${Mm()}${Mm()}${Mm()}`}});function Mm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const de=new an("Platform Initializer"),pp=new an("Platform ID"),Gs=new an("appBootstrapListener");let th=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();const Fv=new an("LocaleId",{providedIn:"root",factory:()=>dt(Fv,lt.Optional|lt.SkipSelf)||function dc(){return"undefined"!=typeof $localize&&$localize.locale||Vf}()}),hc=new an("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ar{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Lv=(()=>{class i{compileModuleSync(a){return new oc(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=cs(Nn(a).declarations).reduce((_,E)=>{const I=Rn(E);return I&&_.push(new oa(I)),_},[]);return new Ar(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const nl=(()=>Promise.resolve(0))();function xm(i){"undefined"==typeof Zone?nl.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class qs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ps(!1),this.onMicrotaskEmpty=new ps(!1),this.onStable=new ps(!1),this.onError=new ps(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function qD(){let i=Rt.requestAnimationFrame,s=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function nh(i){const s=()=>{!function fc(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Rt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,pc(i),i.isCheckStableRunning=!0,lu(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),pc(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,g,_,E)=>{try{return Uv(i),a.invokeTask(c,g,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&s(),Nm(i)}},onInvoke:(a,l,c,g,_,E,I)=>{try{return Uv(i),a.invoke(c,g,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Nm(i)}},onHasTask:(a,l,c,g)=>{a.hasTask(c,g),l===c&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,pc(i),lu(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,c,g)=>(a.handleError(c,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(qs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+c,s,Rm,Sm,Sm);try{return g.runTask(_,a,l)}finally{g.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const Rm={};function lu(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function pc(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Uv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Nm(i){i._nesting--,lu(i)}class Bv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ps,this.onMicrotaskEmpty=new ps,this.onStable=new ps,this.onError=new ps}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let jv=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qs.assertNotInAngularZone(),xm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xm(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Fe(qs))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),pI=(()=>{class i{constructor(){this._applications=new Map,gp.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return gp.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();class gI{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function mI(i){gp=i}let wi,gp=new gI;const _I=new an("AllowMultipleToken");class zD{constructor(s,a){this.name=s,this.token=a}}function rh(i,s,a=[]){const l=`Platform: ${s}`,c=new an(l);return(g=[])=>{let _=$v();if(!_||_.injector.get(_I,!1))if(i)i(a.concat(g).concat({provide:c,useValue:!0}));else{const E=a.concat(g).concat({provide:c,useValue:!0},{provide:xg,useValue:"platform"});!function WD(i){if(wi&&!wi.destroyed&&!wi.injector.get(_I,!1))throw new xe(400,"");wi=i.get(vI);const s=i.get(de,null);s&&s.forEach(a=>a())}(Bs.create({providers:E,name:l}))}return function mc(i){const s=$v();if(!s)throw new xe(401,"");return s}()}}function $v(){return wi&&!wi.destroyed?wi:null}let vI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function ZD(i,s){let a;return a="noop"===i?new Bv:("zone.js"===i?void 0:i)||new qs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:qs,useValue:E}];return E.run(()=>{const A=Bs.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),k=S.injector.get(kl,null);if(!k)throw new xe(402,"");return E.runOutsideAngular(()=>{const U=E.onError.subscribe({next:Y=>{k.handleError(Y)}});S.onDestroy(()=>{Om(this._modules,S),U.unsubscribe()})}),function Hv(i,s,a){try{const l=a();return Kl(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(k,E,()=>{const U=S.injector.get(Pv);return U.runInitializers(),U.donePromise.then(()=>(function hw(i){Je(i,"Expected localeId to be defined"),"string"==typeof i&&(dw=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Fv,Vf)||Vf),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=mp({},l);return function gc(i,s,a){const l=new oc(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,c))}_moduleDoBootstrap(a){const l=a.injector.get(Gv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new xe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Fe(Bs))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})();function mp(i,s){return Array.isArray(s)?s.reduce(mp,i):Object.assign(Object.assign({},i),s)}let Gv=(()=>{class i{constructor(a,l,c,g,_){this._zone=a,this._injector=l,this._exceptionHandler=c,this._componentFactoryResolver=g,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new P.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new P.y(A=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{qs.assertNotInAngularZone(),xm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{S.unsubscribe(),k.unsubscribe()}});this.isStable=(0,ue.T)(E,I.pipe((0,re.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new xe(405,"");let c;c=a instanceof Hs?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const g=function yI(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Wi),E=c.create(Bs.NULL,[],l||c.selector,g),I=E.location.nativeElement,A=E.injector.get(jv,null),S=A&&E.injector.get(pI);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),Om(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new xe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Om(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Gs,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(Fe(qs),Fe(Bs),Fe(kl),Fe(en),Fe(Pv))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Om(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let yp=!0,qv=!1;function Zi(){return qv=!0,yp}function EI(){if(qv)throw new Error("Cannot enable prod mode after platform setup.");yp=!1}let rl=(()=>{class i{}return i.__NG_ELEMENT_ID__=oh,i})();function oh(i){return function II(i,s,a){if(Cc(i)&&!a){const l=Yn(i.index,s);return new Qf(l,l)}return 47&i.type?new Qf(s[16],s):null}(sn(),De(),16==(16&i))}class Kv{constructor(){}supports(s){return hr(s)}create(s){return new Qv(s)}}const Yv=(i,s)=>s;class Qv{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Yv}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,g=null;for(;a||l;){const _=!l||a&&a.currentIndex<TI(l,c,g)?a:l,E=TI(_,c,g),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{g||(g=[]);const A=E-c,S=I-c;if(A!=S){for(let U=0;U<A;U++){const Y=U<g.length?g[U]:g[U]=0,ye=Y+U;S<=ye&&ye<A&&(g[U]=Y+1)}g[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!hr(s))throw new xe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,g,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)g=s[E],_=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,g,_,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,_,E),l=!0),a=a._next}else c=0,function _i(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[tu()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let g;return null===s?g=this._itTail:(g=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,g,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,g,c)):s=this._addAfter(new vp(a,l),g,c),s}_verifyReinsertion(s,a,l,c){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?s=this._reinsertAfter(g,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,g=s._nextRemoved;return null===c?this._removalsHead=g:c._nextRemoved=g,null===g?this._removalsTail=c:g._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Um),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Um),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class vp{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vm{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Um{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Vm,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function TI(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class Bm{constructor(){}supports(s){return s instanceof Map||Lg(s)}create(){return new AI}}class AI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Lg(s)))throw new xe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const g=c._prev,_=c._next;return g&&(g._next=_),_&&(_._prev=g),c._next=null,c._prev=null,c}const l=new eC(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class eC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jv(){return new jm([new Kv])}let jm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Jv()),deps:[[i,new Hn,new lr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new xe(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:Jv}),i})();function MI(){return new $m([new Bm])}let $m=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||MI()),deps:[[i,new Hn,new lr]]}}find(a){const l=this.factories.find(g=>g.supports(a));if(l)return l;throw new xe(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:MI}),i})();const Xv=rh(null,"core",[{provide:pp,useValue:"unknown"},{provide:vI,deps:[Bs]},{provide:pI,deps:[]},{provide:th,deps:[]}]);let Hm=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Fe(Gv))},i.\u0275mod=mr({type:i}),i.\u0275inj=Gt({}),i})()},3942:(Ke,ve,O)=>{O.d(ve,{Z:()=>xe});var f=O(2090),J=O(4859),P=O(9681),ue=O(1877);class re{constructor(he,Ie){this._delegate=he,this.firebase=Ie,(0,P._addComponent)(he,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(he,Ie=P._DEFAULT_ENTRY_NAME){var He;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(he);return!We.isInitialized()&&"EXPLICIT"===(null===(He=We.getComponent())||void 0===He?void 0:He.instantiationMode)&&We.initialize(),We.getImmediate({identifier:Ie})}_removeServiceInstance(he,Ie=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Ie)}_addComponent(he){(0,P._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,P._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ce(){const Le=function se(Le){const he={},Ie={__esModule:!0,initializeApp:function be(Ve,j={}){const V=P.initializeApp(Ve,j);if((0,f.r3)(he,V.name))return he[V.name];const Z=new Le(V,Ie);return he[V.name]=Z,Z},app:We,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function Ee(Ve){const j=Ve.name,V=j.replace("-compat","");if(P._registerComponent(Ve)&&"PUBLIC"===Ve.type){const Z=(oe=We())=>{if("function"!=typeof oe[V])throw le.create("invalid-app-argument",{appName:j});return oe[V]()};void 0!==Ve.serviceProps&&(0,f.ZB)(Z,Ve.serviceProps),Ie[V]=Z,Le.prototype[V]=function(...oe){return this._getService.bind(this,j).apply(this,Ve.multipleInstances?oe:[])}}return"PUBLIC"===Ve.type?Ie[V]:null},removeApp:function He(Ve){delete he[Ve]},useAsService:function Ue(Ve,j){return"serverAuth"===j?null:j},modularAPIs:P}};function We(Ve){if(!(0,f.r3)(he,Ve=Ve||P._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Ve});return he[Ve]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function _e(){return Object.keys(he).map(Ve=>he[Ve])}}),We.App=Le,Ie}(re);return Le.INTERNAL=Object.assign(Object.assign({},Le.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function he(Ie){(0,f.ZB)(Le,Ie)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Le}(),B=new ue.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Le=self.firebase.SDK_VERSION;Le&&Le.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=$;!function Te(Le){(0,P.registerVersion)("@firebase/app-compat","0.1.24",Le)}()},9681:(Ke,ve,O)=>{O.r(ve),O.d(ve,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Ii,_DEFAULT_ENTRY_NAME:()=>Je,_addComponent:()=>Wn,_addOrOverwriteComponent:()=>Kt,_apps:()=>hn,_clearComponents:()=>Qi,_components:()=>jt,_getProvider:()=>Gt,_registerComponent:()=>Hr,_removeServiceInstance:()=>xt,deleteApp:()=>lt,getApp:()=>qr,getApps:()=>bi,initializeApp:()=>Es,onLog:()=>mn,registerVersion:()=>fn,setLogLevel:()=>zs});var f=O(5861),J=O(4859),P=O(1877),ue=O(2090),re=O(8766);class pe{constructor(Q){this.container=Q}getPlatformInfoString(){return this.container.getProviders().map(Me=>{if(function le(H){const Q=H.getComponent();return"VERSION"===(null==Q?void 0:Q.type)}(Me)){const Ze=Me.getImmediate();return`${Ze.library}/${Ze.version}`}return null}).filter(Me=>Me).join(" ")}}const se="@firebase/app",$=new P.Yd("@firebase/app"),Je="[DEFAULT]",mt={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,jt=new Map;function Wn(H,Q){try{H.container.addComponent(Q)}catch(Me){$.debug(`Component ${Q.name} failed to register with FirebaseApp ${H.name}`,Me)}}function Kt(H,Q){H.container.addOrOverwriteComponent(Q)}function Hr(H){const Q=H.name;if(jt.has(Q))return $.debug(`There were multiple attempts to register component ${Q}.`),!1;jt.set(Q,H);for(const Me of hn.values())Wn(Me,H);return!0}function Gt(H,Q){const Me=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Me&&Me.triggerHeartbeat(),H.container.getProvider(Q)}function xt(H,Q,Me=Je){Gt(H,Q).clearInstance(Me)}function Qi(){jt.clear()}const nr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class gr{constructor(Q,Me,Ze){this._isDeleted=!1,this._options=Object.assign({},Q),this._config=Object.assign({},Me),this._name=Me.name,this._automaticDataCollectionEnabled=Me.automaticDataCollectionEnabled,this._container=Ze,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this.checkDestroyed(),this._automaticDataCollectionEnabled=Q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Q){this._isDeleted=Q}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}const Ii="9.8.0";function Es(H,Q={}){"object"!=typeof Q&&(Q={name:Q});const Me=Object.assign({name:Je,automaticDataCollectionEnabled:!1},Q),Ze=Me.name;if("string"!=typeof Ze||!Ze)throw nr.create("bad-app-name",{appName:String(Ze)});const it=hn.get(Ze);if(it){if((0,ue.vZ)(H,it.options)&&(0,ue.vZ)(Me,it.config))return it;throw nr.create("duplicate-app",{appName:Ze})}const yt=new J.H0(Ze);for(const pt of jt.values())yt.addComponent(pt);const nn=new gr(H,Me,yt);return hn.set(Ze,nn),nn}function qr(H=Je){const Q=hn.get(H);if(!Q)throw nr.create("no-app",{appName:H});return Q}function bi(){return Array.from(hn.values())}function lt(H){return zr.apply(this,arguments)}function zr(){return(zr=(0,f.Z)(function*(H){const Q=H.name;hn.has(Q)&&(hn.delete(Q),yield Promise.all(H.container.getProviders().map(Me=>Me.delete())),H.isDeleted=!0)})).apply(this,arguments)}function fn(H,Q,Me){var Ze;let it=null!==(Ze=mt[H])&&void 0!==Ze?Ze:H;Me&&(it+=`-${Me}`);const yt=it.match(/\s|\//),nn=Q.match(/\s|\//);if(yt||nn){const pt=[`Unable to register library "${it}" with version "${Q}":`];return yt&&pt.push(`library name "${it}" contains illegal characters (whitespace or "/")`),yt&&nn&&pt.push("and"),nn&&pt.push(`version name "${Q}" contains illegal characters (whitespace or "/")`),void $.warn(pt.join(" "))}Hr(new J.wA(`${it}-version`,()=>({library:it,version:Q}),"VERSION"))}function mn(H,Q){if(null!==H&&"function"!=typeof H)throw nr.create("invalid-log-argument");(0,P.Am)(H,Q)}function zs(H){(0,P.Ub)(H)}const In="firebase-heartbeat-store";let si=null;function Co(){return si||(si=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(H,Q)=>{0===Q&&H.createObjectStore(In)}}).catch(H=>{throw nr.create("storage-open",{originalErrorMessage:H.message})})),si}function tt(){return(tt=(0,f.Z)(function*(H){try{return(yield Co()).transaction(In).objectStore(In).get(Zr(H))}catch(Q){throw nr.create("storage-get",{originalErrorMessage:Q.message})}})).apply(this,arguments)}function ft(H,Q){return rr.apply(this,arguments)}function rr(){return(rr=(0,f.Z)(function*(H,Q){try{const Ze=(yield Co()).transaction(In,"readwrite");return yield Ze.objectStore(In).put(Q,Zr(H)),Ze.done}catch(Me){throw nr.create("storage-set",{originalErrorMessage:Me.message})}})).apply(this,arguments)}function Zr(H){return`${H.name}!${H.options.appId}`}class ir{constructor(Q){this.container=Q,this._heartbeatsCache=null;const Me=this.container.getProvider("app").getImmediate();this._storage=new G(Me),this._heartbeatsCachePromise=this._storage.read().then(Ze=>(this._heartbeatsCache=Ze,Ze))}triggerHeartbeat(){var Q=this;return(0,f.Z)(function*(){const Ze=Q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),it=sr();if(null===Q._heartbeatsCache&&(Q._heartbeatsCache=yield Q._heartbeatsCachePromise),Q._heartbeatsCache.lastSentHeartbeatDate!==it&&!Q._heartbeatsCache.heartbeats.some(yt=>yt.date===it))return Q._heartbeatsCache.heartbeats.push({date:it,agent:Ze}),Q._heartbeatsCache.heartbeats=Q._heartbeatsCache.heartbeats.filter(yt=>{const nn=new Date(yt.date).valueOf();return Date.now()-nn<=2592e6}),Q._storage.overwrite(Q._heartbeatsCache)})()}getHeartbeatsHeader(){var Q=this;return(0,f.Z)(function*(){if(null===Q._heartbeatsCache&&(yield Q._heartbeatsCachePromise),null===Q._heartbeatsCache||0===Q._heartbeatsCache.heartbeats.length)return"";const Me=sr(),{heartbeatsToSend:Ze,unsentEntries:it}=function L(H,Q=1024){const Me=[];let Ze=H.slice();for(const it of H){const yt=Me.find(nn=>nn.agent===it.agent);if(yt){if(yt.dates.push(it.date),q(Me)>Q){yt.dates.pop();break}}else if(Me.push({agent:it.agent,dates:[it.date]}),q(Me)>Q){Me.pop();break}Ze=Ze.slice(1)}return{heartbeatsToSend:Me,unsentEntries:Ze}}(Q._heartbeatsCache.heartbeats),yt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Ze}));return Q._heartbeatsCache.lastSentHeartbeatDate=Me,it.length>0?(Q._heartbeatsCache.heartbeats=it,yield Q._storage.overwrite(Q._heartbeatsCache)):(Q._heartbeatsCache.heartbeats=[],Q._storage.overwrite(Q._heartbeatsCache)),yt})()}}function sr(){return(new Date).toISOString().substring(0,10)}class G{constructor(Q){this.app=Q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Q=this;return(0,f.Z)(function*(){return(yield Q._canUseIndexedDBPromise)&&(yield function Ft(H){return tt.apply(this,arguments)}(Q.app))||{heartbeats:[]}})()}overwrite(Q){var Me=this;return(0,f.Z)(function*(){var Ze;if(yield Me._canUseIndexedDBPromise){const yt=yield Me.read();return ft(Me.app,{lastSentHeartbeatDate:null!==(Ze=Q.lastSentHeartbeatDate)&&void 0!==Ze?Ze:yt.lastSentHeartbeatDate,heartbeats:Q.heartbeats})}})()}add(Q){var Me=this;return(0,f.Z)(function*(){var Ze;if(yield Me._canUseIndexedDBPromise){const yt=yield Me.read();return ft(Me.app,{lastSentHeartbeatDate:null!==(Ze=Q.lastSentHeartbeatDate)&&void 0!==Ze?Ze:yt.lastSentHeartbeatDate,heartbeats:[...yt.heartbeats,...Q.heartbeats]})}})()}}function q(H){return(0,ue.L)(JSON.stringify({version:2,heartbeats:H})).length}!function we(H){Hr(new J.wA("platform-logger",Q=>new pe(Q),"PRIVATE")),Hr(new J.wA("heartbeat",Q=>new ir(Q),"PRIVATE")),fn(se,"0.7.23",H),fn(se,"0.7.23","esm2017"),fn("fire-js","")}("")},4859:(Ke,ve,O)=>{O.d(ve,{H0:()=>se,wA:()=>P});var f=O(5861),J=O(2090);class P{constructor($,B,X){this.name=$,this.instanceFactory=B,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class re{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const X=new J.BH;if(this.instancesDeferred.set(B,X),this.isInitialized(B)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:B});$e&&X.resolve($e)}catch($e){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const X=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),$e=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Te){if($e)return null;throw Te}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function le(ce){return"EAGER"===ce.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(B){}for(const[B,X]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(B);try{const Te=this.getOrInitializeService({instanceIdentifier:$e});X.resolve(Te)}catch(Te){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...B.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,X=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:X,options:B});for(const[Te,xe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Te)&&xe.resolve($e);return $e}onInit($,B){var X;const $e=this.normalizeInstanceIdentifier(B),Te=null!==(X=this.onInitCallbacks.get($e))&&void 0!==X?X:new Set;Te.add($),this.onInitCallbacks.set($e,Te);const xe=this.instances.get($e);return xe&&$(xe,$e),()=>{Te.delete($)}}invokeOnInitCallbacks($,B){const X=this.onInitCallbacks.get(B);if(X)for(const $e of X)try{$e($,B)}catch(Te){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let X=this.instances.get($);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=$,ce===ue?void 0:ce),options:B}),this.instances.set($,X),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(X,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,X)}catch($e){}var ce;return X||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class se{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new re($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(Ke,ve,O)=>{O.d(ve,{Am:()=>ce,Ub:()=>se,Yd:()=>le,in:()=>J});const f=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const P={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ue=J.INFO,re={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},pe=($,B,...X)=>{if(B<$.logLevel)return;const $e=(new Date).toISOString(),Te=re[B];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Te](`[${$e}]  ${$.name}:`,...X)};class le{constructor(B){this.name=B,this._logLevel=ue,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?P[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function se($){f.forEach(B=>{B.setLogLevel($)})}function ce($,B){for(const X of f){let $e=null;B&&B.level&&($e=P[B.level]),X.userLogHandler=null===$?null:(Te,xe,...Le)=>{const he=Le.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(He){return null}}).filter(Ie=>Ie).join(" ");xe>=(null!=$e?$e:Te.logLevel)&&$({level:J[xe].toLowerCase(),message:he,args:Le,type:Te.name})}}}},8766:(Ke,ve,O)=>{O.d(ve,{Lj:()=>be,X3:()=>We});var f=O(5861);let P,ue;const le=new WeakMap,se=new WeakMap,ce=new WeakMap,$=new WeakMap,B=new WeakMap;let Te={get(j,V,Z){if(j instanceof IDBTransaction){if("done"===V)return se.get(j);if("objectStoreNames"===V)return j.objectStoreNames||ce.get(j);if("store"===V)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Ie(j[V])},set:(j,V,Z)=>(j[V]=Z,!0),has:(j,V)=>j instanceof IDBTransaction&&("done"===V||"store"===V)||V in j};function he(j){return"function"==typeof j?function Le(j){return j!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(j)?function(...V){return j.apply(He(this),V),Ie(le.get(this))}:function(...V){return Ie(j.apply(He(this),V))}:function(V,...Z){const oe=j.call(He(this),V,...Z);return ce.set(oe,V.sort?V.sort():[V]),Ie(oe)}}(j):(j instanceof IDBTransaction&&function $e(j){if(se.has(j))return;const V=new Promise((Z,oe)=>{const te=()=>{j.removeEventListener("complete",Ae),j.removeEventListener("error",ne),j.removeEventListener("abort",ne)},Ae=()=>{Z(),te()},ne=()=>{oe(j.error||new DOMException("AbortError","AbortError")),te()};j.addEventListener("complete",Ae),j.addEventListener("error",ne),j.addEventListener("abort",ne)});se.set(j,V)}(j),((j,V)=>V.some(Z=>j instanceof Z))(j,function re(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(j,Te):j)}function Ie(j){if(j instanceof IDBRequest)return function X(j){const V=new Promise((Z,oe)=>{const te=()=>{j.removeEventListener("success",Ae),j.removeEventListener("error",ne)},Ae=()=>{Z(Ie(j.result)),te()},ne=()=>{oe(j.error),te()};j.addEventListener("success",Ae),j.addEventListener("error",ne)});return V.then(Z=>{Z instanceof IDBCursor&&le.set(Z,j)}).catch(()=>{}),B.set(V,j),V}(j);if($.has(j))return $.get(j);const V=he(j);return V!==j&&($.set(j,V),B.set(V,j)),V}const He=j=>B.get(j);function We(j,V,{blocked:Z,upgrade:oe,blocking:te,terminated:Ae}={}){const ne=indexedDB.open(j,V),at=Ie(ne);return oe&&ne.addEventListener("upgradeneeded",Dt=>{oe(Ie(ne.result),Dt.oldVersion,Dt.newVersion,Ie(ne.transaction))}),Z&&ne.addEventListener("blocked",()=>Z()),at.then(Dt=>{Ae&&Dt.addEventListener("close",()=>Ae()),te&&Dt.addEventListener("versionchange",()=>te())}).catch(()=>{}),at}function be(j,{blocked:V}={}){const Z=indexedDB.deleteDatabase(j);return V&&Z.addEventListener("blocked",()=>V()),Ie(Z).then(()=>{})}const _e=["get","getKey","getAll","getAllKeys","count"],Ee=["put","add","delete","clear"],Ue=new Map;function Ve(j,V){if(!(j instanceof IDBDatabase)||V in j||"string"!=typeof V)return;if(Ue.get(V))return Ue.get(V);const Z=V.replace(/FromIndex$/,""),oe=V!==Z,te=Ee.includes(Z);if(!(Z in(oe?IDBIndex:IDBObjectStore).prototype)||!te&&!_e.includes(Z))return;const Ae=function(){var ne=(0,f.Z)(function*(at,...Dt){const wn=this.transaction(at,te?"readwrite":"readonly");let Je=wn.store;return oe&&(Je=Je.index(Dt.shift())),(yield Promise.all([Je[Z](...Dt),te&&wn.done]))[0]});return function(Dt){return ne.apply(this,arguments)}}();return Ue.set(V,Ae),Ae}!function xe(j){Te=j(Te)}(j=>FM(kM({},j),{get:(V,Z,oe)=>Ve(V,Z)||j.get(V,Z,oe),has:(V,Z)=>!!Ve(V,Z)||j.has(V,Z)}))},5861:(Ke,ve,O)=>{function f(P,ue,re,pe,le,se,ce){try{var $=P[se](ce),B=$.value}catch(X){return void re(X)}$.done?ue(B):Promise.resolve(B).then(pe,le)}function J(P){return function(){var ue=this,re=arguments;return new Promise(function(pe,le){var se=P.apply(ue,re);function ce(B){f(se,pe,le,ce,$,"next",B)}function $(B){f(se,pe,le,ce,$,"throw",B)}ce(void 0)})}}O.d(ve,{Z:()=>J})}},Ke=>{Ke(Ke.s=2190)}]);